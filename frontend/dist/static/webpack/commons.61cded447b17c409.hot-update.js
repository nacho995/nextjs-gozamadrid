"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("commons",{

/***/ "./src/pages/api.js":
/*!**************************!*\
  !*** ./src/pages/api.js ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_URL: function() { return /* binding */ API_URL; },\n/* harmony export */   WC_CONSUMER_KEY: function() { return /* binding */ WC_CONSUMER_KEY; },\n/* harmony export */   WC_CONSUMER_SECRET: function() { return /* binding */ WC_CONSUMER_SECRET; },\n/* harmony export */   \"default\": function() { return /* binding */ handler; },\n/* harmony export */   deleteBlogPost: function() { return /* binding */ deleteBlogPost; },\n/* harmony export */   getBlogById: function() { return /* binding */ getBlogById; },\n/* harmony export */   getBlogPosts: function() { return /* binding */ getBlogPosts; },\n/* harmony export */   getCountryPrefix: function() { return /* binding */ getCountryPrefix; },\n/* harmony export */   getPropertyById: function() { return /* binding */ getPropertyById; },\n/* harmony export */   getPropertyPosts: function() { return /* binding */ getPropertyPosts; },\n/* harmony export */   handleApiError: function() { return /* binding */ handleApiError; },\n/* harmony export */   sendEmail: function() { return /* binding */ sendEmail; },\n/* harmony export */   sendPropertyEmail: function() { return /* binding */ sendPropertyEmail; }\n/* harmony export */ });\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"./node_modules/next/dist/build/polyfills/process.js\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/next/dist/compiled/buffer/index.js\")[\"Buffer\"];\n// Exportar solo las funciones de utilidad sin crear una ruta API\nconst API_URL = \"https://goza-madrid.onrender.com\" || 0;\n// Definir las claves de API de WooCommerce\nconst WC_CONSUMER_KEY = process.env.NEXT_PUBLIC_NEXT_PUBLIC_WOO_COMMERCE_KEY;\nconst WC_CONSUMER_SECRET = \"cs_f194d11b41ca92cdd356145705fede711cd233e5\";\n// Función auxiliar para manejar errores\nconst handleApiError = (error, functionName)=>{\n    console.error(\"Error en \".concat(functionName, \":\"), error);\n    if (error.response) {\n        // El servidor respondió con un código de error\n        throw new Error(\"Error \".concat(error.response.status, \": \").concat(error.response.statusText));\n    } else if (error.request) {\n        // La petición fue hecha pero no se recibió respuesta\n        throw new Error(\"No se recibi\\xf3 respuesta del servidor\");\n    } else {\n        // Error al configurar la petición\n        throw new Error(error.message || \"Error desconocido\");\n    }\n};\nasync function getCountryPrefix() {\n    try {\n        console.log(\"Intentando obtener prefijos de pa\\xeds desde la API local\");\n        // Usar AbortController para evitar bloqueos\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 5000); // 5 segundos timeout\n        const response = await fetch(\"\".concat(API_URL, \"/prefix\"), {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n        // Si la respuesta fue exitosa y es JSON, devolver los datos\n        if (response.ok) {\n            const contentType = response.headers.get(\"content-type\");\n            if (contentType && contentType.includes(\"application/json\")) {\n                return await response.json();\n            }\n        }\n        // Si algo falla, devolver prefijos por defecto\n        console.log(\"Usando prefijos de pa\\xeds por defecto\");\n        return getDefaultCountryPrefixes();\n    } catch (error) {\n        console.error(\"Error al obtener prefijos de pa\\xeds:\", error.message);\n        // En caso de error, devolver prefijos por defecto\n        return getDefaultCountryPrefixes();\n    }\n}\n// Esta es la forma correcta, un junior podría hacerlo así:\nasync function getBlogPosts() {\n    // Array donde guardaremos todos los blogs\n    let allBlogs = [];\n    // 1. Intentar obtener blogs de WordPress usando nuestro proxy\n    try {\n        console.log(\"Obteniendo blogs de WordPress...\");\n        // Usar el proxy con el parámetro endpoint=wp para indicar que queremos la API de WordPress\n        const wpResponse = await fetch(\"/api/wordpress-proxy?endpoint=wp&path=posts&_embed=true\");\n        console.log(\"Respuesta de WordPress:\", {\n            status: wpResponse.status,\n            statusText: wpResponse.statusText\n        });\n        if (wpResponse.ok) {\n            const wpBlogs = await wpResponse.json();\n            console.log(\"Obtenidos \".concat(wpBlogs.length, \" blogs de WordPress\"));\n            // Añadir los blogs de WordPress al array, con la fuente marcada\n            wpBlogs.forEach((blog)=>{\n                var _blog_title, _blog_title1, _blog_content, _blog_excerpt;\n                // Procesar la imagen destacada\n                let featuredImage = null;\n                // Intentar obtener la imagen destacada desde _embedded\n                if (blog._embedded && blog._embedded[\"wp:featuredmedia\"] && blog._embedded[\"wp:featuredmedia\"][0]) {\n                    const media = blog._embedded[\"wp:featuredmedia\"][0];\n                    if (media.media_details && media.media_details.sizes) {\n                        // Buscar la mejor imagen disponible\n                        const sizePriority = [\n                            \"medium_large\",\n                            \"medium\",\n                            \"large\",\n                            \"full\"\n                        ];\n                        for (const size of sizePriority){\n                            if (media.media_details.sizes[size]) {\n                                featuredImage = media.media_details.sizes[size].source_url;\n                                break;\n                            }\n                        }\n                    }\n                    // Si no se encontró ninguna imagen en los tamaños, usar la URL de origen\n                    if (!featuredImage && media.source_url) {\n                        featuredImage = media.source_url;\n                    }\n                }\n                // Si no hay imagen destacada, intentar obtenerla de uagb_featured_image_src\n                if (!featuredImage && blog.uagb_featured_image_src) {\n                    var _blog_uagb_featured_image_src_medium, _blog_uagb_featured_image_src_full;\n                    featuredImage = ((_blog_uagb_featured_image_src_medium = blog.uagb_featured_image_src.medium) === null || _blog_uagb_featured_image_src_medium === void 0 ? void 0 : _blog_uagb_featured_image_src_medium[0]) || ((_blog_uagb_featured_image_src_full = blog.uagb_featured_image_src.full) === null || _blog_uagb_featured_image_src_full === void 0 ? void 0 : _blog_uagb_featured_image_src_full[0]);\n                }\n                // Si aún no hay imagen, usar una imagen por defecto\n                if (!featuredImage) {\n                    featuredImage = \"/img/default-blog-image.jpg\";\n                }\n                // Crear el objeto de blog con la imagen procesada\n                allBlogs.push({\n                    ...blog,\n                    image: {\n                        src: featuredImage,\n                        alt: ((_blog_title = blog.title) === null || _blog_title === void 0 ? void 0 : _blog_title.rendered) || blog.title || \"Imagen del blog\"\n                    },\n                    title: ((_blog_title1 = blog.title) === null || _blog_title1 === void 0 ? void 0 : _blog_title1.rendered) || blog.title || \"\",\n                    content: ((_blog_content = blog.content) === null || _blog_content === void 0 ? void 0 : _blog_content.rendered) || blog.content || \"\",\n                    excerpt: ((_blog_excerpt = blog.excerpt) === null || _blog_excerpt === void 0 ? void 0 : _blog_excerpt.rendered) || blog.excerpt || \"\",\n                    source: \"wordpress\"\n                });\n            });\n        } else {\n            const errorData = await wpResponse.json();\n            console.error(\"Error al obtener blogs de WordPress: \".concat(wpResponse.status), errorData);\n        }\n    } catch (error) {\n        console.error(\"Error con WordPress:\", error.message);\n    }\n    // 2. Intentar obtener blogs de MongoDB usando la API directa\n    try {\n        console.log(\"Obteniendo blogs de MongoDB...\");\n        // Usar la ruta correcta con API_URL\n        const mongoResponse = await fetch(\"\".concat(API_URL, \"/blog\"), {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        console.log(\"Respuesta de MongoDB:\", {\n            status: mongoResponse.status,\n            statusText: mongoResponse.statusText\n        });\n        if (mongoResponse.ok) {\n            const contentType = mongoResponse.headers.get(\"content-type\");\n            if (contentType && contentType.includes(\"application/json\")) {\n                const mongoBlogs = await mongoResponse.json();\n                console.log(\"Obtenidos \".concat(mongoBlogs.length, \" blogs de MongoDB\"));\n                // Añadir los blogs de MongoDB al array, con la fuente marcada\n                mongoBlogs.forEach((blog)=>{\n                    // Procesar las imágenes según el esquema\n                    let blogImages = [];\n                    // Verificar si el blog tiene imágenes\n                    if (blog.images && Array.isArray(blog.images) && blog.images.length > 0) {\n                        // Usar las imágenes del esquema\n                        blogImages = blog.images.map((img)=>{\n                            // Asegurarse de que la URL sea absoluta\n                            const src = typeof img === \"string\" ? img : img.src || \"\";\n                            const imgSrc = src.startsWith(\"http\") ? src : \"\".concat(API_URL).concat(src.startsWith(\"/\") ? \"\" : \"/\").concat(src);\n                            return {\n                                src: imgSrc,\n                                alt: typeof img === \"object\" && img.alt ? img.alt : blog.title || \"Imagen del blog\"\n                            };\n                        });\n                    } else if (blog.image) {\n                        // Compatibilidad con el formato anterior\n                        if (typeof blog.image === \"string\") {\n                            // Si la imagen es una cadena, crear un objeto de imagen\n                            const baseUrl = API_URL;\n                            const imageSrc = blog.image.startsWith(\"http\") ? blog.image : \"\".concat(baseUrl).concat(blog.image.startsWith(\"/\") ? \"\" : \"/\").concat(blog.image);\n                            blogImages = [\n                                {\n                                    src: imageSrc,\n                                    alt: blog.title || \"Imagen del blog\"\n                                }\n                            ];\n                        } else {\n                            // Si ya es un objeto, asegurarse de que la URL sea absoluta\n                            const baseUrl = API_URL;\n                            const src = blog.image.src || blog.image.url || \"\";\n                            blogImages = [\n                                {\n                                    ...blog.image,\n                                    src: src.startsWith(\"http\") ? src : \"\".concat(baseUrl).concat(src.startsWith(\"/\") ? \"\" : \"/\").concat(src)\n                                }\n                            ];\n                        }\n                    } else {\n                        // Si no hay imágenes, usar una por defecto\n                        blogImages = [\n                            {\n                                src: \"/img/default-blog-image.jpg\",\n                                alt: blog.title || \"Imagen del blog\"\n                            }\n                        ];\n                    }\n                    // Asegurarse de que el blog tenga todos los campos necesarios\n                    allBlogs.push({\n                        ...blog,\n                        _id: blog._id || \"mongo-\".concat(Date.now(), \"-\").concat(Math.random().toString(36).substring(2, 9)),\n                        title: blog.title || \"Sin t\\xedtulo\",\n                        content: blog.content || blog.description || \"\",\n                        description: blog.description || blog.excerpt || \"\",\n                        date: blog.createdAt || blog.date || new Date().toISOString(),\n                        dateFormatted: blog.dateFormatted || (blog.createdAt ? new Date(blog.createdAt).toLocaleDateString(\"es-ES\") : new Date().toLocaleDateString(\"es-ES\")),\n                        images: blogImages,\n                        image: blogImages[0] || {\n                            src: \"/img/default-blog-image.jpg\",\n                            alt: \"Imagen del blog\"\n                        },\n                        source: \"mongodb\"\n                    });\n                });\n            } else {\n                console.error(\"La respuesta no es JSON v\\xe1lido:\", await mongoResponse.text());\n            }\n        } else {\n            try {\n                const errorText = await mongoResponse.text();\n                console.error(\"Error al obtener blogs de MongoDB: \".concat(mongoResponse.status), errorText);\n            } catch (e) {\n                console.error(\"Error al obtener blogs de MongoDB: \".concat(mongoResponse.status), mongoResponse.statusText);\n            }\n        }\n    } catch (error) {\n        console.error(\"Error con MongoDB:\", error.message);\n    }\n    console.log(\"Total de blogs obtenidos: \".concat(allBlogs.length));\n    return allBlogs;\n}\nasync function deleteBlogPost(id) {\n    const response = await fetch(\"\".concat(API_URL, \"/blog/\").concat(id), {\n        method: \"DELETE\"\n    });\n    return response.json();\n}\nasync function getBlogById(id) {\n    try {\n        // Verificar si estamos en producción\n        const isProduction = \"development\" === \"production\";\n        console.log(\"[DEBUG] \\xbfEstamos en producci\\xf3n? \".concat(isProduction));\n        // En producción, añadimos un pequeño retraso para asegurar que los datos se carguen\n        if (isProduction) {\n            await new Promise((resolve)=>setTimeout(resolve, 1000));\n        }\n        // Verificar si es un ID de MongoDB (formato ObjectId)\n        const isMongoId = /^[0-9a-fA-F]{24}$/.test(id);\n        if (isMongoId) {\n            var _blogImages_;\n            // Es un ID de MongoDB, obtener de nuestra API\n            console.log(\"Obteniendo blog de MongoDB con ID \".concat(id));\n            // Usar la ruta con API_URL y un timeout más largo en producción\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), isProduction ? 20000 : 10000);\n            const response = await fetch(\"\".concat(API_URL, \"/blog/\").concat(id), {\n                signal: controller.signal,\n                headers: {\n                    \"Cache-Control\": \"no-cache\",\n                    \"Pragma\": \"no-cache\"\n                }\n            });\n            clearTimeout(timeoutId);\n            console.log(\"Respuesta de MongoDB:\", {\n                status: response.status,\n                statusText: response.statusText\n            });\n            if (!response.ok) {\n                console.error(\"Error al obtener blog de MongoDB: \".concat(response.status));\n                throw new Error(\"Error al obtener blog: \".concat(response.status));\n            }\n            const data = await response.json();\n            console.log(\"Datos del blog de MongoDB:\", data);\n            // Procesar las imágenes según el esquema\n            let blogImages = [];\n            // Verificar si el blog tiene imágenes\n            if (data.images && Array.isArray(data.images) && data.images.length > 0) {\n                // Usar las imágenes del esquema\n                blogImages = data.images.map((img)=>{\n                    // Asegurarse de que la URL sea absoluta\n                    const src = typeof img === \"string\" ? img : img.src || \"\";\n                    const imgSrc = src.startsWith(\"http\") ? src : \"\".concat(API_URL).concat(src.startsWith(\"/\") ? \"\" : \"/\").concat(src);\n                    return {\n                        src: imgSrc,\n                        alt: typeof img === \"object\" && img.alt ? img.alt : data.title || \"Imagen del blog\"\n                    };\n                });\n            } else if (data.image) {\n                // Compatibilidad con el formato anterior\n                if (typeof data.image === \"string\") {\n                    // Si la imagen es una cadena, crear un objeto de imagen\n                    const baseUrl = API_URL;\n                    const imageSrc = data.image.startsWith(\"http\") ? data.image : \"\".concat(baseUrl).concat(data.image.startsWith(\"/\") ? \"\" : \"/\").concat(data.image);\n                    blogImages = [\n                        {\n                            src: imageSrc,\n                            alt: data.title || \"Imagen del blog\"\n                        }\n                    ];\n                } else {\n                    // Si ya es un objeto, asegurarse de que la URL sea absoluta\n                    const baseUrl = API_URL;\n                    const src = data.image.src || data.image.url || \"\";\n                    blogImages = [\n                        {\n                            ...data.image,\n                            src: src.startsWith(\"http\") ? src : \"\".concat(baseUrl).concat(src.startsWith(\"/\") ? \"\" : \"/\").concat(src)\n                        }\n                    ];\n                }\n            } else {\n                // Si no hay imágenes, usar una por defecto\n                blogImages = [\n                    {\n                        src: \"/img/default-blog-image.jpg\",\n                        alt: data.title || \"Imagen del blog\"\n                    }\n                ];\n            }\n            // Asegurarse de que el blog tenga todos los campos necesarios\n            return {\n                ...data,\n                _id: data._id,\n                title: data.title || \"Sin t\\xedtulo\",\n                content: data.content || data.description || \"\",\n                description: data.description || data.excerpt || \"\",\n                date: data.createdAt || data.date || new Date().toISOString(),\n                dateFormatted: data.dateFormatted || (data.createdAt ? new Date(data.createdAt).toLocaleDateString(\"es-ES\") : new Date().toLocaleDateString(\"es-ES\")),\n                images: blogImages,\n                image: blogImages[0] || {\n                    src: \"/img/default-blog-image.jpg\",\n                    alt: \"Imagen del blog\"\n                },\n                imageUrl: ((_blogImages_ = blogImages[0]) === null || _blogImages_ === void 0 ? void 0 : _blogImages_.src) || \"/img/default-blog-image.jpg\",\n                source: \"mongodb\"\n            };\n        } else {\n            var _data_title, _data_content, _data_excerpt, _data_title1, _data_title2;\n            // Es un ID de WordPress, usar nuestro proxy\n            console.log(\"Obteniendo blog de WordPress con ID \".concat(id));\n            const response = await fetch(\"/api/wordpress-proxy?endpoint=wp&path=posts/\".concat(id, \"&_embed=true\"));\n            console.log(\"Respuesta de WordPress:\", {\n                status: response.status,\n                statusText: response.statusText\n            });\n            if (!response.ok) {\n                console.error(\"Error al obtener blog de WordPress: \".concat(response.status));\n                throw new Error(\"Error al obtener blog de WordPress: \".concat(response.status));\n            }\n            const data = await response.json();\n            console.log(\"Datos del blog de WordPress:\", data);\n            // Procesar la imagen destacada\n            let featuredImage = null;\n            // Intentar obtener la imagen destacada desde _embedded\n            if (data._embedded && data._embedded[\"wp:featuredmedia\"] && data._embedded[\"wp:featuredmedia\"][0]) {\n                const media = data._embedded[\"wp:featuredmedia\"][0];\n                if (media.media_details && media.media_details.sizes) {\n                    // Buscar la mejor imagen disponible\n                    const sizePriority = [\n                        \"medium_large\",\n                        \"medium\",\n                        \"large\",\n                        \"full\"\n                    ];\n                    for (const size of sizePriority){\n                        if (media.media_details.sizes[size]) {\n                            featuredImage = media.media_details.sizes[size].source_url;\n                            break;\n                        }\n                    }\n                }\n                // Si no se encontró ninguna imagen en los tamaños, usar la URL de origen\n                if (!featuredImage && media.source_url) {\n                    featuredImage = media.source_url;\n                }\n            }\n            // Si no hay imagen destacada, intentar obtenerla de uagb_featured_image_src\n            if (!featuredImage && data.uagb_featured_image_src) {\n                var _data_uagb_featured_image_src_medium, _data_uagb_featured_image_src_full;\n                featuredImage = ((_data_uagb_featured_image_src_medium = data.uagb_featured_image_src.medium) === null || _data_uagb_featured_image_src_medium === void 0 ? void 0 : _data_uagb_featured_image_src_medium[0]) || ((_data_uagb_featured_image_src_full = data.uagb_featured_image_src.full) === null || _data_uagb_featured_image_src_full === void 0 ? void 0 : _data_uagb_featured_image_src_full[0]);\n            }\n            // Si aún no hay imagen, usar una imagen por defecto\n            if (!featuredImage) {\n                featuredImage = \"/img/default-blog-image.jpg\";\n            }\n            // Crear el objeto de blog con la imagen procesada\n            return {\n                ...data,\n                _id: \"wp-\".concat(data.id),\n                id: data.id,\n                title: ((_data_title = data.title) === null || _data_title === void 0 ? void 0 : _data_title.rendered) || data.title || \"\",\n                content: ((_data_content = data.content) === null || _data_content === void 0 ? void 0 : _data_content.rendered) || data.content || \"\",\n                excerpt: ((_data_excerpt = data.excerpt) === null || _data_excerpt === void 0 ? void 0 : _data_excerpt.rendered) || data.excerpt || \"\",\n                date: data.date,\n                dateFormatted: new Date(data.date).toLocaleDateString(\"es-ES\"),\n                images: [\n                    {\n                        src: featuredImage,\n                        alt: ((_data_title1 = data.title) === null || _data_title1 === void 0 ? void 0 : _data_title1.rendered) || data.title || \"Imagen del blog\"\n                    }\n                ],\n                image: {\n                    src: featuredImage,\n                    alt: ((_data_title2 = data.title) === null || _data_title2 === void 0 ? void 0 : _data_title2.rendered) || data.title || \"Imagen del blog\"\n                },\n                imageUrl: featuredImage,\n                slug: data.slug,\n                source: \"wordpress\"\n            };\n        }\n    } catch (error) {\n        console.error(\"Error en getBlogById:\", error);\n        throw error;\n    }\n}\nasync function getPropertyPosts() {\n    let wpData = [];\n    let mongoData = [];\n    // 1. Intentar obtener propiedades de WooCommerce a través del proxy\n    try {\n        console.log(\"Obteniendo propiedades de WooCommerce...\");\n        // Usar nuestro proxy de Next.js\n        const firstPageResponse = await fetch(\"/api/wordpress-proxy?per_page=100\");\n        console.log(\"Respuesta de WooCommerce:\", {\n            status: firstPageResponse.status,\n            statusText: firstPageResponse.statusText\n        });\n        if (!firstPageResponse.ok) {\n            console.error(\"Error al obtener propiedades de WooCommerce: \".concat(firstPageResponse.status, \" \").concat(firstPageResponse.statusText));\n            throw new Error(\"Error al obtener propiedades: \".concat(firstPageResponse.status));\n        }\n        // Obtener el número total de páginas\n        const totalPages = parseInt(firstPageResponse.headers.get(\"X-WP-TotalPages\") || \"1\");\n        console.log(\"Total de p\\xe1ginas de propiedades: \".concat(totalPages));\n        // Obtener los datos de la primera página\n        const firstPageData = await firstPageResponse.json();\n        // Marcar las propiedades como provenientes de WooCommerce\n        const wpPropertiesWithSource = firstPageData.map((property)=>({\n                ...property,\n                source: \"woocommerce\"\n            }));\n        wpData = [\n            ...wpPropertiesWithSource\n        ];\n        // Si hay más páginas, obtenerlas en paralelo\n        if (totalPages > 1) {\n            const pagePromises = [];\n            for(let page = 2; page <= totalPages; page++){\n                pagePromises.push(fetch(\"/api/wordpress-proxy?page=\".concat(page, \"&per_page=100\")).then((res)=>{\n                    if (!res.ok) throw new Error(\"Error en p\\xe1gina \".concat(page, \": \").concat(res.status));\n                    return res.json();\n                }).then((pageData)=>{\n                    // Marcar las propiedades como provenientes de WooCommerce\n                    return pageData.map((property)=>({\n                            ...property,\n                            source: \"woocommerce\"\n                        }));\n                }));\n            }\n            // Esperar a que todas las promesas adicionales se resuelvan\n            const additionalPagesData = await Promise.all(pagePromises);\n            // Añadir los datos adicionales a wpData\n            additionalPagesData.forEach((pageData)=>{\n                wpData = [\n                    ...wpData,\n                    ...pageData\n                ];\n            });\n        }\n        console.log(\"Total de propiedades de WooCommerce obtenidas: \".concat(wpData.length));\n    } catch (wpError) {\n        console.error(\"Error al obtener propiedades de WooCommerce:\", wpError);\n    }\n    // 2. Intentar obtener propiedades de MongoDB\n    try {\n        console.log(\"Obteniendo propiedades de MongoDB...\");\n        // Usar la ruta correcta con API_URL\n        const mongoResponse = await fetch(\"\".concat(API_URL, \"/property\"));\n        console.log(\"Respuesta de MongoDB:\", {\n            status: mongoResponse.status,\n            statusText: mongoResponse.statusText\n        });\n        if (mongoResponse.ok) {\n            const contentType = mongoResponse.headers.get(\"content-type\");\n            if (contentType && contentType.includes(\"application/json\")) {\n                const properties = await mongoResponse.json();\n                console.log(\"Propiedades de MongoDB obtenidas:\", properties);\n                // Procesar las propiedades para asegurar que tengan el formato correcto\n                mongoData = properties.map((property)=>{\n                    // Procesar las imágenes para asegurar URLs absolutas\n                    let images = [];\n                    if (property.images) {\n                        if (Array.isArray(property.images)) {\n                            images = property.images.map((img)=>{\n                                if (typeof img === \"string\") {\n                                    // Si la imagen es una cadena, verificar si es una URL absoluta\n                                    return img.startsWith(\"http\") ? img : \"\".concat(API_URL).concat(img.startsWith(\"/\") ? \"\" : \"/\").concat(img);\n                                } else if (typeof img === \"object\" && img.url) {\n                                    // Si es un objeto con URL\n                                    return img.url.startsWith(\"http\") ? img.url : \"\".concat(API_URL).concat(img.url.startsWith(\"/\") ? \"\" : \"/\").concat(img.url);\n                                }\n                                return img;\n                            });\n                        } else if (typeof property.images === \"string\") {\n                            // Si images es una cadena\n                            const img = property.images;\n                            images = [\n                                img.startsWith(\"http\") ? img : \"\".concat(API_URL).concat(img.startsWith(\"/\") ? \"\" : \"/\").concat(img)\n                            ];\n                        }\n                    }\n                    // Si no hay imágenes, usar una imagen por defecto\n                    if (images.length === 0) {\n                        images = [\n                            \"/img/default-property-image.jpg\"\n                        ];\n                    }\n                    return {\n                        ...property,\n                        _id: property._id,\n                        title: property.title || property.name || \"Propiedad sin t\\xedtulo\",\n                        description: property.description || \"\",\n                        price: property.price || \"0\",\n                        location: property.location || \"Madrid\",\n                        bedrooms: property.bedrooms || 0,\n                        bathrooms: property.bathrooms || 0,\n                        size: property.m2 || property.area || property.size || 0,\n                        livingArea: property.m2 || property.area || property.size || 0,\n                        images: images,\n                        source: \"mongodb\"\n                    };\n                });\n                console.log(\"Total de propiedades de MongoDB obtenidas: \".concat(mongoData.length));\n            } else {\n                console.error(\"La respuesta no es JSON v\\xe1lido:\", await mongoResponse.text());\n            }\n        } else {\n            try {\n                const errorText = await mongoResponse.text();\n                console.error(\"Error al obtener propiedades de MongoDB: \".concat(mongoResponse.status), errorText);\n            } catch (e) {\n                console.error(\"Error al obtener propiedades de MongoDB: \".concat(mongoResponse.status), mongoResponse.statusText);\n            }\n        }\n    } catch (mongoError) {\n        console.error(\"Error al obtener propiedades de MongoDB:\", mongoError);\n    }\n    // Combinar los resultados de ambas fuentes\n    const combinedData = [\n        ...mongoData,\n        ...wpData\n    ];\n    console.log(\"Total de propiedades combinadas: \".concat(combinedData.length));\n    return combinedData;\n}\nasync function getPropertyById(id) {\n    try {\n        console.log(\"[DEBUG] Iniciando getPropertyById para ID: \".concat(id));\n        // Verificar si estamos en producción\n        const isProduction = \"development\" === \"production\";\n        console.log(\"[DEBUG] \\xbfEstamos en producci\\xf3n? \".concat(isProduction));\n        // Verificar si es un ID de MongoDB (formato ObjectId)\n        const isMongoId = /^[0-9a-fA-F]{24}$/.test(id);\n        console.log(\"[DEBUG] \\xbfEs ID de MongoDB? \".concat(isMongoId));\n        // En producción, añadimos un pequeño retraso para asegurar que los datos se carguen\n        if (isProduction) {\n            await new Promise((resolve)=>setTimeout(resolve, 1000));\n        }\n        // Crear un controlador de aborto para establecer un timeout más largo en producción\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>{\n            console.log(\"[DEBUG] TIMEOUT alcanzado para la propiedad con ID: \".concat(id));\n            controller.abort();\n        }, isProduction ? 20000 : 10000); // 20 segundos en producción, 10 en desarrollo\n        let response;\n        if (isMongoId) {\n            // Es un ID de MongoDB, obtener de nuestra API\n            console.log(\"[DEBUG] Obteniendo propiedad de MongoDB con ID \".concat(id));\n            try {\n                // Usar la URL base según el entorno\n                const baseUrl =  false ? 0 // En el servidor\n                 : \"\"; // En el cliente (URL relativa)\n                const url = \"\".concat(baseUrl, \"/property/\").concat(id);\n                console.log(\"[DEBUG] URL de petici\\xf3n MongoDB: \".concat(url));\n                response = await fetch(url, {\n                    signal: controller.signal,\n                    headers: {\n                        \"Cache-Control\": \"no-cache, no-store, must-revalidate\",\n                        \"Pragma\": \"no-cache\",\n                        \"Expires\": \"0\"\n                    }\n                });\n                console.log(\"[DEBUG] Respuesta MongoDB recibida: \".concat(response.status, \" \").concat(response.statusText));\n            } catch (error) {\n                clearTimeout(timeoutId);\n                console.error(\"[DEBUG] Error en fetch MongoDB:\", error);\n                if (error.name === \"AbortError\") {\n                    console.error(\"[DEBUG] La solicitud a MongoDB se cancel\\xf3 por timeout\");\n                    throw new Error(\"Tiempo de espera agotado al obtener la propiedad. Por favor, int\\xe9ntalo de nuevo.\");\n                }\n                throw error;\n            }\n        } else {\n            // Es un ID de WooCommerce, usar nuestro proxy\n            console.log(\"[DEBUG] Obteniendo propiedad de WooCommerce con ID \".concat(id));\n            try {\n                // Usar la URL base según el entorno\n                const baseUrl =  false ? 0 // En el servidor\n                 : \"/api/wordpress-proxy\"; // En el cliente\n                const url = \"\".concat(baseUrl, \"?path=products/\").concat(id);\n                console.log(\"[DEBUG] URL de petici\\xf3n WooCommerce: \".concat(url));\n                response = await fetch(url, {\n                    signal: controller.signal,\n                    headers: {\n                        \"Cache-Control\": \"no-cache, no-store, must-revalidate\",\n                        \"Pragma\": \"no-cache\",\n                        \"Expires\": \"0\"\n                    }\n                });\n                console.log(\"[DEBUG] Respuesta WooCommerce recibida: \".concat(response.status, \" \").concat(response.statusText));\n            } catch (error) {\n                clearTimeout(timeoutId);\n                console.error(\"[DEBUG] Error en fetch WooCommerce:\", error);\n                if (error.name === \"AbortError\") {\n                    console.error(\"[DEBUG] La solicitud a WooCommerce se cancel\\xf3 por timeout\");\n                    throw new Error(\"Tiempo de espera agotado al obtener la propiedad. Por favor, int\\xe9ntalo de nuevo.\");\n                }\n                throw error;\n            }\n        }\n        // Limpiar el timeout\n        clearTimeout(timeoutId);\n        // Verificar si la respuesta es exitosa\n        if (!response.ok) {\n            console.error(\"[DEBUG] Error en respuesta: \".concat(response.status, \" \").concat(response.statusText));\n            throw new Error(\"Error al obtener propiedad: \".concat(response.status, \" \").concat(response.statusText));\n        }\n        // Obtener los datos de la respuesta\n        console.log(\"[DEBUG] Intentando obtener JSON de la respuesta\");\n        const data = await response.json();\n        console.log(\"[DEBUG] JSON obtenido correctamente para ID \".concat(id));\n        // Procesar los datos según el tipo de propiedad\n        if (isMongoId) {\n            console.log(\"[DEBUG] Procesando datos de MongoDB\");\n            // Procesar las imágenes para asegurar URLs absolutas\n            let images = [];\n            if (data.images) {\n                if (Array.isArray(data.images)) {\n                    console.log(\"[DEBUG] Procesando array de im\\xe1genes: \".concat(data.images.length, \" im\\xe1genes\"));\n                    images = data.images.map((img)=>{\n                        if (typeof img === \"string\") {\n                            // Si la imagen es una cadena, verificar si es una URL absoluta\n                            return img.startsWith(\"http\") ? img : \"\".concat(API_URL).concat(img.startsWith(\"/\") ? \"\" : \"/\").concat(img);\n                        } else if (typeof img === \"object\" && img.src) {\n                            // Si es un objeto con src, asegurar que sea una URL absoluta\n                            const src = img.src.startsWith(\"http\") ? img.src : \"\".concat(API_URL).concat(img.src.startsWith(\"/\") ? \"\" : \"/\").concat(img.src);\n                            return {\n                                ...img,\n                                src\n                            };\n                        }\n                        return img;\n                    }).filter((img)=>img); // Filtrar valores nulos o indefinidos\n                } else if (typeof data.images === \"string\") {\n                    // Si images es una cadena\n                    console.log(\"[DEBUG] Procesando imagen \\xfanica (string)\");\n                    const img = data.images;\n                    images = [\n                        img.startsWith(\"http\") ? img : \"\".concat(API_URL).concat(img.startsWith(\"/\") ? \"\" : \"/\").concat(img)\n                    ];\n                }\n            }\n            // Si no hay imágenes, usar una imagen por defecto\n            if (images.length === 0) {\n                console.log(\"[DEBUG] No se encontraron im\\xe1genes, usando imagen por defecto\");\n                images = [\n                    \"/img/default-property-image.jpg\"\n                ];\n            }\n            // Asegurarse de que todos los campos críticos estén definidos\n            const result = {\n                ...data,\n                _id: data._id,\n                title: data.title || data.name || \"Propiedad sin t\\xedtulo\",\n                description: data.description || \"\",\n                price: data.price || \"0\",\n                location: data.location || \"Madrid\",\n                bedrooms: data.bedrooms || data.rooms || 0,\n                bathrooms: data.bathrooms || data.wc || 0,\n                size: data.area || data.m2 || 0,\n                images: images,\n                source: \"mongodb\"\n            };\n            console.log(\"[DEBUG] Datos de MongoDB procesados correctamente\");\n            return result;\n        } else {\n            var _data_meta_data_find, _data_meta_data, _data_meta_data_find1, _data_meta_data1, _data_meta_data_find2, _data_meta_data2;\n            console.log(\"[DEBUG] Procesando datos de WooCommerce\");\n            // Procesar las imágenes para asegurar que tenemos URLs válidas\n            let images = [];\n            // Intentar obtener imágenes de diferentes fuentes en WooCommerce\n            if (data.images && Array.isArray(data.images) && data.images.length > 0) {\n                console.log(\"[DEBUG] Procesando array de im\\xe1genes WooCommerce: \".concat(data.images.length, \" im\\xe1genes\"));\n                images = data.images.map((img)=>img.src || img).filter((img)=>img);\n            } else if (data.image && data.image.src) {\n                console.log(\"[DEBUG] Procesando imagen \\xfanica WooCommerce\");\n                images = [\n                    data.image.src\n                ];\n            }\n            // Si no hay imágenes, usar una imagen por defecto\n            if (images.length === 0) {\n                console.log(\"[DEBUG] No se encontraron im\\xe1genes WooCommerce, usando imagen por defecto\");\n                images = [\n                    \"/img/default-property-image.jpg\"\n                ];\n            }\n            // Asegurarse de que todos los campos críticos estén definidos\n            const result = {\n                ...data,\n                id: data.id,\n                title: data.name || \"Propiedad sin t\\xedtulo\",\n                description: data.description || \"\",\n                price: data.price || \"0\",\n                location: data.address || \"Madrid\",\n                bedrooms: ((_data_meta_data = data.meta_data) === null || _data_meta_data === void 0 ? void 0 : (_data_meta_data_find = _data_meta_data.find((m)=>m.key === \"bedrooms\")) === null || _data_meta_data_find === void 0 ? void 0 : _data_meta_data_find.value) || 0,\n                bathrooms: ((_data_meta_data1 = data.meta_data) === null || _data_meta_data1 === void 0 ? void 0 : (_data_meta_data_find1 = _data_meta_data1.find((m)=>m.key === \"bathrooms\")) === null || _data_meta_data_find1 === void 0 ? void 0 : _data_meta_data_find1.value) || 0,\n                size: ((_data_meta_data2 = data.meta_data) === null || _data_meta_data2 === void 0 ? void 0 : (_data_meta_data_find2 = _data_meta_data2.find((m)=>m.key === \"area\")) === null || _data_meta_data_find2 === void 0 ? void 0 : _data_meta_data_find2.value) || 0,\n                images: images,\n                source: \"woocommerce\"\n            };\n            console.log(\"[DEBUG] Datos de WooCommerce procesados correctamente\");\n            return result;\n        }\n    } catch (error) {\n        console.error(\"[DEBUG] Error en getPropertyById:\", error);\n        console.error(\"[DEBUG] Stack trace:\", error.stack);\n        throw error;\n    }\n}\n// Función para enviar el formulario de contacto\nconst sendEmail = async (data)=>{\n    try {\n        // Reformatear los datos para adaptarse al formato esperado por la API\n        const formattedData = {\n            nombre: data.name,\n            email: data.email,\n            prefix: data.prefix || \"+34\",\n            telefono: data.phone || \"\",\n            asunto: data.message // El mensaje lo enviamos como asunto que es lo que espera el backend\n        };\n        // Validación local actualizada para campos\n        if (!formattedData.nombre || !formattedData.email) {\n            console.error(\"Faltan datos obligatorios:\", formattedData);\n            return {\n                success: false,\n                message: \"Faltan datos requeridos: nombre y email son obligatorios\",\n                error: \"Validaci\\xf3n local\",\n                ok: false\n            };\n        }\n        // Definir el endpoint para el contacto\n        const endpoint = \"\".concat(API_URL, \"/api/contact\");\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(formattedData)\n        });\n        // Capturar la respuesta como texto para debugging\n        const responseText = await response.text();\n        // Intentar parsear la respuesta como JSON\n        let responseData;\n        try {\n            responseData = JSON.parse(responseText);\n        } catch (e) {\n            console.error(\"Respuesta no es JSON v\\xe1lido\");\n            return {\n                success: false,\n                message: \"Formato de respuesta inv\\xe1lido\",\n                error: \"El servidor no respondi\\xf3 con un formato v\\xe1lido\",\n                ok: false\n            };\n        }\n        // Agregar la propiedad ok para compatibilidad con el código existente\n        responseData.ok = response.ok;\n        return responseData;\n    } catch (error) {\n        console.error(\"Error al enviar formulario:\", error);\n        // Devolver un objeto con formato similar al de respuesta exitosa\n        return {\n            success: false,\n            message: \"Error de conexi\\xf3n\",\n            error: error.message,\n            ok: false\n        };\n    }\n};\nconst sendPropertyEmail = async (data)=>{\n    try {\n        const API_URL = \"https://goza-madrid.onrender.com\" || 0;\n        if (data.type === \"offer\") {\n            const endpoint = \"\".concat(API_URL, \"/api/property-offer/create\");\n            // Validar datos requeridos para la oferta\n            if (!data.offerAmount || !data.email || !data.name || !data.phone || !data.propertyId || !data.propertyTitle) {\n                console.error(\"Faltan datos requeridos para la oferta:\", data);\n                return {\n                    success: false,\n                    message: \"Faltan datos requeridos para la oferta\"\n                };\n            }\n            // Mapear los campos correctamente para la oferta\n            const offerData = {\n                offerPrice: data.offerAmount,\n                offerPercentage: data.offerLabel || \"\",\n                email: data.email,\n                name: data.name,\n                phone: data.phone,\n                property: data.propertyId,\n                propertyAddress: data.propertyTitle,\n                message: data.message || \"\"\n            };\n            console.log(\"Enviando datos de oferta:\", offerData);\n            const response = await fetch(endpoint, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                body: JSON.stringify(offerData)\n            });\n            const responseData = await response.json();\n            if (!response.ok) {\n                console.error(\"Error en respuesta de oferta:\", responseData);\n                throw new Error(responseData.message || \"Error en la respuesta del servidor\");\n            }\n            return responseData;\n        } else if (data.type === \"visit\") {\n            const endpoint = \"\".concat(API_URL, \"/api/property-visit/create\");\n            // Validar datos requeridos para la visita\n            if (!data.visitDate || !data.visitTime || !data.email || !data.name || !data.phone || !data.propertyId || !data.propertyTitle) {\n                console.error(\"Faltan datos requeridos para la visita:\", data);\n                return {\n                    success: false,\n                    message: \"Faltan datos requeridos para la visita\"\n                };\n            }\n            // Mapear los campos correctamente para la visita\n            const visitData = {\n                date: data.visitDate,\n                time: data.visitTime,\n                email: data.email,\n                name: data.name,\n                phone: data.phone,\n                property: data.propertyId,\n                propertyAddress: data.propertyTitle,\n                message: data.message || \"\"\n            };\n            console.log(\"Enviando datos de visita:\", visitData);\n            const response = await fetch(endpoint, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                body: JSON.stringify(visitData)\n            });\n            const responseData = await response.json();\n            if (!response.ok) {\n                console.error(\"Error en respuesta de visita:\", responseData);\n                throw new Error(responseData.message || \"Error en la respuesta del servidor\");\n            }\n            return responseData;\n        }\n        throw new Error(\"Tipo de solicitud no v\\xe1lido\");\n    } catch (error) {\n        console.error(\"Error al enviar email:\", error);\n        return {\n            success: false,\n            message: error.message || \"Error al procesar la solicitud\"\n        };\n    }\n};\nasync function handler(req, res) {\n    const { url } = req.query;\n    if (!url) {\n        return res.status(400).json({\n            error: \"URL no proporcionada\"\n        });\n    }\n    try {\n        const imageResponse = await fetch(url);\n        const imageBuffer = await imageResponse.arrayBuffer();\n        // Obtener el tipo de contenido\n        const contentType = imageResponse.headers.get(\"content-type\");\n        // Configurar cabeceras de respuesta\n        res.setHeader(\"Content-Type\", contentType);\n        res.setHeader(\"Cache-Control\", \"public, max-age=86400\"); // Cachear por 24 horas\n        // Enviar la imagen\n        res.status(200).send(Buffer.from(imageBuffer));\n    } catch (error) {\n        console.error(\"Error al obtener imagen:\", error);\n        res.status(500).json({\n            error: \"Error al obtener la imagen\"\n        });\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9wYWdlcy9hcGkuanM/ZWFmMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBFeHBvcnRhciBzb2xvIGxhcyBmdW5jaW9uZXMgZGUgdXRpbGlkYWQgc2luIGNyZWFyIHVuYSBydXRhIEFQSVxuZXhwb3J0IGNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuXG4vLyBEZWZpbmlyIGxhcyBjbGF2ZXMgZGUgQVBJIGRlIFdvb0NvbW1lcmNlXG5leHBvcnQgY29uc3QgV0NfQ09OU1VNRVJfS0VZID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTkVYVF9QVUJMSUNfV09PX0NPTU1FUkNFX0tFWTtcbmV4cG9ydCBjb25zdCBXQ19DT05TVU1FUl9TRUNSRVQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19XT09fQ09NTUVSQ0VfU0VDUkVUO1xuXG4vLyBGdW5jacOzbiBhdXhpbGlhciBwYXJhIG1hbmVqYXIgZXJyb3Jlc1xuZXhwb3J0IGNvbnN0IGhhbmRsZUFwaUVycm9yID0gKGVycm9yLCBmdW5jdGlvbk5hbWUpID0+IHtcbiAgY29uc29sZS5lcnJvcihgRXJyb3IgZW4gJHtmdW5jdGlvbk5hbWV9OmAsIGVycm9yKTtcbiAgaWYgKGVycm9yLnJlc3BvbnNlKSB7XG4gICAgLy8gRWwgc2Vydmlkb3IgcmVzcG9uZGnDsyBjb24gdW4gY8OzZGlnbyBkZSBlcnJvclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgJHtlcnJvci5yZXNwb25zZS5zdGF0dXN9OiAke2Vycm9yLnJlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gIH0gZWxzZSBpZiAoZXJyb3IucmVxdWVzdCkge1xuICAgIC8vIExhIHBldGljacOzbiBmdWUgaGVjaGEgcGVybyBubyBzZSByZWNpYmnDsyByZXNwdWVzdGFcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlIHJlY2liacOzIHJlc3B1ZXN0YSBkZWwgc2Vydmlkb3InKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBFcnJvciBhbCBjb25maWd1cmFyIGxhIHBldGljacOzblxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBkZXNjb25vY2lkbycpO1xuICB9XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q291bnRyeVByZWZpeCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIkludGVudGFuZG8gb2J0ZW5lciBwcmVmaWpvcyBkZSBwYcOtcyBkZXNkZSBsYSBBUEkgbG9jYWxcIik7XG4gICAgXG4gICAgLy8gVXNhciBBYm9ydENvbnRyb2xsZXIgcGFyYSBldml0YXIgYmxvcXVlb3NcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCA1MDAwKTsgLy8gNSBzZWd1bmRvcyB0aW1lb3V0XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9wcmVmaXhgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxuICAgIH0pO1xuICAgIFxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgLy8gU2kgbGEgcmVzcHVlc3RhIGZ1ZSBleGl0b3NhIHkgZXMgSlNPTiwgZGV2b2x2ZXIgbG9zIGRhdG9zXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgIGlmIChjb250ZW50VHlwZSAmJiBjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFNpIGFsZ28gZmFsbGEsIGRldm9sdmVyIHByZWZpam9zIHBvciBkZWZlY3RvXG4gICAgY29uc29sZS5sb2coXCJVc2FuZG8gcHJlZmlqb3MgZGUgcGHDrXMgcG9yIGRlZmVjdG9cIik7XG4gICAgcmV0dXJuIGdldERlZmF1bHRDb3VudHJ5UHJlZml4ZXMoKTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgb2J0ZW5lciBwcmVmaWpvcyBkZSBwYcOtczpcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgLy8gRW4gY2FzbyBkZSBlcnJvciwgZGV2b2x2ZXIgcHJlZmlqb3MgcG9yIGRlZmVjdG9cbiAgICByZXR1cm4gZ2V0RGVmYXVsdENvdW50cnlQcmVmaXhlcygpO1xuICB9XG59XG5cbi8vIEVzdGEgZXMgbGEgZm9ybWEgY29ycmVjdGEsIHVuIGp1bmlvciBwb2Ryw61hIGhhY2VybG8gYXPDrTpcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCbG9nUG9zdHMoKSB7XG4gIC8vIEFycmF5IGRvbmRlIGd1YXJkYXJlbW9zIHRvZG9zIGxvcyBibG9nc1xuICBsZXQgYWxsQmxvZ3MgPSBbXTtcbiAgXG4gIC8vIDEuIEludGVudGFyIG9idGVuZXIgYmxvZ3MgZGUgV29yZFByZXNzIHVzYW5kbyBudWVzdHJvIHByb3h5XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJPYnRlbmllbmRvIGJsb2dzIGRlIFdvcmRQcmVzcy4uLlwiKTtcbiAgICBcbiAgICAvLyBVc2FyIGVsIHByb3h5IGNvbiBlbCBwYXLDoW1ldHJvIGVuZHBvaW50PXdwIHBhcmEgaW5kaWNhciBxdWUgcXVlcmVtb3MgbGEgQVBJIGRlIFdvcmRQcmVzc1xuICAgIGNvbnN0IHdwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIFwiL2FwaS93b3JkcHJlc3MtcHJveHk/ZW5kcG9pbnQ9d3AmcGF0aD1wb3N0cyZfZW1iZWQ9dHJ1ZVwiXG4gICAgKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIlJlc3B1ZXN0YSBkZSBXb3JkUHJlc3M6XCIsIHtcbiAgICAgIHN0YXR1czogd3BSZXNwb25zZS5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB3cFJlc3BvbnNlLnN0YXR1c1RleHRcbiAgICB9KTtcbiAgICBcbiAgICBpZiAod3BSZXNwb25zZS5vaykge1xuICAgICAgY29uc3Qgd3BCbG9ncyA9IGF3YWl0IHdwUmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgT2J0ZW5pZG9zICR7d3BCbG9ncy5sZW5ndGh9IGJsb2dzIGRlIFdvcmRQcmVzc2ApO1xuICAgICAgXG4gICAgICAvLyBBw7FhZGlyIGxvcyBibG9ncyBkZSBXb3JkUHJlc3MgYWwgYXJyYXksIGNvbiBsYSBmdWVudGUgbWFyY2FkYVxuICAgICAgd3BCbG9ncy5mb3JFYWNoKGJsb2cgPT4ge1xuICAgICAgICAvLyBQcm9jZXNhciBsYSBpbWFnZW4gZGVzdGFjYWRhXG4gICAgICAgIGxldCBmZWF0dXJlZEltYWdlID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIC8vIEludGVudGFyIG9idGVuZXIgbGEgaW1hZ2VuIGRlc3RhY2FkYSBkZXNkZSBfZW1iZWRkZWRcbiAgICAgICAgaWYgKGJsb2cuX2VtYmVkZGVkICYmIGJsb2cuX2VtYmVkZGVkWyd3cDpmZWF0dXJlZG1lZGlhJ10gJiYgYmxvZy5fZW1iZWRkZWRbJ3dwOmZlYXR1cmVkbWVkaWEnXVswXSkge1xuICAgICAgICAgIGNvbnN0IG1lZGlhID0gYmxvZy5fZW1iZWRkZWRbJ3dwOmZlYXR1cmVkbWVkaWEnXVswXTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobWVkaWEubWVkaWFfZGV0YWlscyAmJiBtZWRpYS5tZWRpYV9kZXRhaWxzLnNpemVzKSB7XG4gICAgICAgICAgICAvLyBCdXNjYXIgbGEgbWVqb3IgaW1hZ2VuIGRpc3BvbmlibGVcbiAgICAgICAgICAgIGNvbnN0IHNpemVQcmlvcml0eSA9IFsnbWVkaXVtX2xhcmdlJywgJ21lZGl1bScsICdsYXJnZScsICdmdWxsJ107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2l6ZSBvZiBzaXplUHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgaWYgKG1lZGlhLm1lZGlhX2RldGFpbHMuc2l6ZXNbc2l6ZV0pIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlZEltYWdlID0gbWVkaWEubWVkaWFfZGV0YWlscy5zaXplc1tzaXplXS5zb3VyY2VfdXJsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNpIG5vIHNlIGVuY29udHLDsyBuaW5ndW5hIGltYWdlbiBlbiBsb3MgdGFtYcOxb3MsIHVzYXIgbGEgVVJMIGRlIG9yaWdlblxuICAgICAgICAgIGlmICghZmVhdHVyZWRJbWFnZSAmJiBtZWRpYS5zb3VyY2VfdXJsKSB7XG4gICAgICAgICAgICBmZWF0dXJlZEltYWdlID0gbWVkaWEuc291cmNlX3VybDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIGhheSBpbWFnZW4gZGVzdGFjYWRhLCBpbnRlbnRhciBvYnRlbmVybGEgZGUgdWFnYl9mZWF0dXJlZF9pbWFnZV9zcmNcbiAgICAgICAgaWYgKCFmZWF0dXJlZEltYWdlICYmIGJsb2cudWFnYl9mZWF0dXJlZF9pbWFnZV9zcmMpIHtcbiAgICAgICAgICBmZWF0dXJlZEltYWdlID0gYmxvZy51YWdiX2ZlYXR1cmVkX2ltYWdlX3NyYy5tZWRpdW0/LlswXSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvZy51YWdiX2ZlYXR1cmVkX2ltYWdlX3NyYy5mdWxsPy5bMF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGHDum4gbm8gaGF5IGltYWdlbiwgdXNhciB1bmEgaW1hZ2VuIHBvciBkZWZlY3RvXG4gICAgICAgIGlmICghZmVhdHVyZWRJbWFnZSkge1xuICAgICAgICAgIGZlYXR1cmVkSW1hZ2UgPSAnL2ltZy9kZWZhdWx0LWJsb2ctaW1hZ2UuanBnJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgZWwgb2JqZXRvIGRlIGJsb2cgY29uIGxhIGltYWdlbiBwcm9jZXNhZGFcbiAgICAgICAgYWxsQmxvZ3MucHVzaCh7XG4gICAgICAgICAgLi4uYmxvZyxcbiAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgc3JjOiBmZWF0dXJlZEltYWdlLFxuICAgICAgICAgICAgYWx0OiBibG9nLnRpdGxlPy5yZW5kZXJlZCB8fCBibG9nLnRpdGxlIHx8ICdJbWFnZW4gZGVsIGJsb2cnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aXRsZTogYmxvZy50aXRsZT8ucmVuZGVyZWQgfHwgYmxvZy50aXRsZSB8fCAnJyxcbiAgICAgICAgICBjb250ZW50OiBibG9nLmNvbnRlbnQ/LnJlbmRlcmVkIHx8IGJsb2cuY29udGVudCB8fCAnJyxcbiAgICAgICAgICBleGNlcnB0OiBibG9nLmV4Y2VycHQ/LnJlbmRlcmVkIHx8IGJsb2cuZXhjZXJwdCB8fCAnJyxcbiAgICAgICAgICBzb3VyY2U6ICd3b3JkcHJlc3MnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHdwUmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgb2J0ZW5lciBibG9ncyBkZSBXb3JkUHJlc3M6ICR7d3BSZXNwb25zZS5zdGF0dXN9YCwgZXJyb3JEYXRhKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvbiBXb3JkUHJlc3M6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICB9XG4gIFxuICAvLyAyLiBJbnRlbnRhciBvYnRlbmVyIGJsb2dzIGRlIE1vbmdvREIgdXNhbmRvIGxhIEFQSSBkaXJlY3RhXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJPYnRlbmllbmRvIGJsb2dzIGRlIE1vbmdvREIuLi5cIik7XG4gICAgXG4gICAgLy8gVXNhciBsYSBydXRhIGNvcnJlY3RhIGNvbiBBUElfVVJMXG4gICAgY29uc3QgbW9uZ29SZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L2Jsb2dgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJSZXNwdWVzdGEgZGUgTW9uZ29EQjpcIiwge1xuICAgICAgc3RhdHVzOiBtb25nb1Jlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IG1vbmdvUmVzcG9uc2Uuc3RhdHVzVGV4dFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChtb25nb1Jlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IG1vbmdvUmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgY29uc3QgbW9uZ29CbG9ncyA9IGF3YWl0IG1vbmdvUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYE9idGVuaWRvcyAke21vbmdvQmxvZ3MubGVuZ3RofSBibG9ncyBkZSBNb25nb0RCYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBw7FhZGlyIGxvcyBibG9ncyBkZSBNb25nb0RCIGFsIGFycmF5LCBjb24gbGEgZnVlbnRlIG1hcmNhZGFcbiAgICAgICAgbW9uZ29CbG9ncy5mb3JFYWNoKGJsb2cgPT4ge1xuICAgICAgICAgIC8vIFByb2Nlc2FyIGxhcyBpbcOhZ2VuZXMgc2Vnw7puIGVsIGVzcXVlbWFcbiAgICAgICAgICBsZXQgYmxvZ0ltYWdlcyA9IFtdO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBibG9nIHRpZW5lIGltw6FnZW5lc1xuICAgICAgICAgIGlmIChibG9nLmltYWdlcyAmJiBBcnJheS5pc0FycmF5KGJsb2cuaW1hZ2VzKSAmJiBibG9nLmltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBVc2FyIGxhcyBpbcOhZ2VuZXMgZGVsIGVzcXVlbWFcbiAgICAgICAgICAgIGJsb2dJbWFnZXMgPSBibG9nLmltYWdlcy5tYXAoaW1nID0+IHtcbiAgICAgICAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgbGEgVVJMIHNlYSBhYnNvbHV0YVxuICAgICAgICAgICAgICBjb25zdCBzcmMgPSB0eXBlb2YgaW1nID09PSAnc3RyaW5nJyBcbiAgICAgICAgICAgICAgICA/IGltZyBcbiAgICAgICAgICAgICAgICA6IChpbWcuc3JjIHx8ICcnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGltZ1NyYyA9IHNyYy5zdGFydHNXaXRoKCdodHRwJykgXG4gICAgICAgICAgICAgICAgPyBzcmMgXG4gICAgICAgICAgICAgICAgOiBgJHtBUElfVVJMfSR7c3JjLnN0YXJ0c1dpdGgoJy8nKSA/ICcnIDogJy8nfSR7c3JjfWA7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNyYzogaW1nU3JjLFxuICAgICAgICAgICAgICAgIGFsdDogKHR5cGVvZiBpbWcgPT09ICdvYmplY3QnICYmIGltZy5hbHQpID8gaW1nLmFsdCA6IChibG9nLnRpdGxlIHx8ICdJbWFnZW4gZGVsIGJsb2cnKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChibG9nLmltYWdlKSB7XG4gICAgICAgICAgICAvLyBDb21wYXRpYmlsaWRhZCBjb24gZWwgZm9ybWF0byBhbnRlcmlvclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBibG9nLmltYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyBTaSBsYSBpbWFnZW4gZXMgdW5hIGNhZGVuYSwgY3JlYXIgdW4gb2JqZXRvIGRlIGltYWdlblxuICAgICAgICAgICAgICBjb25zdCBiYXNlVXJsID0gQVBJX1VSTDtcbiAgICAgICAgICAgICAgY29uc3QgaW1hZ2VTcmMgPSBibG9nLmltYWdlLnN0YXJ0c1dpdGgoJ2h0dHAnKSBcbiAgICAgICAgICAgICAgICA/IGJsb2cuaW1hZ2UgXG4gICAgICAgICAgICAgICAgOiBgJHtiYXNlVXJsfSR7YmxvZy5pbWFnZS5zdGFydHNXaXRoKCcvJykgPyAnJyA6ICcvJ30ke2Jsb2cuaW1hZ2V9YDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGJsb2dJbWFnZXMgPSBbeyBcbiAgICAgICAgICAgICAgICBzcmM6IGltYWdlU3JjLCBcbiAgICAgICAgICAgICAgICBhbHQ6IGJsb2cudGl0bGUgfHwgJ0ltYWdlbiBkZWwgYmxvZycgXG4gICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gU2kgeWEgZXMgdW4gb2JqZXRvLCBhc2VndXJhcnNlIGRlIHF1ZSBsYSBVUkwgc2VhIGFic29sdXRhXG4gICAgICAgICAgICAgIGNvbnN0IGJhc2VVcmwgPSBBUElfVVJMO1xuICAgICAgICAgICAgICBjb25zdCBzcmMgPSBibG9nLmltYWdlLnNyYyB8fCBibG9nLmltYWdlLnVybCB8fCAnJztcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGJsb2dJbWFnZXMgPSBbe1xuICAgICAgICAgICAgICAgIC4uLmJsb2cuaW1hZ2UsXG4gICAgICAgICAgICAgICAgc3JjOiBzcmMuc3RhcnRzV2l0aCgnaHR0cCcpIFxuICAgICAgICAgICAgICAgICAgPyBzcmMgXG4gICAgICAgICAgICAgICAgICA6IGAke2Jhc2VVcmx9JHtzcmMuc3RhcnRzV2l0aCgnLycpID8gJycgOiAnLyd9JHtzcmN9YFxuICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2kgbm8gaGF5IGltw6FnZW5lcywgdXNhciB1bmEgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgIGJsb2dJbWFnZXMgPSBbeyBcbiAgICAgICAgICAgICAgc3JjOiAnL2ltZy9kZWZhdWx0LWJsb2ctaW1hZ2UuanBnJywgXG4gICAgICAgICAgICAgIGFsdDogYmxvZy50aXRsZSB8fCAnSW1hZ2VuIGRlbCBibG9nJyBcbiAgICAgICAgICAgIH1dO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSBlbCBibG9nIHRlbmdhIHRvZG9zIGxvcyBjYW1wb3MgbmVjZXNhcmlvc1xuICAgICAgICAgIGFsbEJsb2dzLnB1c2goe1xuICAgICAgICAgICAgLi4uYmxvZyxcbiAgICAgICAgICAgIF9pZDogYmxvZy5faWQgfHwgYG1vbmdvLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSl9YCxcbiAgICAgICAgICAgIHRpdGxlOiBibG9nLnRpdGxlIHx8ICdTaW4gdMOtdHVsbycsXG4gICAgICAgICAgICBjb250ZW50OiBibG9nLmNvbnRlbnQgfHwgYmxvZy5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBibG9nLmRlc2NyaXB0aW9uIHx8IGJsb2cuZXhjZXJwdCB8fCAnJyxcbiAgICAgICAgICAgIGRhdGU6IGJsb2cuY3JlYXRlZEF0IHx8IGJsb2cuZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBkYXRlRm9ybWF0dGVkOiBibG9nLmRhdGVGb3JtYXR0ZWQgfHwgKGJsb2cuY3JlYXRlZEF0ID8gbmV3IERhdGUoYmxvZy5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnKSA6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycpKSxcbiAgICAgICAgICAgIGltYWdlczogYmxvZ0ltYWdlcywgLy8gR3VhcmRhciBlbCBhcnJheSBjb21wbGV0byBkZSBpbcOhZ2VuZXNcbiAgICAgICAgICAgIGltYWdlOiBibG9nSW1hZ2VzWzBdIHx8IHsgc3JjOiAnL2ltZy9kZWZhdWx0LWJsb2ctaW1hZ2UuanBnJywgYWx0OiAnSW1hZ2VuIGRlbCBibG9nJyB9LCAvLyBDb21wYXRpYmlsaWRhZCBjb24gZWwgZm9ybWF0byBhbnRlcmlvclxuICAgICAgICAgICAgc291cmNlOiAnbW9uZ29kYidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTGEgcmVzcHVlc3RhIG5vIGVzIEpTT04gdsOhbGlkbzpcIiwgYXdhaXQgbW9uZ29SZXNwb25zZS50ZXh0KCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBtb25nb1Jlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgb2J0ZW5lciBibG9ncyBkZSBNb25nb0RCOiAke21vbmdvUmVzcG9uc2Uuc3RhdHVzfWAsIGVycm9yVGV4dCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIG9idGVuZXIgYmxvZ3MgZGUgTW9uZ29EQjogJHttb25nb1Jlc3BvbnNlLnN0YXR1c31gLCBtb25nb1Jlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY29uIE1vbmdvREI6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZyhgVG90YWwgZGUgYmxvZ3Mgb2J0ZW5pZG9zOiAke2FsbEJsb2dzLmxlbmd0aH1gKTtcbiAgcmV0dXJuIGFsbEJsb2dzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQmxvZ1Bvc3QoaWQpIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfVVJMfS9ibG9nLyR7aWR9YCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gIH0pO1xuXG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCbG9nQnlJZChpZCkge1xuICB0cnkge1xuICAgIC8vIFZlcmlmaWNhciBzaSBlc3RhbW9zIGVuIHByb2R1Y2Npw7NuXG4gICAgY29uc3QgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbiAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSDCv0VzdGFtb3MgZW4gcHJvZHVjY2nDs24/ICR7aXNQcm9kdWN0aW9ufWApO1xuICAgIFxuICAgIC8vIEVuIHByb2R1Y2Npw7NuLCBhw7FhZGltb3MgdW4gcGVxdWXDsW8gcmV0cmFzbyBwYXJhIGFzZWd1cmFyIHF1ZSBsb3MgZGF0b3Mgc2UgY2FyZ3VlblxuICAgIGlmIChpc1Byb2R1Y3Rpb24pIHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmaWNhciBzaSBlcyB1biBJRCBkZSBNb25nb0RCIChmb3JtYXRvIE9iamVjdElkKVxuICAgIGNvbnN0IGlzTW9uZ29JZCA9IC9eWzAtOWEtZkEtRl17MjR9JC8udGVzdChpZCk7XG4gICAgXG4gICAgaWYgKGlzTW9uZ29JZCkge1xuICAgICAgLy8gRXMgdW4gSUQgZGUgTW9uZ29EQiwgb2J0ZW5lciBkZSBudWVzdHJhIEFQSVxuICAgICAgY29uc29sZS5sb2coYE9idGVuaWVuZG8gYmxvZyBkZSBNb25nb0RCIGNvbiBJRCAke2lkfWApO1xuICAgICAgXG4gICAgICAvLyBVc2FyIGxhIHJ1dGEgY29uIEFQSV9VUkwgeSB1biB0aW1lb3V0IG3DoXMgbGFyZ28gZW4gcHJvZHVjY2nDs25cbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgaXNQcm9kdWN0aW9uID8gMjAwMDAgOiAxMDAwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX1VSTH0vYmxvZy8ke2lkfWAsIHtcbiAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgICAgICAnUHJhZ21hJzogJ25vLWNhY2hlJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiUmVzcHVlc3RhIGRlIE1vbmdvREI6XCIsIHtcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIG9idGVuZXIgYmxvZyBkZSBNb25nb0RCOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBhbCBvYnRlbmVyIGJsb2c6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coXCJEYXRvcyBkZWwgYmxvZyBkZSBNb25nb0RCOlwiLCBkYXRhKTtcbiAgICAgIFxuICAgICAgLy8gUHJvY2VzYXIgbGFzIGltw6FnZW5lcyBzZWfDum4gZWwgZXNxdWVtYVxuICAgICAgbGV0IGJsb2dJbWFnZXMgPSBbXTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGJsb2cgdGllbmUgaW3DoWdlbmVzXG4gICAgICBpZiAoZGF0YS5pbWFnZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLmltYWdlcykgJiYgZGF0YS5pbWFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBVc2FyIGxhcyBpbcOhZ2VuZXMgZGVsIGVzcXVlbWFcbiAgICAgICAgYmxvZ0ltYWdlcyA9IGRhdGEuaW1hZ2VzLm1hcChpbWcgPT4ge1xuICAgICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxhIFVSTCBzZWEgYWJzb2x1dGFcbiAgICAgICAgICBjb25zdCBzcmMgPSB0eXBlb2YgaW1nID09PSAnc3RyaW5nJyBcbiAgICAgICAgICAgID8gaW1nIFxuICAgICAgICAgICAgOiAoaW1nLnNyYyB8fCAnJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgaW1nU3JjID0gc3JjLnN0YXJ0c1dpdGgoJ2h0dHAnKSBcbiAgICAgICAgICAgID8gc3JjIFxuICAgICAgICAgICAgOiBgJHtBUElfVVJMfSR7c3JjLnN0YXJ0c1dpdGgoJy8nKSA/ICcnIDogJy8nfSR7c3JjfWA7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNyYzogaW1nU3JjLFxuICAgICAgICAgICAgYWx0OiAodHlwZW9mIGltZyA9PT0gJ29iamVjdCcgJiYgaW1nLmFsdCkgPyBpbWcuYWx0IDogKGRhdGEudGl0bGUgfHwgJ0ltYWdlbiBkZWwgYmxvZycpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEuaW1hZ2UpIHtcbiAgICAgICAgLy8gQ29tcGF0aWJpbGlkYWQgY29uIGVsIGZvcm1hdG8gYW50ZXJpb3JcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmltYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8vIFNpIGxhIGltYWdlbiBlcyB1bmEgY2FkZW5hLCBjcmVhciB1biBvYmpldG8gZGUgaW1hZ2VuXG4gICAgICAgICAgY29uc3QgYmFzZVVybCA9IEFQSV9VUkw7XG4gICAgICAgICAgY29uc3QgaW1hZ2VTcmMgPSBkYXRhLmltYWdlLnN0YXJ0c1dpdGgoJ2h0dHAnKSBcbiAgICAgICAgICAgID8gZGF0YS5pbWFnZSBcbiAgICAgICAgICAgIDogYCR7YmFzZVVybH0ke2RhdGEuaW1hZ2Uuc3RhcnRzV2l0aCgnLycpID8gJycgOiAnLyd9JHtkYXRhLmltYWdlfWA7XG4gICAgICAgICAgXG4gICAgICAgICAgYmxvZ0ltYWdlcyA9IFt7IFxuICAgICAgICAgICAgc3JjOiBpbWFnZVNyYywgXG4gICAgICAgICAgICBhbHQ6IGRhdGEudGl0bGUgfHwgJ0ltYWdlbiBkZWwgYmxvZycgXG4gICAgICAgICAgfV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2kgeWEgZXMgdW4gb2JqZXRvLCBhc2VndXJhcnNlIGRlIHF1ZSBsYSBVUkwgc2VhIGFic29sdXRhXG4gICAgICAgICAgY29uc3QgYmFzZVVybCA9IEFQSV9VUkw7XG4gICAgICAgICAgY29uc3Qgc3JjID0gZGF0YS5pbWFnZS5zcmMgfHwgZGF0YS5pbWFnZS51cmwgfHwgJyc7XG4gICAgICAgICAgXG4gICAgICAgICAgYmxvZ0ltYWdlcyA9IFt7XG4gICAgICAgICAgICAuLi5kYXRhLmltYWdlLFxuICAgICAgICAgICAgc3JjOiBzcmMuc3RhcnRzV2l0aCgnaHR0cCcpIFxuICAgICAgICAgICAgICA/IHNyYyBcbiAgICAgICAgICAgICAgOiBgJHtiYXNlVXJsfSR7c3JjLnN0YXJ0c1dpdGgoJy8nKSA/ICcnIDogJy8nfSR7c3JjfWBcbiAgICAgICAgICB9XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgbm8gaGF5IGltw6FnZW5lcywgdXNhciB1bmEgcG9yIGRlZmVjdG9cbiAgICAgICAgYmxvZ0ltYWdlcyA9IFt7IFxuICAgICAgICAgIHNyYzogJy9pbWcvZGVmYXVsdC1ibG9nLWltYWdlLmpwZycsIFxuICAgICAgICAgIGFsdDogZGF0YS50aXRsZSB8fCAnSW1hZ2VuIGRlbCBibG9nJyBcbiAgICAgICAgfV07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGVsIGJsb2cgdGVuZ2EgdG9kb3MgbG9zIGNhbXBvcyBuZWNlc2FyaW9zXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBfaWQ6IGRhdGEuX2lkLFxuICAgICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnU2luIHTDrXR1bG8nLFxuICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQgfHwgZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgZGF0YS5leGNlcnB0IHx8ICcnLFxuICAgICAgICBkYXRlOiBkYXRhLmNyZWF0ZWRBdCB8fCBkYXRhLmRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBkYXRlRm9ybWF0dGVkOiBkYXRhLmRhdGVGb3JtYXR0ZWQgfHwgKGRhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygnZXMtRVMnKSA6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycpKSxcbiAgICAgICAgaW1hZ2VzOiBibG9nSW1hZ2VzLCAvLyBHdWFyZGFyIGVsIGFycmF5IGNvbXBsZXRvIGRlIGltw6FnZW5lc1xuICAgICAgICBpbWFnZTogYmxvZ0ltYWdlc1swXSB8fCB7IHNyYzogJy9pbWcvZGVmYXVsdC1ibG9nLWltYWdlLmpwZycsIGFsdDogJ0ltYWdlbiBkZWwgYmxvZycgfSwgLy8gQ29tcGF0aWJpbGlkYWQgY29uIGVsIGZvcm1hdG8gYW50ZXJpb3JcbiAgICAgICAgaW1hZ2VVcmw6IGJsb2dJbWFnZXNbMF0/LnNyYyB8fCAnL2ltZy9kZWZhdWx0LWJsb2ctaW1hZ2UuanBnJyxcbiAgICAgICAgc291cmNlOiAnbW9uZ29kYidcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEVzIHVuIElEIGRlIFdvcmRQcmVzcywgdXNhciBudWVzdHJvIHByb3h5XG4gICAgICBjb25zb2xlLmxvZyhgT2J0ZW5pZW5kbyBibG9nIGRlIFdvcmRQcmVzcyBjb24gSUQgJHtpZH1gKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvd29yZHByZXNzLXByb3h5P2VuZHBvaW50PXdwJnBhdGg9cG9zdHMvJHtpZH0mX2VtYmVkPXRydWVgKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJSZXNwdWVzdGEgZGUgV29yZFByZXNzOlwiLCB7XG4gICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBvYnRlbmVyIGJsb2cgZGUgV29yZFByZXNzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBhbCBvYnRlbmVyIGJsb2cgZGUgV29yZFByZXNzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiRGF0b3MgZGVsIGJsb2cgZGUgV29yZFByZXNzOlwiLCBkYXRhKTtcbiAgICAgIFxuICAgICAgLy8gUHJvY2VzYXIgbGEgaW1hZ2VuIGRlc3RhY2FkYVxuICAgICAgbGV0IGZlYXR1cmVkSW1hZ2UgPSBudWxsO1xuICAgICAgXG4gICAgICAvLyBJbnRlbnRhciBvYnRlbmVyIGxhIGltYWdlbiBkZXN0YWNhZGEgZGVzZGUgX2VtYmVkZGVkXG4gICAgICBpZiAoZGF0YS5fZW1iZWRkZWQgJiYgZGF0YS5fZW1iZWRkZWRbJ3dwOmZlYXR1cmVkbWVkaWEnXSAmJiBkYXRhLl9lbWJlZGRlZFsnd3A6ZmVhdHVyZWRtZWRpYSddWzBdKSB7XG4gICAgICAgIGNvbnN0IG1lZGlhID0gZGF0YS5fZW1iZWRkZWRbJ3dwOmZlYXR1cmVkbWVkaWEnXVswXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtZWRpYS5tZWRpYV9kZXRhaWxzICYmIG1lZGlhLm1lZGlhX2RldGFpbHMuc2l6ZXMpIHtcbiAgICAgICAgICAvLyBCdXNjYXIgbGEgbWVqb3IgaW1hZ2VuIGRpc3BvbmlibGVcbiAgICAgICAgICBjb25zdCBzaXplUHJpb3JpdHkgPSBbJ21lZGl1bV9sYXJnZScsICdtZWRpdW0nLCAnbGFyZ2UnLCAnZnVsbCddO1xuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3Qgc2l6ZSBvZiBzaXplUHJpb3JpdHkpIHtcbiAgICAgICAgICAgIGlmIChtZWRpYS5tZWRpYV9kZXRhaWxzLnNpemVzW3NpemVdKSB7XG4gICAgICAgICAgICAgIGZlYXR1cmVkSW1hZ2UgPSBtZWRpYS5tZWRpYV9kZXRhaWxzLnNpemVzW3NpemVdLnNvdXJjZV91cmw7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gc2UgZW5jb250csOzIG5pbmd1bmEgaW1hZ2VuIGVuIGxvcyB0YW1hw7FvcywgdXNhciBsYSBVUkwgZGUgb3JpZ2VuXG4gICAgICAgIGlmICghZmVhdHVyZWRJbWFnZSAmJiBtZWRpYS5zb3VyY2VfdXJsKSB7XG4gICAgICAgICAgZmVhdHVyZWRJbWFnZSA9IG1lZGlhLnNvdXJjZV91cmw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2kgbm8gaGF5IGltYWdlbiBkZXN0YWNhZGEsIGludGVudGFyIG9idGVuZXJsYSBkZSB1YWdiX2ZlYXR1cmVkX2ltYWdlX3NyY1xuICAgICAgaWYgKCFmZWF0dXJlZEltYWdlICYmIGRhdGEudWFnYl9mZWF0dXJlZF9pbWFnZV9zcmMpIHtcbiAgICAgICAgZmVhdHVyZWRJbWFnZSA9IGRhdGEudWFnYl9mZWF0dXJlZF9pbWFnZV9zcmMubWVkaXVtPy5bMF0gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnVhZ2JfZmVhdHVyZWRfaW1hZ2Vfc3JjLmZ1bGw/LlswXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2kgYcO6biBubyBoYXkgaW1hZ2VuLCB1c2FyIHVuYSBpbWFnZW4gcG9yIGRlZmVjdG9cbiAgICAgIGlmICghZmVhdHVyZWRJbWFnZSkge1xuICAgICAgICBmZWF0dXJlZEltYWdlID0gJy9pbWcvZGVmYXVsdC1ibG9nLWltYWdlLmpwZyc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWFyIGVsIG9iamV0byBkZSBibG9nIGNvbiBsYSBpbWFnZW4gcHJvY2VzYWRhXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBfaWQ6IGB3cC0ke2RhdGEuaWR9YCxcbiAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlPy5yZW5kZXJlZCB8fCBkYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQ/LnJlbmRlcmVkIHx8IGRhdGEuY29udGVudCB8fCAnJyxcbiAgICAgICAgZXhjZXJwdDogZGF0YS5leGNlcnB0Py5yZW5kZXJlZCB8fCBkYXRhLmV4Y2VycHQgfHwgJycsXG4gICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcbiAgICAgICAgZGF0ZUZvcm1hdHRlZDogbmV3IERhdGUoZGF0YS5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJyksXG4gICAgICAgIGltYWdlczogW3sgXG4gICAgICAgICAgc3JjOiBmZWF0dXJlZEltYWdlLCBcbiAgICAgICAgICBhbHQ6IGRhdGEudGl0bGU/LnJlbmRlcmVkIHx8IGRhdGEudGl0bGUgfHwgJ0ltYWdlbiBkZWwgYmxvZycgXG4gICAgICAgIH1dLFxuICAgICAgICBpbWFnZToge1xuICAgICAgICAgIHNyYzogZmVhdHVyZWRJbWFnZSxcbiAgICAgICAgICBhbHQ6IGRhdGEudGl0bGU/LnJlbmRlcmVkIHx8IGRhdGEudGl0bGUgfHwgJ0ltYWdlbiBkZWwgYmxvZydcbiAgICAgICAgfSxcbiAgICAgICAgaW1hZ2VVcmw6IGZlYXR1cmVkSW1hZ2UsXG4gICAgICAgIHNsdWc6IGRhdGEuc2x1ZyxcbiAgICAgICAgc291cmNlOiAnd29yZHByZXNzJ1xuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGdldEJsb2dCeUlkOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb3BlcnR5UG9zdHMoKSB7XG4gIGxldCB3cERhdGEgPSBbXTtcbiAgbGV0IG1vbmdvRGF0YSA9IFtdO1xuICBcbiAgLy8gMS4gSW50ZW50YXIgb2J0ZW5lciBwcm9waWVkYWRlcyBkZSBXb29Db21tZXJjZSBhIHRyYXbDqXMgZGVsIHByb3h5XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJPYnRlbmllbmRvIHByb3BpZWRhZGVzIGRlIFdvb0NvbW1lcmNlLi4uXCIpO1xuICAgIFxuICAgIC8vIFVzYXIgbnVlc3RybyBwcm94eSBkZSBOZXh0LmpzXG4gICAgY29uc3QgZmlyc3RQYWdlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS93b3JkcHJlc3MtcHJveHk/cGVyX3BhZ2U9MTAwYCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJSZXNwdWVzdGEgZGUgV29vQ29tbWVyY2U6XCIsIHtcbiAgICAgIHN0YXR1czogZmlyc3RQYWdlUmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogZmlyc3RQYWdlUmVzcG9uc2Uuc3RhdHVzVGV4dFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghZmlyc3RQYWdlUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIG9idGVuZXIgcHJvcGllZGFkZXMgZGUgV29vQ29tbWVyY2U6ICR7Zmlyc3RQYWdlUmVzcG9uc2Uuc3RhdHVzfSAke2ZpcnN0UGFnZVJlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGFsIG9idGVuZXIgcHJvcGllZGFkZXM6ICR7Zmlyc3RQYWdlUmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgICBcbiAgICAvLyBPYnRlbmVyIGVsIG7Dum1lcm8gdG90YWwgZGUgcMOhZ2luYXNcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gcGFyc2VJbnQoZmlyc3RQYWdlUmVzcG9uc2UuaGVhZGVycy5nZXQoJ1gtV1AtVG90YWxQYWdlcycpIHx8ICcxJyk7XG4gICAgY29uc29sZS5sb2coYFRvdGFsIGRlIHDDoWdpbmFzIGRlIHByb3BpZWRhZGVzOiAke3RvdGFsUGFnZXN9YCk7XG4gICAgXG4gICAgLy8gT2J0ZW5lciBsb3MgZGF0b3MgZGUgbGEgcHJpbWVyYSBww6FnaW5hXG4gICAgY29uc3QgZmlyc3RQYWdlRGF0YSA9IGF3YWl0IGZpcnN0UGFnZVJlc3BvbnNlLmpzb24oKTtcbiAgICBcbiAgICAvLyBNYXJjYXIgbGFzIHByb3BpZWRhZGVzIGNvbW8gcHJvdmVuaWVudGVzIGRlIFdvb0NvbW1lcmNlXG4gICAgY29uc3Qgd3BQcm9wZXJ0aWVzV2l0aFNvdXJjZSA9IGZpcnN0UGFnZURhdGEubWFwKHByb3BlcnR5ID0+ICh7XG4gICAgICAuLi5wcm9wZXJ0eSxcbiAgICAgIHNvdXJjZTogJ3dvb2NvbW1lcmNlJ1xuICAgIH0pKTtcbiAgICBcbiAgICB3cERhdGEgPSBbLi4ud3BQcm9wZXJ0aWVzV2l0aFNvdXJjZV07XG4gICAgXG4gICAgLy8gU2kgaGF5IG3DoXMgcMOhZ2luYXMsIG9idGVuZXJsYXMgZW4gcGFyYWxlbG9cbiAgICBpZiAodG90YWxQYWdlcyA+IDEpIHtcbiAgICAgIGNvbnN0IHBhZ2VQcm9taXNlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgcGFnZSA9IDI7IHBhZ2UgPD0gdG90YWxQYWdlczsgcGFnZSsrKSB7XG4gICAgICAgIHBhZ2VQcm9taXNlcy5wdXNoKFxuICAgICAgICAgIGZldGNoKGAvYXBpL3dvcmRwcmVzcy1wcm94eT9wYWdlPSR7cGFnZX0mcGVyX3BhZ2U9MTAwYClcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGVuIHDDoWdpbmEgJHtwYWdlfTogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihwYWdlRGF0YSA9PiB7XG4gICAgICAgICAgICAgIC8vIE1hcmNhciBsYXMgcHJvcGllZGFkZXMgY29tbyBwcm92ZW5pZW50ZXMgZGUgV29vQ29tbWVyY2VcbiAgICAgICAgICAgICAgcmV0dXJuIHBhZ2VEYXRhLm1hcChwcm9wZXJ0eSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnByb3BlcnR5LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3dvb2NvbW1lcmNlJ1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFc3BlcmFyIGEgcXVlIHRvZGFzIGxhcyBwcm9tZXNhcyBhZGljaW9uYWxlcyBzZSByZXN1ZWx2YW5cbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxQYWdlc0RhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChwYWdlUHJvbWlzZXMpO1xuICAgICAgXG4gICAgICAvLyBBw7FhZGlyIGxvcyBkYXRvcyBhZGljaW9uYWxlcyBhIHdwRGF0YVxuICAgICAgYWRkaXRpb25hbFBhZ2VzRGF0YS5mb3JFYWNoKHBhZ2VEYXRhID0+IHtcbiAgICAgICAgd3BEYXRhID0gWy4uLndwRGF0YSwgLi4ucGFnZURhdGFdO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBUb3RhbCBkZSBwcm9waWVkYWRlcyBkZSBXb29Db21tZXJjZSBvYnRlbmlkYXM6ICR7d3BEYXRhLmxlbmd0aH1gKTtcbiAgfSBjYXRjaCAod3BFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIHByb3BpZWRhZGVzIGRlIFdvb0NvbW1lcmNlOlwiLCB3cEVycm9yKTtcbiAgfVxuICBcbiAgLy8gMi4gSW50ZW50YXIgb2J0ZW5lciBwcm9waWVkYWRlcyBkZSBNb25nb0RCXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJPYnRlbmllbmRvIHByb3BpZWRhZGVzIGRlIE1vbmdvREIuLi5cIik7XG4gICAgXG4gICAgLy8gVXNhciBsYSBydXRhIGNvcnJlY3RhIGNvbiBBUElfVVJMXG4gICAgY29uc3QgbW9uZ29SZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L3Byb3BlcnR5YCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJSZXNwdWVzdGEgZGUgTW9uZ29EQjpcIiwge1xuICAgICAgc3RhdHVzOiBtb25nb1Jlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IG1vbmdvUmVzcG9uc2Uuc3RhdHVzVGV4dFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChtb25nb1Jlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IG1vbmdvUmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGF3YWl0IG1vbmdvUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlByb3BpZWRhZGVzIGRlIE1vbmdvREIgb2J0ZW5pZGFzOlwiLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc2FyIGxhcyBwcm9waWVkYWRlcyBwYXJhIGFzZWd1cmFyIHF1ZSB0ZW5nYW4gZWwgZm9ybWF0byBjb3JyZWN0b1xuICAgICAgICBtb25nb0RhdGEgPSBwcm9wZXJ0aWVzLm1hcChwcm9wZXJ0eSA9PiB7XG4gICAgICAgICAgLy8gUHJvY2VzYXIgbGFzIGltw6FnZW5lcyBwYXJhIGFzZWd1cmFyIFVSTHMgYWJzb2x1dGFzXG4gICAgICAgICAgbGV0IGltYWdlcyA9IFtdO1xuICAgICAgICAgIGlmIChwcm9wZXJ0eS5pbWFnZXMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BlcnR5LmltYWdlcykpIHtcbiAgICAgICAgICAgICAgaW1hZ2VzID0gcHJvcGVydHkuaW1hZ2VzLm1hcChpbWcgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW1nID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgbGEgaW1hZ2VuIGVzIHVuYSBjYWRlbmEsIHZlcmlmaWNhciBzaSBlcyB1bmEgVVJMIGFic29sdXRhXG4gICAgICAgICAgICAgICAgICByZXR1cm4gaW1nLnN0YXJ0c1dpdGgoJ2h0dHAnKSA/IGltZyA6IGAke0FQSV9VUkx9JHtpbWcuc3RhcnRzV2l0aCgnLycpID8gJycgOiAnLyd9JHtpbWd9YDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbWcgPT09ICdvYmplY3QnICYmIGltZy51cmwpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIG9iamV0byBjb24gVVJMXG4gICAgICAgICAgICAgICAgICByZXR1cm4gaW1nLnVybC5zdGFydHNXaXRoKCdodHRwJykgPyBpbWcudXJsIDogYCR7QVBJX1VSTH0ke2ltZy51cmwuc3RhcnRzV2l0aCgnLycpID8gJycgOiAnLyd9JHtpbWcudXJsfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpbWc7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvcGVydHkuaW1hZ2VzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyBTaSBpbWFnZXMgZXMgdW5hIGNhZGVuYVxuICAgICAgICAgICAgICBjb25zdCBpbWcgPSBwcm9wZXJ0eS5pbWFnZXM7XG4gICAgICAgICAgICAgIGltYWdlcyA9IFtpbWcuc3RhcnRzV2l0aCgnaHR0cCcpID8gaW1nIDogYCR7QVBJX1VSTH0ke2ltZy5zdGFydHNXaXRoKCcvJykgPyAnJyA6ICcvJ30ke2ltZ31gXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2kgbm8gaGF5IGltw6FnZW5lcywgdXNhciB1bmEgaW1hZ2VuIHBvciBkZWZlY3RvXG4gICAgICAgICAgaWYgKGltYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGltYWdlcyA9IFsnL2ltZy9kZWZhdWx0LXByb3BlcnR5LWltYWdlLmpwZyddO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucHJvcGVydHksXG4gICAgICAgICAgICBfaWQ6IHByb3BlcnR5Ll9pZCxcbiAgICAgICAgICAgIHRpdGxlOiBwcm9wZXJ0eS50aXRsZSB8fCBwcm9wZXJ0eS5uYW1lIHx8ICdQcm9waWVkYWQgc2luIHTDrXR1bG8nLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHByb3BlcnR5LmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgcHJpY2U6IHByb3BlcnR5LnByaWNlIHx8ICcwJywgLy8gTWFudGVuZXIgY29tbyBzdHJpbmdcbiAgICAgICAgICAgIGxvY2F0aW9uOiBwcm9wZXJ0eS5sb2NhdGlvbiB8fCAnTWFkcmlkJyxcbiAgICAgICAgICAgIGJlZHJvb21zOiBwcm9wZXJ0eS5iZWRyb29tcyB8fCAwLFxuICAgICAgICAgICAgYmF0aHJvb21zOiBwcm9wZXJ0eS5iYXRocm9vbXMgfHwgMCxcbiAgICAgICAgICAgIHNpemU6IHByb3BlcnR5Lm0yIHx8IHByb3BlcnR5LmFyZWEgfHwgcHJvcGVydHkuc2l6ZSB8fCAwLFxuICAgICAgICAgICAgbGl2aW5nQXJlYTogcHJvcGVydHkubTIgfHwgcHJvcGVydHkuYXJlYSB8fCBwcm9wZXJ0eS5zaXplIHx8IDAsXG4gICAgICAgICAgICBpbWFnZXM6IGltYWdlcyxcbiAgICAgICAgICAgIHNvdXJjZTogJ21vbmdvZGInXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgVG90YWwgZGUgcHJvcGllZGFkZXMgZGUgTW9uZ29EQiBvYnRlbmlkYXM6ICR7bW9uZ29EYXRhLmxlbmd0aH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJMYSByZXNwdWVzdGEgbm8gZXMgSlNPTiB2w6FsaWRvOlwiLCBhd2FpdCBtb25nb1Jlc3BvbnNlLnRleHQoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IG1vbmdvUmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBvYnRlbmVyIHByb3BpZWRhZGVzIGRlIE1vbmdvREI6ICR7bW9uZ29SZXNwb25zZS5zdGF0dXN9YCwgZXJyb3JUZXh0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgb2J0ZW5lciBwcm9waWVkYWRlcyBkZSBNb25nb0RCOiAke21vbmdvUmVzcG9uc2Uuc3RhdHVzfWAsIG1vbmdvUmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChtb25nb0Vycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgcHJvcGllZGFkZXMgZGUgTW9uZ29EQjpcIiwgbW9uZ29FcnJvcik7XG4gIH1cbiAgXG4gIC8vIENvbWJpbmFyIGxvcyByZXN1bHRhZG9zIGRlIGFtYmFzIGZ1ZW50ZXNcbiAgY29uc3QgY29tYmluZWREYXRhID0gWy4uLm1vbmdvRGF0YSwgLi4ud3BEYXRhXTtcbiAgXG4gIGNvbnNvbGUubG9nKGBUb3RhbCBkZSBwcm9waWVkYWRlcyBjb21iaW5hZGFzOiAke2NvbWJpbmVkRGF0YS5sZW5ndGh9YCk7XG4gIHJldHVybiBjb21iaW5lZERhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9wZXJ0eUJ5SWQoaWQpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBJbmljaWFuZG8gZ2V0UHJvcGVydHlCeUlkIHBhcmEgSUQ6ICR7aWR9YCk7XG4gICAgXG4gICAgLy8gVmVyaWZpY2FyIHNpIGVzdGFtb3MgZW4gcHJvZHVjY2nDs25cbiAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuICAgIGNvbnNvbGUubG9nKGBbREVCVUddIMK/RXN0YW1vcyBlbiBwcm9kdWNjacOzbj8gJHtpc1Byb2R1Y3Rpb259YCk7XG4gICAgXG4gICAgLy8gVmVyaWZpY2FyIHNpIGVzIHVuIElEIGRlIE1vbmdvREIgKGZvcm1hdG8gT2JqZWN0SWQpXG4gICAgY29uc3QgaXNNb25nb0lkID0gL15bMC05YS1mQS1GXXsyNH0kLy50ZXN0KGlkKTtcbiAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSDCv0VzIElEIGRlIE1vbmdvREI/ICR7aXNNb25nb0lkfWApO1xuICAgIFxuICAgIC8vIEVuIHByb2R1Y2Npw7NuLCBhw7FhZGltb3MgdW4gcGVxdWXDsW8gcmV0cmFzbyBwYXJhIGFzZWd1cmFyIHF1ZSBsb3MgZGF0b3Mgc2UgY2FyZ3VlblxuICAgIGlmIChpc1Byb2R1Y3Rpb24pIHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIHVuIGNvbnRyb2xhZG9yIGRlIGFib3J0byBwYXJhIGVzdGFibGVjZXIgdW4gdGltZW91dCBtw6FzIGxhcmdvIGVuIHByb2R1Y2Npw7NuXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIFRJTUVPVVQgYWxjYW56YWRvIHBhcmEgbGEgcHJvcGllZGFkIGNvbiBJRDogJHtpZH1gKTtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9LCBpc1Byb2R1Y3Rpb24gPyAyMDAwMCA6IDEwMDAwKTsgLy8gMjAgc2VndW5kb3MgZW4gcHJvZHVjY2nDs24sIDEwIGVuIGRlc2Fycm9sbG9cbiAgICBcbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgXG4gICAgaWYgKGlzTW9uZ29JZCkge1xuICAgICAgLy8gRXMgdW4gSUQgZGUgTW9uZ29EQiwgb2J0ZW5lciBkZSBudWVzdHJhIEFQSVxuICAgICAgY29uc29sZS5sb2coYFtERUJVR10gT2J0ZW5pZW5kbyBwcm9waWVkYWQgZGUgTW9uZ29EQiBjb24gSUQgJHtpZH1gKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNhciBsYSBVUkwgYmFzZSBzZWfDum4gZWwgZW50b3Jub1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgXG4gICAgICAgICAgPyBBUElfVVJMIC8vIEVuIGVsIHNlcnZpZG9yXG4gICAgICAgICAgOiAnJzsgLy8gRW4gZWwgY2xpZW50ZSAoVVJMIHJlbGF0aXZhKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdXJsID0gYCR7YmFzZVVybH0vcHJvcGVydHkvJHtpZH1gO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBVUkwgZGUgcGV0aWNpw7NuIE1vbmdvREI6ICR7dXJsfWApO1xuICAgICAgICBcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlJyxcbiAgICAgICAgICAgICdQcmFnbWEnOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgJ0V4cGlyZXMnOiAnMCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gUmVzcHVlc3RhIE1vbmdvREIgcmVjaWJpZGE6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHXSBFcnJvciBlbiBmZXRjaCBNb25nb0RCOmAsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW0RFQlVHXSBMYSBzb2xpY2l0dWQgYSBNb25nb0RCIHNlIGNhbmNlbMOzIHBvciB0aW1lb3V0XCIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRpZW1wbyBkZSBlc3BlcmEgYWdvdGFkbyBhbCBvYnRlbmVyIGxhIHByb3BpZWRhZC4gUG9yIGZhdm9yLCBpbnTDqW50YWxvIGRlIG51ZXZvLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEVzIHVuIElEIGRlIFdvb0NvbW1lcmNlLCB1c2FyIG51ZXN0cm8gcHJveHlcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIE9idGVuaWVuZG8gcHJvcGllZGFkIGRlIFdvb0NvbW1lcmNlIGNvbiBJRCAke2lkfWApO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBVc2FyIGxhIFVSTCBiYXNlIHNlZ8O6biBlbCBlbnRvcm5vXG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyBcbiAgICAgICAgICA/IGAke0FQSV9VUkx9L2FwaS93b3JkcHJlc3MtcHJveHlgIC8vIEVuIGVsIHNlcnZpZG9yXG4gICAgICAgICAgOiAnL2FwaS93b3JkcHJlc3MtcHJveHknOyAvLyBFbiBlbCBjbGllbnRlXG4gICAgICAgIFxuICAgICAgICBjb25zdCB1cmwgPSBgJHtiYXNlVXJsfT9wYXRoPXByb2R1Y3RzLyR7aWR9YDtcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gVVJMIGRlIHBldGljacOzbiBXb29Db21tZXJjZTogJHt1cmx9YCk7XG4gICAgICAgIFxuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnLFxuICAgICAgICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsXG4gICAgICAgICAgICAnRXhwaXJlcyc6ICcwJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBSZXNwdWVzdGEgV29vQ29tbWVyY2UgcmVjaWJpZGE6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHXSBFcnJvciBlbiBmZXRjaCBXb29Db21tZXJjZTpgLCBlcnJvcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltERUJVR10gTGEgc29saWNpdHVkIGEgV29vQ29tbWVyY2Ugc2UgY2FuY2Vsw7MgcG9yIHRpbWVvdXRcIik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGllbXBvIGRlIGVzcGVyYSBhZ290YWRvIGFsIG9idGVuZXIgbGEgcHJvcGllZGFkLiBQb3IgZmF2b3IsIGludMOpbnRhbG8gZGUgbnVldm8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTGltcGlhciBlbCB0aW1lb3V0XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgXG4gICAgLy8gVmVyaWZpY2FyIHNpIGxhIHJlc3B1ZXN0YSBlcyBleGl0b3NhXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHXSBFcnJvciBlbiByZXNwdWVzdGE6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGFsIG9idGVuZXIgcHJvcGllZGFkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBcbiAgICAvLyBPYnRlbmVyIGxvcyBkYXRvcyBkZSBsYSByZXNwdWVzdGFcbiAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBJbnRlbnRhbmRvIG9idGVuZXIgSlNPTiBkZSBsYSByZXNwdWVzdGFgKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKGBbREVCVUddIEpTT04gb2J0ZW5pZG8gY29ycmVjdGFtZW50ZSBwYXJhIElEICR7aWR9YCk7XG4gICAgXG4gICAgLy8gUHJvY2VzYXIgbG9zIGRhdG9zIHNlZ8O6biBlbCB0aXBvIGRlIHByb3BpZWRhZFxuICAgIGlmIChpc01vbmdvSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUddIFByb2Nlc2FuZG8gZGF0b3MgZGUgTW9uZ29EQmApO1xuICAgICAgLy8gUHJvY2VzYXIgbGFzIGltw6FnZW5lcyBwYXJhIGFzZWd1cmFyIFVSTHMgYWJzb2x1dGFzXG4gICAgICBsZXQgaW1hZ2VzID0gW107XG4gICAgICBpZiAoZGF0YS5pbWFnZXMpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YS5pbWFnZXMpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gUHJvY2VzYW5kbyBhcnJheSBkZSBpbcOhZ2VuZXM6ICR7ZGF0YS5pbWFnZXMubGVuZ3RofSBpbcOhZ2VuZXNgKTtcbiAgICAgICAgICBpbWFnZXMgPSBkYXRhLmltYWdlcy5tYXAoaW1nID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW1nID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyBTaSBsYSBpbWFnZW4gZXMgdW5hIGNhZGVuYSwgdmVyaWZpY2FyIHNpIGVzIHVuYSBVUkwgYWJzb2x1dGFcbiAgICAgICAgICAgICAgcmV0dXJuIGltZy5zdGFydHNXaXRoKCdodHRwJykgPyBpbWcgOiBgJHtBUElfVVJMfSR7aW1nLnN0YXJ0c1dpdGgoJy8nKSA/ICcnIDogJy8nfSR7aW1nfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbWcgPT09ICdvYmplY3QnICYmIGltZy5zcmMpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gb2JqZXRvIGNvbiBzcmMsIGFzZWd1cmFyIHF1ZSBzZWEgdW5hIFVSTCBhYnNvbHV0YVxuICAgICAgICAgICAgICBjb25zdCBzcmMgPSBpbWcuc3JjLnN0YXJ0c1dpdGgoJ2h0dHAnKSA/IGltZy5zcmMgOiBgJHtBUElfVVJMfSR7aW1nLnNyYy5zdGFydHNXaXRoKCcvJykgPyAnJyA6ICcvJ30ke2ltZy5zcmN9YDtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pbWcsXG4gICAgICAgICAgICAgICAgc3JjXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW1nO1xuICAgICAgICAgIH0pLmZpbHRlcihpbWcgPT4gaW1nKTsgLy8gRmlsdHJhciB2YWxvcmVzIG51bG9zIG8gaW5kZWZpbmlkb3NcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YS5pbWFnZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgLy8gU2kgaW1hZ2VzIGVzIHVuYSBjYWRlbmFcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBQcm9jZXNhbmRvIGltYWdlbiDDum5pY2EgKHN0cmluZylgKTtcbiAgICAgICAgICBjb25zdCBpbWcgPSBkYXRhLmltYWdlcztcbiAgICAgICAgICBpbWFnZXMgPSBbaW1nLnN0YXJ0c1dpdGgoJ2h0dHAnKSA/IGltZyA6IGAke0FQSV9VUkx9JHtpbWcuc3RhcnRzV2l0aCgnLycpID8gJycgOiAnLyd9JHtpbWd9YF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2kgbm8gaGF5IGltw6FnZW5lcywgdXNhciB1bmEgaW1hZ2VuIHBvciBkZWZlY3RvXG4gICAgICBpZiAoaW1hZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBObyBzZSBlbmNvbnRyYXJvbiBpbcOhZ2VuZXMsIHVzYW5kbyBpbWFnZW4gcG9yIGRlZmVjdG9gKTtcbiAgICAgICAgaW1hZ2VzID0gWycvaW1nL2RlZmF1bHQtcHJvcGVydHktaW1hZ2UuanBnJ107XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIHRvZG9zIGxvcyBjYW1wb3MgY3LDrXRpY29zIGVzdMOpbiBkZWZpbmlkb3NcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHsgXG4gICAgICAgIC4uLmRhdGEsIFxuICAgICAgICBfaWQ6IGRhdGEuX2lkLFxuICAgICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCBkYXRhLm5hbWUgfHwgJ1Byb3BpZWRhZCBzaW4gdMOtdHVsbycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBwcmljZTogZGF0YS5wcmljZSB8fCAnMCcsIC8vIE1hbnRlbmVyIGNvbW8gc3RyaW5nXG4gICAgICAgIGxvY2F0aW9uOiBkYXRhLmxvY2F0aW9uIHx8ICdNYWRyaWQnLFxuICAgICAgICBiZWRyb29tczogZGF0YS5iZWRyb29tcyB8fCBkYXRhLnJvb21zIHx8IDAsXG4gICAgICAgIGJhdGhyb29tczogZGF0YS5iYXRocm9vbXMgfHwgZGF0YS53YyB8fCAwLFxuICAgICAgICBzaXplOiBkYXRhLmFyZWEgfHwgZGF0YS5tMiB8fCAwLFxuICAgICAgICBpbWFnZXM6IGltYWdlcyxcbiAgICAgICAgc291cmNlOiAnbW9uZ29kYicgXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBEYXRvcyBkZSBNb25nb0RCIHByb2Nlc2Fkb3MgY29ycmVjdGFtZW50ZWApO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYFtERUJVR10gUHJvY2VzYW5kbyBkYXRvcyBkZSBXb29Db21tZXJjZWApO1xuICAgICAgLy8gUHJvY2VzYXIgbGFzIGltw6FnZW5lcyBwYXJhIGFzZWd1cmFyIHF1ZSB0ZW5lbW9zIFVSTHMgdsOhbGlkYXNcbiAgICAgIGxldCBpbWFnZXMgPSBbXTtcbiAgICAgIFxuICAgICAgLy8gSW50ZW50YXIgb2J0ZW5lciBpbcOhZ2VuZXMgZGUgZGlmZXJlbnRlcyBmdWVudGVzIGVuIFdvb0NvbW1lcmNlXG4gICAgICBpZiAoZGF0YS5pbWFnZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLmltYWdlcykgJiYgZGF0YS5pbWFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBQcm9jZXNhbmRvIGFycmF5IGRlIGltw6FnZW5lcyBXb29Db21tZXJjZTogJHtkYXRhLmltYWdlcy5sZW5ndGh9IGltw6FnZW5lc2ApO1xuICAgICAgICBpbWFnZXMgPSBkYXRhLmltYWdlcy5tYXAoaW1nID0+IGltZy5zcmMgfHwgaW1nKS5maWx0ZXIoaW1nID0+IGltZyk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEuaW1hZ2UgJiYgZGF0YS5pbWFnZS5zcmMpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gUHJvY2VzYW5kbyBpbWFnZW4gw7puaWNhIFdvb0NvbW1lcmNlYCk7XG4gICAgICAgIGltYWdlcyA9IFtkYXRhLmltYWdlLnNyY107XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNpIG5vIGhheSBpbcOhZ2VuZXMsIHVzYXIgdW5hIGltYWdlbiBwb3IgZGVmZWN0b1xuICAgICAgaWYgKGltYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVR10gTm8gc2UgZW5jb250cmFyb24gaW3DoWdlbmVzIFdvb0NvbW1lcmNlLCB1c2FuZG8gaW1hZ2VuIHBvciBkZWZlY3RvYCk7XG4gICAgICAgIGltYWdlcyA9IFsnL2ltZy9kZWZhdWx0LXByb3BlcnR5LWltYWdlLmpwZyddO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSB0b2RvcyBsb3MgY2FtcG9zIGNyw610aWNvcyBlc3TDqW4gZGVmaW5pZG9zXG4gICAgICBjb25zdCByZXN1bHQgPSB7IFxuICAgICAgICAuLi5kYXRhLCBcbiAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgIHRpdGxlOiBkYXRhLm5hbWUgfHwgJ1Byb3BpZWRhZCBzaW4gdMOtdHVsbycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBwcmljZTogZGF0YS5wcmljZSB8fCAnMCcsIC8vIE1hbnRlbmVyIGNvbW8gc3RyaW5nXG4gICAgICAgIGxvY2F0aW9uOiBkYXRhLmFkZHJlc3MgfHwgJ01hZHJpZCcsXG4gICAgICAgIGJlZHJvb21zOiBkYXRhLm1ldGFfZGF0YT8uZmluZChtID0+IG0ua2V5ID09PSAnYmVkcm9vbXMnKT8udmFsdWUgfHwgMCxcbiAgICAgICAgYmF0aHJvb21zOiBkYXRhLm1ldGFfZGF0YT8uZmluZChtID0+IG0ua2V5ID09PSAnYmF0aHJvb21zJyk/LnZhbHVlIHx8IDAsXG4gICAgICAgIHNpemU6IGRhdGEubWV0YV9kYXRhPy5maW5kKG0gPT4gbS5rZXkgPT09ICdhcmVhJyk/LnZhbHVlIHx8IDAsXG4gICAgICAgIGltYWdlczogaW1hZ2VzLFxuICAgICAgICBzb3VyY2U6ICd3b29jb21tZXJjZScgXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBEYXRvcyBkZSBXb29Db21tZXJjZSBwcm9jZXNhZG9zIGNvcnJlY3RhbWVudGVgKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbREVCVUddIEVycm9yIGVuIGdldFByb3BlcnR5QnlJZDpcIiwgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbREVCVUddIFN0YWNrIHRyYWNlOlwiLCBlcnJvci5zdGFjayk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gRnVuY2nDs24gcGFyYSBlbnZpYXIgZWwgZm9ybXVsYXJpbyBkZSBjb250YWN0b1xuZXhwb3J0IGNvbnN0IHNlbmRFbWFpbCA9IGFzeW5jIChkYXRhKSA9PiB7XG4gIHRyeSB7XG4gICBcbiAgICBcbiAgICAvLyBSZWZvcm1hdGVhciBsb3MgZGF0b3MgcGFyYSBhZGFwdGFyc2UgYWwgZm9ybWF0byBlc3BlcmFkbyBwb3IgbGEgQVBJXG4gICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IHtcbiAgICAgIG5vbWJyZTogZGF0YS5uYW1lLFxuICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICBwcmVmaXg6IGRhdGEucHJlZml4IHx8ICcrMzQnLFxuICAgICAgdGVsZWZvbm86IGRhdGEucGhvbmUgfHwgJycsXG4gICAgICBhc3VudG86IGRhdGEubWVzc2FnZSAvLyBFbCBtZW5zYWplIGxvIGVudmlhbW9zIGNvbW8gYXN1bnRvIHF1ZSBlcyBsbyBxdWUgZXNwZXJhIGVsIGJhY2tlbmRcbiAgICB9O1xuICAgIFxuICAgIC8vIFZhbGlkYWNpw7NuIGxvY2FsIGFjdHVhbGl6YWRhIHBhcmEgY2FtcG9zXG4gICAgaWYgKCFmb3JtYXR0ZWREYXRhLm5vbWJyZSB8fCAhZm9ybWF0dGVkRGF0YS5lbWFpbCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhbHRhbiBkYXRvcyBvYmxpZ2F0b3Jpb3M6XCIsIGZvcm1hdHRlZERhdGEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWx0YW4gZGF0b3MgcmVxdWVyaWRvczogbm9tYnJlIHkgZW1haWwgc29uIG9ibGlnYXRvcmlvcycsXG4gICAgICAgIGVycm9yOiAnVmFsaWRhY2nDs24gbG9jYWwnLFxuICAgICAgICBvazogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIERlZmluaXIgZWwgZW5kcG9pbnQgcGFyYSBlbCBjb250YWN0b1xuICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vYXBpL2NvbnRhY3RgO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGZvcm1hdHRlZERhdGEpLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIENhcHR1cmFyIGxhIHJlc3B1ZXN0YSBjb21vIHRleHRvIHBhcmEgZGVidWdnaW5nXG4gICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIFxuICAgIC8vIEludGVudGFyIHBhcnNlYXIgbGEgcmVzcHVlc3RhIGNvbW8gSlNPTlxuICAgIGxldCByZXNwb25zZURhdGE7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUmVzcHVlc3RhIG5vIGVzIEpTT04gdsOhbGlkb1wiKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRm9ybWF0byBkZSByZXNwdWVzdGEgaW52w6FsaWRvJyxcbiAgICAgICAgZXJyb3I6ICdFbCBzZXJ2aWRvciBubyByZXNwb25kacOzIGNvbiB1biBmb3JtYXRvIHbDoWxpZG8nLFxuICAgICAgICBvazogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEFncmVnYXIgbGEgcHJvcGllZGFkIG9rIHBhcmEgY29tcGF0aWJpbGlkYWQgY29uIGVsIGPDs2RpZ28gZXhpc3RlbnRlXG4gICAgcmVzcG9uc2VEYXRhLm9rID0gcmVzcG9uc2Uub2s7XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZW52aWFyIGZvcm11bGFyaW86XCIsIGVycm9yKTtcbiAgICAvLyBEZXZvbHZlciB1biBvYmpldG8gY29uIGZvcm1hdG8gc2ltaWxhciBhbCBkZSByZXNwdWVzdGEgZXhpdG9zYVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBkZSBjb25leGnDs24nLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBvazogZmFsc2VcbiAgICB9O1xuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc2VuZFByb3BlcnR5RW1haWwgPSBhc3luYyAoZGF0YSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwczovL2dvemEtbWFkcmlkLm9ucmVuZGVyLmNvbSc7XG4gICAgXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ29mZmVyJykge1xuICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtBUElfVVJMfS9hcGkvcHJvcGVydHktb2ZmZXIvY3JlYXRlYDtcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhciBkYXRvcyByZXF1ZXJpZG9zIHBhcmEgbGEgb2ZlcnRhXG4gICAgICBpZiAoIWRhdGEub2ZmZXJBbW91bnQgfHwgIWRhdGEuZW1haWwgfHwgIWRhdGEubmFtZSB8fCAhZGF0YS5waG9uZSB8fCAhZGF0YS5wcm9wZXJ0eUlkIHx8ICFkYXRhLnByb3BlcnR5VGl0bGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFsdGFuIGRhdG9zIHJlcXVlcmlkb3MgcGFyYSBsYSBvZmVydGE6JywgZGF0YSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhbHRhbiBkYXRvcyByZXF1ZXJpZG9zIHBhcmEgbGEgb2ZlcnRhJ1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBNYXBlYXIgbG9zIGNhbXBvcyBjb3JyZWN0YW1lbnRlIHBhcmEgbGEgb2ZlcnRhXG4gICAgICBjb25zdCBvZmZlckRhdGEgPSB7XG4gICAgICAgIG9mZmVyUHJpY2U6IGRhdGEub2ZmZXJBbW91bnQsXG4gICAgICAgIG9mZmVyUGVyY2VudGFnZTogZGF0YS5vZmZlckxhYmVsIHx8ICcnLFxuICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZSxcbiAgICAgICAgcHJvcGVydHk6IGRhdGEucHJvcGVydHlJZCxcbiAgICAgICAgcHJvcGVydHlBZGRyZXNzOiBkYXRhLnByb3BlcnR5VGl0bGUsXG4gICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSB8fCAnJ1xuICAgICAgfTtcbiAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdFbnZpYW5kbyBkYXRvcyBkZSBvZmVydGE6Jywgb2ZmZXJEYXRhKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvZmZlckRhdGEpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiByZXNwdWVzdGEgZGUgb2ZlcnRhOicsIHJlc3BvbnNlRGF0YSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSB8fCAnRXJyb3IgZW4gbGEgcmVzcHVlc3RhIGRlbCBzZXJ2aWRvcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzcG9uc2VEYXRhO1xuICAgICAgXG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd2aXNpdCcpIHtcbiAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vYXBpL3Byb3BlcnR5LXZpc2l0L2NyZWF0ZWA7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXIgZGF0b3MgcmVxdWVyaWRvcyBwYXJhIGxhIHZpc2l0YVxuICAgICAgaWYgKCFkYXRhLnZpc2l0RGF0ZSB8fCAhZGF0YS52aXNpdFRpbWUgfHwgIWRhdGEuZW1haWwgfHwgIWRhdGEubmFtZSB8fCAhZGF0YS5waG9uZSB8fCAhZGF0YS5wcm9wZXJ0eUlkIHx8ICFkYXRhLnByb3BlcnR5VGl0bGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFsdGFuIGRhdG9zIHJlcXVlcmlkb3MgcGFyYSBsYSB2aXNpdGE6JywgZGF0YSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhbHRhbiBkYXRvcyByZXF1ZXJpZG9zIHBhcmEgbGEgdmlzaXRhJ1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBNYXBlYXIgbG9zIGNhbXBvcyBjb3JyZWN0YW1lbnRlIHBhcmEgbGEgdmlzaXRhXG4gICAgICBjb25zdCB2aXNpdERhdGEgPSB7XG4gICAgICAgIGRhdGU6IGRhdGEudmlzaXREYXRlLFxuICAgICAgICB0aW1lOiBkYXRhLnZpc2l0VGltZSxcbiAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgcGhvbmU6IGRhdGEucGhvbmUsXG4gICAgICAgIHByb3BlcnR5OiBkYXRhLnByb3BlcnR5SWQsXG4gICAgICAgIHByb3BlcnR5QWRkcmVzczogZGF0YS5wcm9wZXJ0eVRpdGxlLFxuICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgfHwgJydcbiAgICAgIH07XG5cbiAgICAgIGNvbnNvbGUubG9nKCdFbnZpYW5kbyBkYXRvcyBkZSB2aXNpdGE6JywgdmlzaXREYXRhKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh2aXNpdERhdGEpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiByZXNwdWVzdGEgZGUgdmlzaXRhOicsIHJlc3BvbnNlRGF0YSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSB8fCAnRXJyb3IgZW4gbGEgcmVzcHVlc3RhIGRlbCBzZXJ2aWRvcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzcG9uc2VEYXRhO1xuICAgIH1cbiAgICBcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpcG8gZGUgc29saWNpdHVkIG5vIHbDoWxpZG8nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlbnZpYXIgZW1haWw6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGFsIHByb2Nlc2FyIGxhIHNvbGljaXR1ZCcsXG4gICAgfTtcbiAgfVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgdXJsIH0gPSByZXEucXVlcnk7XG4gIFxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVVJMIG5vIHByb3BvcmNpb25hZGEnIH0pO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGltYWdlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGNvbnN0IGltYWdlQnVmZmVyID0gYXdhaXQgaW1hZ2VSZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgIFxuICAgIC8vIE9idGVuZXIgZWwgdGlwbyBkZSBjb250ZW5pZG9cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGltYWdlUmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgIFxuICAgIC8vIENvbmZpZ3VyYXIgY2FiZWNlcmFzIGRlIHJlc3B1ZXN0YVxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIGNvbnRlbnRUeXBlKTtcbiAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3B1YmxpYywgbWF4LWFnZT04NjQwMCcpOyAvLyBDYWNoZWFyIHBvciAyNCBob3Jhc1xuICAgIFxuICAgIC8vIEVudmlhciBsYSBpbWFnZW5cbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChCdWZmZXIuZnJvbShpbWFnZUJ1ZmZlcikpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIG9idGVuZXIgaW1hZ2VuOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyb3IgYWwgb2J0ZW5lciBsYSBpbWFnZW4nIH0pO1xuICB9XG59ICJdLCJuYW1lcyI6WyJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJXQ19DT05TVU1FUl9LRVkiLCJORVhUX1BVQkxJQ19ORVhUX1BVQkxJQ19XT09fQ09NTUVSQ0VfS0VZIiwiV0NfQ09OU1VNRVJfU0VDUkVUIiwiTkVYVF9QVUJMSUNfV09PX0NPTU1FUkNFX1NFQ1JFVCIsImhhbmRsZUFwaUVycm9yIiwiZXJyb3IiLCJmdW5jdGlvbk5hbWUiLCJjb25zb2xlIiwicmVzcG9uc2UiLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJyZXF1ZXN0IiwibWVzc2FnZSIsImdldENvdW50cnlQcmVmaXgiLCJsb2ciLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFib3J0IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJjb250ZW50VHlwZSIsImdldCIsImluY2x1ZGVzIiwianNvbiIsImdldERlZmF1bHRDb3VudHJ5UHJlZml4ZXMiLCJnZXRCbG9nUG9zdHMiLCJhbGxCbG9ncyIsIndwUmVzcG9uc2UiLCJ3cEJsb2dzIiwibGVuZ3RoIiwiZm9yRWFjaCIsImJsb2ciLCJmZWF0dXJlZEltYWdlIiwiX2VtYmVkZGVkIiwibWVkaWEiLCJtZWRpYV9kZXRhaWxzIiwic2l6ZXMiLCJzaXplUHJpb3JpdHkiLCJzaXplIiwic291cmNlX3VybCIsInVhZ2JfZmVhdHVyZWRfaW1hZ2Vfc3JjIiwibWVkaXVtIiwiZnVsbCIsInB1c2giLCJpbWFnZSIsInNyYyIsImFsdCIsInRpdGxlIiwicmVuZGVyZWQiLCJjb250ZW50IiwiZXhjZXJwdCIsInNvdXJjZSIsImVycm9yRGF0YSIsIm1vbmdvUmVzcG9uc2UiLCJtb25nb0Jsb2dzIiwiYmxvZ0ltYWdlcyIsImltYWdlcyIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImltZyIsImltZ1NyYyIsInN0YXJ0c1dpdGgiLCJiYXNlVXJsIiwiaW1hZ2VTcmMiLCJ1cmwiLCJfaWQiLCJNYXRoIiwiRGF0ZSIsIm5vdyIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwiY3JlYXRlZEF0IiwidG9JU09TdHJpbmciLCJkYXRlRm9ybWF0dGVkIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidGV4dCIsImVycm9yVGV4dCIsImUiLCJkZWxldGVCbG9nUG9zdCIsImlkIiwiZ2V0QmxvZ0J5SWQiLCJpc1Byb2R1Y3Rpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsImlzTW9uZ29JZCIsInRlc3QiLCJkYXRhIiwiaW1hZ2VVcmwiLCJzbHVnIiwiZ2V0UHJvcGVydHlQb3N0cyIsIndwRGF0YSIsIm1vbmdvRGF0YSIsImZpcnN0UGFnZVJlc3BvbnNlIiwidG90YWxQYWdlcyIsInBhcnNlSW50IiwiZmlyc3RQYWdlRGF0YSIsIndwUHJvcGVydGllc1dpdGhTb3VyY2UiLCJwcm9wZXJ0eSIsInBhZ2VQcm9taXNlcyIsInBhZ2UiLCJ0aGVuIiwicmVzIiwicGFnZURhdGEiLCJhZGRpdGlvbmFsUGFnZXNEYXRhIiwiYWxsIiwid3BFcnJvciIsInByb3BlcnRpZXMiLCJuYW1lIiwicHJpY2UiLCJsb2NhdGlvbiIsImJlZHJvb21zIiwiYmF0aHJvb21zIiwibTIiLCJhcmVhIiwibGl2aW5nQXJlYSIsIm1vbmdvRXJyb3IiLCJjb21iaW5lZERhdGEiLCJnZXRQcm9wZXJ0eUJ5SWQiLCJmaWx0ZXIiLCJyZXN1bHQiLCJyb29tcyIsIndjIiwiYWRkcmVzcyIsIm1ldGFfZGF0YSIsImZpbmQiLCJtIiwia2V5IiwidmFsdWUiLCJzdGFjayIsInNlbmRFbWFpbCIsImZvcm1hdHRlZERhdGEiLCJub21icmUiLCJlbWFpbCIsInByZWZpeCIsInRlbGVmb25vIiwicGhvbmUiLCJhc3VudG8iLCJzdWNjZXNzIiwiZW5kcG9pbnQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlRGF0YSIsInBhcnNlIiwic2VuZFByb3BlcnR5RW1haWwiLCJ0eXBlIiwib2ZmZXJBbW91bnQiLCJwcm9wZXJ0eUlkIiwicHJvcGVydHlUaXRsZSIsIm9mZmVyRGF0YSIsIm9mZmVyUHJpY2UiLCJvZmZlclBlcmNlbnRhZ2UiLCJvZmZlckxhYmVsIiwicHJvcGVydHlBZGRyZXNzIiwidmlzaXREYXRlIiwidmlzaXRUaW1lIiwidmlzaXREYXRhIiwidGltZSIsImhhbmRsZXIiLCJyZXEiLCJxdWVyeSIsImltYWdlUmVzcG9uc2UiLCJpbWFnZUJ1ZmZlciIsImFycmF5QnVmZmVyIiwic2V0SGVhZGVyIiwic2VuZCIsIkJ1ZmZlciIsImZyb20iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/api.js\n"));

/***/ })

});