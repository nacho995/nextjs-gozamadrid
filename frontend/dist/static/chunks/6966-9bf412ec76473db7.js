"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6966],{11312:(e,t,r)=>{r.d(t,{XL:()=>s,t1:()=>i});let a="/api/proxy?service=wordpress",o=e=>null==e?"":"string"==typeof e?e:"number"==typeof e||"boolean"==typeof e?String(e):"object"==typeof e?e.rendered?e.rendered:JSON.stringify(e):String(e),s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;try{let r="".concat(a,"&resource=posts&page=").concat(e,"&per_page=").concat(t),s=new AbortController,i=setTimeout(()=>s.abort(),1e4),n=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store",signal:s.signal});if(clearTimeout(i),!n.ok)throw console.error("Error en la respuesta de WordPress: ".concat(n.status," ").concat(n.statusText)),Error("Error al obtener los posts");let l=await n.json(),c=parseInt(n.headers.get("X-WP-TotalPages")||"1");return{posts:l.map(e=>({...e,title:o(e.title),content:o(e.content),excerpt:o(e.excerpt),image:{src:function(e){let t=null;if(!e)return"";if(e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]){let r=e._embedded["wp:featuredmedia"][0];if(r.media_details&&r.media_details.sizes){for(let e of["medium_large","medium","large","full"])if(r.media_details.sizes[e]){t=r.media_details.sizes[e].source_url;break}}!t&&r.source_url&&(t=r.source_url)}if(!t){var r,a,o,s,i;t=(null===(a=e.uagb_featured_image_src)||void 0===a?void 0:null===(r=a.medium)||void 0===r?void 0:r[0])||(null===(s=e.uagb_featured_image_src)||void 0===s?void 0:null===(o=s.full)||void 0===o?void 0:o[0])||(null===(i=e.image)||void 0===i?void 0:i.src)||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'%3E%3Crect width='300' height='200' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' font-size='24' text-anchor='middle' alignment-baseline='middle' font-family='Arial' fill='%23999999'%3EImagen no disponible%3C/text%3E%3C/svg%3E"}return t}(e),alt:o(e.title)},source:"wordpress",_id:"wp-".concat(e.id),id:e.id})),totalPages:c}}catch(e){return console.error("Error en getBlogPostsFromServer:",e),"AbortError"===e.name&&console.error("La solicitud a WordPress se cancel\xf3 por timeout"),{posts:[],totalPages:0}}};async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{let r="".concat(a,"&resource=posts&slug=").concat(encodeURIComponent(e)),s=new AbortController,n=setTimeout(()=>s.abort(),6e4),l=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",signal:s.signal});if(clearTimeout(n),503===l.status&&t>0)return await new Promise(e=>setTimeout(e,5e3)),i(e,t-1);if(!l.ok)throw console.error("Error al obtener el post: ".concat(l.status," ").concat(l.statusText)),Error("Error al obtener el post: ".concat(l.status));let c=await l.json();if(!c||!(c.length>0))return null;{let e=c[0];return e.title=o(e.title),e.content=o(e.content),e.excerpt=o(e.excerpt),e}}catch(r){if(console.error("Error en getBlogPostBySlug:",r),("AbortError"===r.name||"TypeError"===r.name)&&t>0)return await new Promise(e=>setTimeout(e,5e3)),i(e,t-1);throw r}}},33669:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(37876),o=r(14232);r(29929);var s=r(54710),i=r.n(s);let n=e=>{let{src:t,alt:r,className:s="",priority:n=!1,sizes:l="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"}=e,[c,d]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),[u,p]=(0,o.useState)(!0),h=(0,o.useRef)(null),[f,y]=(0,o.useState)({width:800,height:600}),[b,x]=(0,o.useState)({original:null,processed:null}),[j,v]=(0,o.useState)("/img/default-blog-image.jpg");(0,o.useEffect)(()=>{d(!0)},[]),(0,o.useEffect)(()=>{let e=t=>{let r="/img/default-blog-image.jpg";if(!t)return r;if(Array.isArray(t)&&t.length>0){let a=t[0];return"object"==typeof a&&a.src?e(a.src):"string"==typeof a?e(a):r}return"object"==typeof t?t.src?e(t.src):t.url?e(t.url):t.source_url?e(t.source_url):r:"string"!=typeof t||t.includes("imageproxy/")?r:t.includes("realestategozamadrid.com")||t.includes("gozamadrid.com")||t.includes("wp-content")?r="https://images.weserv.nl/?url=".concat(encodeURIComponent(t),"&default=https://via.placeholder.com/800x600?text=Sin+Imagen"):t.startsWith("http")||t.startsWith("https")?t:r="".concat("https://goza-madrid.onrender.com").concat(t.startsWith("/")?"":"/").concat(t)},r=e(t);v(r),x({original:t,processed:r})},[t]);let w="blog-image-".concat(Math.random().toString(36).substring(2,9)),_={"@context":"https://schema.org","@type":"ImageObject","@id":"#".concat(w),contentUrl:j||"/img/default-blog-image.jpg",name:r||"Imagen del blog",description:r||"Fotograf\xeda del blog",representativeOfPage:n};return c?g||!j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({..._,contentUrl:"/img/default-blog-image.jpg"})}})}),(0,a.jsxs)("div",{className:"flex items-center justify-center bg-gray-200 ".concat(s),ref:h,itemScope:!0,itemType:"https://schema.org/ImageObject","aria-label":"Imagen no disponible",role:"img",itemID:"#".concat(w),children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Sin imagen disponible"}),(0,a.jsx)("meta",{itemProp:"contentUrl",content:"/img/default-blog-image.jpg"}),(0,a.jsx)("meta",{itemProp:"name",content:r||"Imagen no disponible"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(_)}})}),(0,a.jsxs)("div",{ref:h,className:"relative overflow-hidden",itemScope:!0,itemType:"https://schema.org/ImageObject",itemID:"#".concat(w),children:[u&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,a.jsx)("div",{className:"animate-pulse bg-gray-200 rounded-full h-16 w-16"})}),(0,a.jsx)("img",{src:j,alt:r||"Imagen del blog",className:"w-full h-full object-cover ".concat(s),onError:()=>{m(!0),p(!1)},onLoad:()=>p(!1),loading:n?"eager":"lazy",decoding:"async",itemProp:"contentUrl","data-debug":JSON.stringify(b)}),(0,a.jsx)("meta",{itemProp:"name",content:r||"Fotograf\xeda del blog"}),(0,a.jsx)("meta",{itemProp:"representativeOfPage",content:n?"true":"false"})]})]}):null}},68915:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(37876),o=r(14232),s=r(54710),i=r.n(s),n=r(29929),l=r.n(n),c=r(7814);let d=e=>{let{src:t,alt:r="Imagen",className:s="",width:n,height:d,priority:g=!1,loading:m="lazy",sizes:u,quality:p=75,fallbackSrc:h,...f}=e,[y,b]=(0,o.useState)(!1),[x,j]=(0,o.useState)(!1),[v,w]=(0,o.useState)(null),_=c.env.NEXT_PUBLIC_ASSET_PREFIX||"";(0,o.useEffect)(()=>{t?(!t.startsWith("/")||t.startsWith("//")||t.startsWith("http")?w(t):w("".concat(_).concat(t)),b(!1)):b(!0)},[t,_]);let E=()=>{b(!0)};if(y||!v)return h?(0,a.jsx)("img",{src:h,alt:r,className:s,style:{width:n||"100%",height:d||"200px",objectFit:"cover"},loading:m}):(0,a.jsx)("div",{className:"relative flex items-center justify-center bg-gray-200 ".concat(s||""),style:{width:n||"100%",height:d||"300px"},...f,children:(0,a.jsx)("span",{className:"text-gray-500",children:"Imagen no disponible"})});let S=v.startsWith("/")||v.startsWith("data:")||v.startsWith("http");return(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsx)(i(),{children:(0,a.jsx)("link",{rel:"preload",as:"image",href:v,imageSrcSet:u,imageSizes:u})}),(0,a.jsxs)("div",{className:"relative w-full h-full",children:[!x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100","aria-hidden":"true"}),S?(0,a.jsx)(l(),{src:v,alt:r,width:n||800,height:d||600,className:"".concat(s," ").concat(x?"opacity-100":"opacity-0"," transition-opacity duration-300 object-cover"),quality:p,priority:g,loading:m,onError:E,onLoad:()=>j(!0),...f}):(0,a.jsx)("img",{src:v,alt:r,className:"".concat(s," ").concat(x?"opacity-100":"opacity-0"," transition-opacity duration-300 w-full h-full object-cover"),style:{width:n||"100%",height:d||"100%"},loading:g?"eager":m,onError:E,onLoad:()=>j(!0),...f})]})]})}}}]);