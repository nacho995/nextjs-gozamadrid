"use strict";(()=>{var e={};e.id=40,e.ids=[40,220,636],e.modules={8732:e=>{e.exports=require("react/jsx-runtime")},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22326:e=>{e.exports=require("react-dom")},27910:e=>{e.exports=require("stream")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29825:e=>{e.exports=require("prop-types")},33873:e=>{e.exports=require("path")},40361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42893:e=>{e.exports=import("react-hot-toast")},56519:(e,r,s)=>{s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{config:()=>h,default:()=>p,getServerSideProps:()=>u,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>g,routeModule:()=>y,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var a=s(35799),o=s(82755),i=s(28311),n=s(76263),l=s(46157),d=s(57671),c=e([l,d]);[l,d]=c.then?(await c)():c;let p=(0,i.M)(d,"default"),x=(0,i.M)(d,"getStaticProps"),m=(0,i.M)(d,"getStaticPaths"),u=(0,i.M)(d,"getServerSideProps"),h=(0,i.M)(d,"config"),g=(0,i.M)(d,"reportWebVitals"),b=(0,i.M)(d,"unstable_getStaticProps"),f=(0,i.M)(d,"unstable_getStaticPaths"),j=(0,i.M)(d,"unstable_getStaticParams"),v=(0,i.M)(d,"unstable_getServerProps"),N=(0,i.M)(d,"unstable_getServerSideProps"),y=new a.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/diagnostico",pathname:"/diagnostico",bundlePath:"",filename:""},components:{App:l.default,Document:n.default},userland:d});t()}catch(e){t(e)}})},57671:(e,r,s)=>{s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{default:()=>p});var a=s(8732),o=s(82015),i=s(68030),n=s.n(i),l=s(37287),d=s(80431);s(67659);var c=e([l]);function p(){let{id:e}=(0,d.useRouter)().query,[r,s]=(0,o.useState)(""),[t,i]=(0,o.useState)(!1),[c,p]=(0,o.useState)(null),[x,m]=(0,o.useState)(null),[u,h]=(0,o.useState)([]),g=e=>{h(r=>[...r,{time:new Date().toISOString(),message:e}])},b=async(e,s=null)=>{e&&e.preventDefault();let t=s||r;if(!t){m("Por favor, introduce un ID de propiedad");return}i(!0),p(null),m(null),h([]),g(`Iniciando diagn\xf3stico para ID: ${t}`);try{let e;let r=/^[0-9a-fA-F]{24}$/.test(t);g(`\xbfEs ID de MongoDB? ${r}`);let s=new AbortController,a=setTimeout(()=>{g(`TIMEOUT alcanzado para la propiedad con ID: ${t}`),s.abort()},15e3);if(g(`Intentando cargar propiedad con ID: ${t}`),r){g(`Obteniendo propiedad de MongoDB con ID ${t}`);try{let r=`/property/${t}`;g(`URL de petici\xf3n MongoDB: ${r}`),e=await fetch(r,{signal:s.signal,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),g(`Respuesta MongoDB recibida: ${e.status} ${e.statusText}`)}catch(e){if(clearTimeout(a),g(`Error en fetch MongoDB: ${e.message}`),"AbortError"===e.name)throw Error("Tiempo de espera agotado al obtener la propiedad. Por favor, int\xe9ntalo de nuevo.");throw e}}else{g(`Obteniendo propiedad de WooCommerce con ID ${t}`);try{let r=`/api/wordpress-proxy?path=products/${t}`;g(`URL de petici\xf3n WooCommerce: ${r}`),e=await fetch(r,{signal:s.signal,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),g(`Respuesta WooCommerce recibida: ${e.status} ${e.statusText}`)}catch(e){if(clearTimeout(a),g(`Error en fetch WooCommerce: ${e.message}`),"AbortError"===e.name)throw Error("Tiempo de espera agotado al obtener la propiedad. Por favor, int\xe9ntalo de nuevo.");throw e}}if(clearTimeout(a),!e.ok)throw g(`Error en respuesta: ${e.status} ${e.statusText}`),Error(`Error al obtener propiedad: ${e.status} ${e.statusText}`);g("Intentando obtener JSON de la respuesta");let o=await e.json();g("JSON obtenido correctamente"),p(o),g(`Diagn\xf3stico completado con \xe9xito`)}catch(e){g(`Error en diagn\xf3stico: ${e.message}`),console.error("Error en diagn\xf3stico:",e),m(e.message||"Error desconocido")}finally{i(!1)}};return(0,a.jsxs)(l.A,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"Diagn\xf3stico de Propiedades | Goza Madrid"}),(0,a.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,a.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Diagn\xf3stico de Propiedades"}),(0,a.jsx)("form",{onSubmit:b,className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>s(e.target.value),placeholder:"ID de la propiedad",className:"flex-grow p-3 border border-gray-300 rounded"}),(0,a.jsx)("button",{type:"submit",disabled:t,className:`px-6 py-3 rounded font-bold ${t?"bg-gray-400":"bg-amber-400 hover:bg-amber-500"} text-black`,children:t?"Cargando...":"Diagnosticar"})]})}),x&&(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-2",children:"Error"}),(0,a.jsx)("p",{children:x})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-2",children:"Logs"}),(0,a.jsx)("div",{className:"bg-black text-green-400 p-4 rounded h-96 overflow-y-auto font-mono text-sm",children:0===u.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No hay logs disponibles"}):u.map((e,r)=>(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:["[",e.time.split("T")[1].split(".")[0],"]"]})," ",e.message]},r))})]}),(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-2",children:"Resultado"}),(0,a.jsx)("div",{className:"bg-white border border-gray-300 p-4 rounded h-96 overflow-y-auto",children:t?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-400"})}):c?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl mb-2",children:c.title||c.name||"Propiedad sin t\xedtulo"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"ID:"}),(0,a.jsx)("p",{children:c._id||c.id||"No disponible"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Tipo:"}),(0,a.jsx)("p",{children:c.source||"No disponible"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Precio:"}),(0,a.jsx)("p",{children:c.price||"No disponible"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Ubicaci\xf3n:"}),(0,a.jsx)("p",{children:c.location||"No disponible"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"font-bold",children:"Im\xe1genes:"}),c.images&&c.images.length>0?(0,a.jsx)("ul",{className:"list-disc pl-5",children:c.images.map((e,r)=>(0,a.jsx)("li",{className:"truncate",children:"string"==typeof e?e:e.src||"Objeto de imagen sin URL"},r))}):(0,a.jsx)("p",{children:"No hay im\xe1genes disponibles"})]}),(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{className:"cursor-pointer font-bold",children:"Ver JSON completo"}),(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded mt-2 text-xs overflow-x-auto",children:JSON.stringify(c,null,2)})]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"No hay resultados disponibles"})})]})]})]})]})}l=(c.then?(await c)():c)[0],t()}catch(e){t(e)}})},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},76263:(e,r,s)=>{s.r(r),s.d(r,{default:()=>o});var t=s(8732),a=s(23267);function o(){return(0,t.jsxs)(a.Html,{lang:"es",children:[(0,t.jsxs)(a.Head,{children:[(0,t.jsx)("meta",{charSet:"utf-8"}),(0,t.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,t.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,t.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&display=swap",rel:"stylesheet"}),(0,t.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/logo.png"}),(0,t.jsx)("link",{rel:"manifest",href:"/site.webmanifest"})]}),(0,t.jsxs)("body",{children:[(0,t.jsx)(a.Main,{}),(0,t.jsx)(a.NextScript,{})]})]})}},76338:e=>{e.exports=import("js-cookie")},82015:e=>{e.exports=require("react")}};var r=require("../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[348,871,267,423,675],()=>s(56519));module.exports=t})();