"use strict";(()=>{var e={};e.id=175,e.ids=[175,220,636],e.modules={7085:e=>{e.exports=require("styled-jsx/style")},8732:e=>{e.exports=require("react/jsx-runtime")},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22326:e=>{e.exports=require("react-dom")},27910:e=>{e.exports=require("stream")},28311:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29825:e=>{e.exports=require("prop-types")},33873:e=>{e.exports=require("path")},40361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42893:e=>{e.exports=import("react-hot-toast")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},76263:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var o=r(8732),s=r(23267);function i(){return(0,o.jsxs)(s.Html,{lang:"es",children:[(0,o.jsxs)(s.Head,{children:[(0,o.jsx)("meta",{charSet:"utf-8"}),(0,o.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,o.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,o.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&display=swap",rel:"stylesheet"}),(0,o.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/logo.png"}),(0,o.jsx)("link",{rel:"manifest",href:"/site.webmanifest"})]}),(0,o.jsxs)("body",{children:[(0,o.jsx)(s.Main,{}),(0,o.jsx)(s.NextScript,{})]})]})}},76338:e=>{e.exports=import("js-cookie")},77493:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{config:()=>u,default:()=>c,getServerSideProps:()=>m,getStaticPaths:()=>g,getStaticProps:()=>x,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>h});var s=r(35799),i=r(82755),a=r(28311),n=r(76263),d=r(46157),l=r(86426),p=e([d]);d=(p.then?(await p)():p)[0];let c=(0,a.M)(l,"default"),x=(0,a.M)(l,"getStaticProps"),g=(0,a.M)(l,"getStaticPaths"),m=(0,a.M)(l,"getServerSideProps"),u=(0,a.M)(l,"config"),f=(0,a.M)(l,"reportWebVitals"),h=(0,a.M)(l,"unstable_getStaticProps"),b=(0,a.M)(l,"unstable_getStaticPaths"),y=(0,a.M)(l,"unstable_getStaticParams"),j=(0,a.M)(l,"unstable_getServerProps"),v=(0,a.M)(l,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:i.A.PAGES,page:"/diagnostico-simple",pathname:"/diagnostico-simple",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:l});o()}catch(e){o(e)}})},82015:e=>{e.exports=require("react")},82755:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},86426:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var o=r(8732),s=r(7085),i=r.n(s),a=r(82015),n=r(68030),d=r.n(n),l=r(80431);function p(){let{id:e}=(0,l.useRouter)().query,[t,r]=(0,a.useState)(""),[s,n]=(0,a.useState)(!1),[p,c]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),[m,u]=(0,a.useState)([]),f=e=>{u(t=>[...t,{time:new Date().toISOString(),message:e}])},h=async(e,r=null)=>{e&&e.preventDefault();let o=r||t;if(!o){g("Por favor, introduce un ID de propiedad");return}n(!0),c(null),g(null),u([]),f(`Iniciando diagn\xf3stico para ID: ${o}`);try{let e;let t=/^[0-9a-fA-F]{24}$/.test(o);f(`\xbfEs ID de MongoDB? ${t}`);let r=new AbortController,s=setTimeout(()=>{f(`TIMEOUT alcanzado para la propiedad con ID: ${o}`),r.abort()},15e3);if(f(`Intentando cargar propiedad con ID: ${o}`),t){f(`Obteniendo propiedad de MongoDB con ID ${o}`);try{let t=`/property/${o}`;f(`URL de petici\xf3n MongoDB: ${t}`),e=await fetch(t,{signal:r.signal,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),f(`Respuesta MongoDB recibida: ${e.status} ${e.statusText}`)}catch(e){if(clearTimeout(s),f(`Error en fetch MongoDB: ${e.message}`),"AbortError"===e.name)throw Error("Tiempo de espera agotado al obtener la propiedad. Por favor, int\xe9ntalo de nuevo.");throw e}}else{f(`Obteniendo propiedad de WooCommerce con ID ${o}`);try{let t=`/api/wordpress-proxy?path=products/${o}`;f(`URL de petici\xf3n WooCommerce: ${t}`),e=await fetch(t,{signal:r.signal,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}),f(`Respuesta WooCommerce recibida: ${e.status} ${e.statusText}`)}catch(e){if(clearTimeout(s),f(`Error en fetch WooCommerce: ${e.message}`),"AbortError"===e.name)throw Error("Tiempo de espera agotado al obtener la propiedad. Por favor, int\xe9ntalo de nuevo.");throw e}}if(clearTimeout(s),!e.ok)throw f(`Error en respuesta: ${e.status} ${e.statusText}`),Error(`Error al obtener propiedad: ${e.status} ${e.statusText}`);f("Intentando obtener JSON de la respuesta");let i=await e.json();f("JSON obtenido correctamente"),c(i),f(`Diagn\xf3stico completado con \xe9xito`)}catch(e){f(`Error en diagn\xf3stico: ${e.message}`),console.error("Error en diagn\xf3stico:",e),g(e.message||"Error desconocido")}finally{n(!1)}};return(0,o.jsxs)("div",{style:{fontFamily:"Arial, sans-serif",maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[(0,o.jsxs)(d(),{children:[(0,o.jsx)("title",{children:"Diagn\xf3stico Simple de Propiedades | Goza Madrid"}),(0,o.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,o.jsx)("h1",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},children:"Diagn\xf3stico Simple de Propiedades"}),(0,o.jsx)("form",{onSubmit:h,style:{marginBottom:"20px"},children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,o.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"ID de la propiedad",style:{padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}}),(0,o.jsx)("button",{type:"submit",disabled:s,style:{padding:"10px",backgroundColor:s?"#ccc":"#f59e0b",color:"#000",border:"none",borderRadius:"4px",fontWeight:"bold",cursor:s?"not-allowed":"pointer"},children:s?"Cargando...":"Diagnosticar"})]})}),x&&(0,o.jsxs)("div",{style:{backgroundColor:"#fee2e2",border:"1px solid #ef4444",color:"#b91c1c",padding:"10px",borderRadius:"4px",marginBottom:"20px"},children:[(0,o.jsx)("h2",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Error"}),(0,o.jsx)("p",{children:x})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"20px"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"#f3f4f6",padding:"15px",borderRadius:"4px"},children:[(0,o.jsx)("h2",{style:{fontWeight:"bold",marginBottom:"10px"},children:"Logs"}),(0,o.jsx)("div",{style:{backgroundColor:"#000",color:"#4ade80",padding:"10px",borderRadius:"4px",height:"300px",overflowY:"auto",fontFamily:"monospace",fontSize:"14px"},children:0===m.length?(0,o.jsx)("p",{style:{color:"#6b7280"},children:"No hay logs disponibles"}):m.map((e,t)=>(0,o.jsxs)("div",{style:{marginBottom:"5px"},children:[(0,o.jsxs)("span",{style:{color:"#6b7280"},children:["[",e.time.split("T")[1].split(".")[0],"]"]})," ",e.message]},t))})]}),(0,o.jsxs)("div",{style:{backgroundColor:"#f3f4f6",padding:"15px",borderRadius:"4px"},children:[(0,o.jsx)("h2",{style:{fontWeight:"bold",marginBottom:"10px"},children:"Resultado"}),(0,o.jsx)("div",{style:{backgroundColor:"#fff",border:"1px solid #ccc",padding:"15px",borderRadius:"4px",height:"300px",overflowY:"auto"},children:s?(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},className:"jsx-e1a5dd452c21a721",children:[(0,o.jsx)("div",{style:{border:"4px solid #f3f4f6",borderTopColor:"#f59e0b",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 1s linear infinite"},className:"jsx-e1a5dd452c21a721"}),(0,o.jsx)(i(),{id:"e1a5dd452c21a721",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):p?(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontWeight:"bold",fontSize:"18px",marginBottom:"10px"},children:p.title||p.name||"Propiedad sin t\xedtulo"}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontWeight:"bold"},children:"ID:"}),(0,o.jsx)("p",{children:p._id||p.id||"No disponible"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontWeight:"bold"},children:"Tipo:"}),(0,o.jsx)("p",{children:p.source||"No disponible"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontWeight:"bold"},children:"Precio:"}),(0,o.jsx)("p",{children:p.price||"No disponible"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontWeight:"bold"},children:"Ubicaci\xf3n:"}),(0,o.jsx)("p",{children:p.location||"No disponible"})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,o.jsx)("p",{style:{fontWeight:"bold"},children:"Im\xe1genes:"}),p.images&&p.images.length>0?(0,o.jsx)("ul",{style:{listStyleType:"disc",paddingLeft:"20px"},children:p.images.map((e,t)=>(0,o.jsx)("li",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"string"==typeof e?e:e.src||"Objeto de imagen sin URL"},t))}):(0,o.jsx)("p",{children:"No hay im\xe1genes disponibles"})]}),(0,o.jsxs)("details",{children:[(0,o.jsx)("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Ver JSON completo"}),(0,o.jsx)("pre",{style:{backgroundColor:"#f3f4f6",padding:"10px",borderRadius:"4px",marginTop:"10px",fontSize:"12px",overflowX:"auto"},children:JSON.stringify(p,null,2)})]})]}):(0,o.jsx)("p",{style:{color:"#6b7280"},children:"No hay resultados disponibles"})})]})]})]})}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[348,871,267,423],()=>r(77493));module.exports=o})();