"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/wordpress-proxy";
exports.ids = ["pages/api/wordpress-proxy"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/wordpress-proxy.js */ \"(api)/./src/pages/api/wordpress-proxy.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/wordpress-proxy\",\n        pathname: \"/api/wordpress-proxy\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRndvcmRwcmVzcy1wcm94eSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGd29yZHByZXNzLXByb3h5LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQytEO0FBQy9EO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw4REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsOERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvP2M3M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvd29yZHByZXNzLXByb3h5LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvd29yZHByZXNzLXByb3h5XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvd29yZHByZXNzLXByb3h5XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/wordpress-proxy.js":
/*!******************************************!*\
  !*** ./src/pages/api/wordpress-proxy.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/**\n * API Proxy para WordPress con reintentos y obtención de todos los elementos en producción\n */ const MAX_RETRIES = 10;\nconst INITIAL_RETRY_DELAY = 2000;\nconst MAX_RETRY_DELAY = 60000;\nconst EXPONENTIAL_BACKOFF = true;\nconst MAX_PER_PAGE = 100;\nconst TIMEOUT =  false ? 0 : 120000; // 3 minutos en producción, 2 minutos en desarrollo\nconst sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst fetchWithRetry = async (url, options, retries = MAX_RETRIES, attempt = 1)=>{\n    try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), TIMEOUT);\n        const response = await fetch(url, {\n            ...options,\n            signal: controller.signal,\n            headers: {\n                ...options.headers,\n                \"User-Agent\": \"Mozilla/5.0 (compatible; GozaMadridBot/1.0)\",\n                \"Accept\": \"application/json\",\n                \"Cache-Control\":  false ? 0 : \"no-cache, no-store, must-revalidate\",\n                \"Pragma\":  false ? 0 : \"no-cache\",\n                \"Expires\":  false ? 0 : \"0\"\n            }\n        });\n        clearTimeout(timeoutId);\n        // Si es un error 503, 502, 504 o 404, intentar de nuevo con backoff exponencial\n        if ((response.status === 503 || response.status === 502 || response.status === 504 || response.status === 404) && retries > 0) {\n            const delay = EXPONENTIAL_BACKOFF ? Math.min(INITIAL_RETRY_DELAY * Math.pow(2, attempt - 1), MAX_RETRY_DELAY) : INITIAL_RETRY_DELAY;\n            console.log(`[WordPress Proxy] Error ${response.status} - Reintentando (${retries} intentos restantes) después de ${delay}ms...`);\n            await sleep(delay);\n            return fetchWithRetry(url, options, retries - 1, attempt + 1);\n        }\n        return response;\n    } catch (error) {\n        if (error.name === \"AbortError\") {\n            console.error(\"[WordPress Proxy] Timeout - La solicitud tard\\xf3 demasiado\");\n            if (retries > 0) {\n                console.log(`[WordPress Proxy] Reintentando después del timeout...`);\n                return fetchWithRetry(url, options, retries - 1, attempt + 1);\n            }\n            throw new Error(\"Timeout - La solicitud tard\\xf3 demasiado\");\n        }\n        if (retries > 0) {\n            const delay = EXPONENTIAL_BACKOFF ? Math.min(INITIAL_RETRY_DELAY * Math.pow(2, attempt - 1), MAX_RETRY_DELAY) : INITIAL_RETRY_DELAY;\n            console.log(`[WordPress Proxy] Error en la petición: ${error.message} - Reintentando (${retries} intentos restantes) después de ${delay}ms...`);\n            await sleep(delay);\n            return fetchWithRetry(url, options, retries - 1, attempt + 1);\n        }\n        throw error;\n    }\n};\nasync function handler(req, res) {\n    // Configurar headers CORS y caché para producción\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    if (req.method === \"OPTIONS\") {\n        return res.status(200).end();\n    }\n    if (false) {} else {\n        res.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n    }\n    const { path, endpoint, ...queryParams } = req.query;\n    console.log(\"WordPress Proxy - Par\\xe1metros recibidos:\", {\n        path,\n        endpoint,\n        queryParams\n    });\n    // Claves de API de WooCommerce\n    const WC_CONSUMER_KEY = \"ck_d69e61427264a7beea70ca9ee543b45dd00cae85\" || 0;\n    const WC_CONSUMER_SECRET = \"cs_a1757851d6db34bf9fb669c3ce6ef5a0dc855b5e\" || 0;\n    // Determinar qué API usar (WooCommerce o WordPress)\n    let baseUrl = \"\";\n    let url = \"\";\n    // En producción, siempre intentamos obtener el máximo de elementos por página\n    if (false) {}\n    if (endpoint === \"wp\") {\n        // API de WordPress (posts, etc.)\n        baseUrl = \"https://wordpress-1430059-5339263.cloudwaysapps.com/wp-json/wp/v2\" || 0;\n        url = `${baseUrl}/${path || \"posts\"}`;\n        // Añadir parámetros de consulta\n        const queryString = Object.entries(queryParams).map(([key, value])=>`${key}=${encodeURIComponent(value)}`).join(\"&\");\n        if (queryString) {\n            url += `?${queryString}`;\n        }\n    } else {\n        // API de WooCommerce (productos)\n        baseUrl = \"https://wordpress-1430059-5339263.cloudwaysapps.com/wp-json/wc/v3\" || 0;\n        url = `${baseUrl}/${path || \"products\"}`;\n        // Añadir las claves de API\n        url += `?consumer_key=${WC_CONSUMER_KEY}&consumer_secret=${WC_CONSUMER_SECRET}`;\n        // Añadir otros parámetros de consulta\n        Object.entries(queryParams).forEach(([key, value])=>{\n            url += `&${key}=${encodeURIComponent(value)}`;\n        });\n    }\n    console.log(\"WordPress Proxy - URL construida:\", url);\n    try {\n        // Hacer la solicitud a la API de WordPress con reintentos\n        const response = await fetchWithRetry(url, {\n            headers: {\n                \"Cache-Control\":  false ? 0 : \"no-cache, no-store, must-revalidate\",\n                \"Pragma\":  false ? 0 : \"no-cache\",\n                \"Expires\":  false ? 0 : \"0\",\n                \"User-Agent\": \"Mozilla/5.0 (compatible; GozaMadridBot/1.0)\",\n                \"Accept\": \"application/json\"\n            }\n        });\n        console.log(\"WordPress Proxy - Respuesta recibida:\", {\n            status: response.status,\n            statusText: response.statusText,\n            headers: Object.fromEntries([\n                ...response.headers.entries()\n            ])\n        });\n        // Obtener los headers para el total de páginas\n        const totalPages = parseInt(response.headers.get(\"X-WP-TotalPages\") || \"1\");\n        const totalItems = parseInt(response.headers.get(\"X-WP-Total\") || \"0\");\n        // Si después de los reintentos aún tenemos un error\n        if (!response.ok) {\n            console.error(`[WordPress Proxy] Error en la respuesta después de ${MAX_RETRIES} intentos: ${response.status} ${response.statusText}`);\n            // Si es un error 503, 502 o 404, devolver una respuesta vacía\n            if (response.status === 503 || response.status === 502 || response.status === 404) {\n                console.log(\"[WordPress Proxy] Servicio no disponible despu\\xe9s de todos los reintentos, devolviendo array vac\\xedo\");\n                return res.status(200).json([]);\n            }\n            // Para otros errores, intentar leer el cuerpo del error\n            try {\n                const errorText = await response.text();\n                console.error(\"WordPress Proxy - Cuerpo del error:\", errorText);\n            } catch (e) {\n                console.error(\"WordPress Proxy - No se pudo leer el cuerpo del error\");\n            }\n            return res.status(response.status).json({\n                error: `Error al obtener datos de WordPress: ${response.status}`,\n                message: response.statusText\n            });\n        }\n        // Obtener los datos de la respuesta\n        let data = await response.json();\n        data = Array.isArray(data) ? data : [\n            data\n        ];\n        // En producción, obtener todas las páginas si hay más de una y no se especificó una página específica\n        if (false) {}\n        console.log(`WordPress Proxy - Total de elementos obtenidos: ${data.length}`);\n        if (totalItems) {\n            res.setHeader(\"X-WP-Total\", totalItems);\n        }\n        if (totalPages) {\n            res.setHeader(\"X-WP-TotalPages\", totalPages);\n        }\n        // Devolver los datos\n        return res.status(200).json(data);\n    } catch (error) {\n        console.error(\"Error en el proxy de WordPress:\", error);\n        // En caso de error irrecuperable, devolver un array vacío\n        console.log(\"WordPress Proxy - Error irrecuperable, devolviendo array vac\\xedo\");\n        return res.status(200).json([]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJYixNQUFNLENBQUMsS0FBSzhDLElBQUksQ0FBQyxFQUFFO0lBQ2hDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9wYWdlcy9hcGkvd29yZHByZXNzLXByb3h5LmpzPzM2YzgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBUEkgUHJveHkgcGFyYSBXb3JkUHJlc3MgY29uIHJlaW50ZW50b3MgeSBvYnRlbmNpw7NuIGRlIHRvZG9zIGxvcyBlbGVtZW50b3MgZW4gcHJvZHVjY2nDs25cbiAqL1xuXG5jb25zdCBNQVhfUkVUUklFUyA9IDEwO1xuY29uc3QgSU5JVElBTF9SRVRSWV9ERUxBWSA9IDIwMDA7XG5jb25zdCBNQVhfUkVUUllfREVMQVkgPSA2MDAwMDtcbmNvbnN0IEVYUE9ORU5USUFMX0JBQ0tPRkYgPSB0cnVlO1xuY29uc3QgTUFYX1BFUl9QQUdFID0gMTAwO1xuY29uc3QgVElNRU9VVCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAxODAwMDAgOiAxMjAwMDA7IC8vIDMgbWludXRvcyBlbiBwcm9kdWNjacOzbiwgMiBtaW51dG9zIGVuIGRlc2Fycm9sbG9cblxuY29uc3Qgc2xlZXAgPSAobXMpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5jb25zdCBmZXRjaFdpdGhSZXRyeSA9IGFzeW5jICh1cmwsIG9wdGlvbnMsIHJldHJpZXMgPSBNQVhfUkVUUklFUywgYXR0ZW1wdCA9IDEpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBUSU1FT1VUKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgR296YU1hZHJpZEJvdC8xLjApJyxcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nIFxuICAgICAgICAgID8gJ3B1YmxpYywgbWF4LWFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MDAnXG4gICAgICAgICAgOiAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnLFxuICAgICAgICAnUHJhZ21hJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IHVuZGVmaW5lZCA6ICduby1jYWNoZScsXG4gICAgICAgICdFeHBpcmVzJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IHVuZGVmaW5lZCA6ICcwJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgXG4gICAgLy8gU2kgZXMgdW4gZXJyb3IgNTAzLCA1MDIsIDUwNCBvIDQwNCwgaW50ZW50YXIgZGUgbnVldm8gY29uIGJhY2tvZmYgZXhwb25lbmNpYWxcbiAgICBpZiAoKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAzIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAyIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNTA0IHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSAmJiByZXRyaWVzID4gMCkge1xuICAgICAgY29uc3QgZGVsYXkgPSBFWFBPTkVOVElBTF9CQUNLT0ZGIFxuICAgICAgICA/IE1hdGgubWluKElOSVRJQUxfUkVUUllfREVMQVkgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSksIE1BWF9SRVRSWV9ERUxBWSlcbiAgICAgICAgOiBJTklUSUFMX1JFVFJZX0RFTEFZO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgW1dvcmRQcmVzcyBQcm94eV0gRXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9IC0gUmVpbnRlbnRhbmRvICgke3JldHJpZXN9IGludGVudG9zIHJlc3RhbnRlcykgZGVzcHXDqXMgZGUgJHtkZWxheX1tcy4uLmApO1xuICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpO1xuICAgICAgcmV0dXJuIGZldGNoV2l0aFJldHJ5KHVybCwgb3B0aW9ucywgcmV0cmllcyAtIDEsIGF0dGVtcHQgKyAxKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tXb3JkUHJlc3MgUHJveHldIFRpbWVvdXQgLSBMYSBzb2xpY2l0dWQgdGFyZMOzIGRlbWFzaWFkbycpO1xuICAgICAgaWYgKHJldHJpZXMgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbV29yZFByZXNzIFByb3h5XSBSZWludGVudGFuZG8gZGVzcHXDqXMgZGVsIHRpbWVvdXQuLi5gKTtcbiAgICAgICAgcmV0dXJuIGZldGNoV2l0aFJldHJ5KHVybCwgb3B0aW9ucywgcmV0cmllcyAtIDEsIGF0dGVtcHQgKyAxKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcignVGltZW91dCAtIExhIHNvbGljaXR1ZCB0YXJkw7MgZGVtYXNpYWRvJyk7XG4gICAgfVxuXG4gICAgaWYgKHJldHJpZXMgPiAwKSB7XG4gICAgICBjb25zdCBkZWxheSA9IEVYUE9ORU5USUFMX0JBQ0tPRkYgXG4gICAgICAgID8gTWF0aC5taW4oSU5JVElBTF9SRVRSWV9ERUxBWSAqIE1hdGgucG93KDIsIGF0dGVtcHQgLSAxKSwgTUFYX1JFVFJZX0RFTEFZKVxuICAgICAgICA6IElOSVRJQUxfUkVUUllfREVMQVk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBbV29yZFByZXNzIFByb3h5XSBFcnJvciBlbiBsYSBwZXRpY2nDs246ICR7ZXJyb3IubWVzc2FnZX0gLSBSZWludGVudGFuZG8gKCR7cmV0cmllc30gaW50ZW50b3MgcmVzdGFudGVzKSBkZXNwdcOpcyBkZSAke2RlbGF5fW1zLi4uYCk7XG4gICAgICBhd2FpdCBzbGVlcChkZWxheSk7XG4gICAgICByZXR1cm4gZmV0Y2hXaXRoUmV0cnkodXJsLCBvcHRpb25zLCByZXRyaWVzIC0gMSwgYXR0ZW1wdCArIDEpO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAvLyBDb25maWd1cmFyIGhlYWRlcnMgQ09SUyB5IGNhY2jDqSBwYXJhIHByb2R1Y2Npw7NuXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBPUFRJT05TJyk7XG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyk7XG4gIFxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5lbmQoKTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwdWJsaWMsIG1heC1hZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9NjAwJyk7XG4gIH0gZWxzZSB7XG4gICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICduby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZScpO1xuICB9XG5cbiAgY29uc3QgeyBwYXRoLCBlbmRwb2ludCwgLi4ucXVlcnlQYXJhbXMgfSA9IHJlcS5xdWVyeTtcbiAgXG4gIGNvbnNvbGUubG9nKCdXb3JkUHJlc3MgUHJveHkgLSBQYXLDoW1ldHJvcyByZWNpYmlkb3M6JywgeyBwYXRoLCBlbmRwb2ludCwgcXVlcnlQYXJhbXMgfSk7XG4gIFxuICAvLyBDbGF2ZXMgZGUgQVBJIGRlIFdvb0NvbW1lcmNlXG4gIGNvbnN0IFdDX0NPTlNVTUVSX0tFWSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1dPT19DT01NRVJDRV9LRVkgfHwgJ2NrXzc1YzU5NDBiZmFlNmE5ZGQ2M2YxNDg5ZGE3MWU0M2I1NzY5OTk2MzMnO1xuICBjb25zdCBXQ19DT05TVU1FUl9TRUNSRVQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19XT09fQ09NTUVSQ0VfU0VDUkVUIHx8ICdjc19mMTk0ZDExYjQxY2E5MmNkZDM1NjE0NTcwNWZlZGU3MTFjZDIzM2U1JztcbiAgXG4gIC8vIERldGVybWluYXIgcXXDqSBBUEkgdXNhciAoV29vQ29tbWVyY2UgbyBXb3JkUHJlc3MpXG4gIGxldCBiYXNlVXJsID0gJyc7XG4gIGxldCB1cmwgPSAnJztcbiAgXG4gIC8vIEVuIHByb2R1Y2Npw7NuLCBzaWVtcHJlIGludGVudGFtb3Mgb2J0ZW5lciBlbCBtw6F4aW1vIGRlIGVsZW1lbnRvcyBwb3IgcMOhZ2luYVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiAhcXVlcnlQYXJhbXMucGVyX3BhZ2UpIHtcbiAgICBxdWVyeVBhcmFtcy5wZXJfcGFnZSA9IE1BWF9QRVJfUEFHRTtcbiAgfVxuICBcbiAgaWYgKGVuZHBvaW50ID09PSAnd3AnKSB7XG4gICAgLy8gQVBJIGRlIFdvcmRQcmVzcyAocG9zdHMsIGV0Yy4pXG4gICAgYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1dQX0FQSV9VUkwgfHwgJ2h0dHBzOi8vd29yZHByZXNzLTE0MzAwNTktNTMzOTI2My5jbG91ZHdheXNhcHBzLmNvbS93cC1qc29uL3dwL3YyJztcbiAgICB1cmwgPSBgJHtiYXNlVXJsfS8ke3BhdGggfHwgJ3Bvc3RzJ31gO1xuICAgIFxuICAgIC8vIEHDsWFkaXIgcGFyw6FtZXRyb3MgZGUgY29uc3VsdGFcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IE9iamVjdC5lbnRyaWVzKHF1ZXJ5UGFyYW1zKVxuICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gKVxuICAgICAgLmpvaW4oJyYnKTtcbiAgICBcbiAgICBpZiAocXVlcnlTdHJpbmcpIHtcbiAgICAgIHVybCArPSBgPyR7cXVlcnlTdHJpbmd9YDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gQVBJIGRlIFdvb0NvbW1lcmNlIChwcm9kdWN0b3MpXG4gICAgYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1dDX0FQSV9VUkwgfHwgJ2h0dHBzOi8vd29yZHByZXNzLTE0MzAwNTktNTMzOTI2My5jbG91ZHdheXNhcHBzLmNvbS93cC1qc29uL3djL3YzJztcbiAgICB1cmwgPSBgJHtiYXNlVXJsfS8ke3BhdGggfHwgJ3Byb2R1Y3RzJ31gO1xuICAgIFxuICAgIC8vIEHDsWFkaXIgbGFzIGNsYXZlcyBkZSBBUElcbiAgICB1cmwgKz0gYD9jb25zdW1lcl9rZXk9JHtXQ19DT05TVU1FUl9LRVl9JmNvbnN1bWVyX3NlY3JldD0ke1dDX0NPTlNVTUVSX1NFQ1JFVH1gO1xuICAgIFxuICAgIC8vIEHDsWFkaXIgb3Ryb3MgcGFyw6FtZXRyb3MgZGUgY29uc3VsdGFcbiAgICBPYmplY3QuZW50cmllcyhxdWVyeVBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICB1cmwgKz0gYCYke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gICAgfSk7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKCdXb3JkUHJlc3MgUHJveHkgLSBVUkwgY29uc3RydWlkYTonLCB1cmwpO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBIYWNlciBsYSBzb2xpY2l0dWQgYSBsYSBBUEkgZGUgV29yZFByZXNzIGNvbiByZWludGVudG9zXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeSh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nIFxuICAgICAgICAgID8gJ3B1YmxpYywgbWF4LWFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MDAnXG4gICAgICAgICAgOiAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnLFxuICAgICAgICAnUHJhZ21hJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IHVuZGVmaW5lZCA6ICduby1jYWNoZScsXG4gICAgICAgICdFeHBpcmVzJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IHVuZGVmaW5lZCA6ICcwJyxcbiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IEdvemFNYWRyaWRCb3QvMS4wKScsXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnV29yZFByZXNzIFByb3h5IC0gUmVzcHVlc3RhIHJlY2liaWRhOicsIHtcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgIGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhbLi4ucmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCldKVxuICAgIH0pO1xuICAgIFxuICAgIC8vIE9idGVuZXIgbG9zIGhlYWRlcnMgcGFyYSBlbCB0b3RhbCBkZSBww6FnaW5hc1xuICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzLmdldCgnWC1XUC1Ub3RhbFBhZ2VzJykgfHwgJzEnKTtcbiAgICBjb25zdCB0b3RhbEl0ZW1zID0gcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVycy5nZXQoJ1gtV1AtVG90YWwnKSB8fCAnMCcpO1xuICAgIFxuICAgIC8vIFNpIGRlc3B1w6lzIGRlIGxvcyByZWludGVudG9zIGHDum4gdGVuZW1vcyB1biBlcnJvclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtXb3JkUHJlc3MgUHJveHldIEVycm9yIGVuIGxhIHJlc3B1ZXN0YSBkZXNwdcOpcyBkZSAke01BWF9SRVRSSUVTfSBpbnRlbnRvczogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIFxuICAgICAgLy8gU2kgZXMgdW4gZXJyb3IgNTAzLCA1MDIgbyA0MDQsIGRldm9sdmVyIHVuYSByZXNwdWVzdGEgdmFjw61hXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA1MDMgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA1MDIgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tXb3JkUHJlc3MgUHJveHldIFNlcnZpY2lvIG5vIGRpc3BvbmlibGUgZGVzcHXDqXMgZGUgdG9kb3MgbG9zIHJlaW50ZW50b3MsIGRldm9sdmllbmRvIGFycmF5IHZhY8OtbycpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oW10pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQYXJhIG90cm9zIGVycm9yZXMsIGludGVudGFyIGxlZXIgZWwgY3VlcnBvIGRlbCBlcnJvclxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdXb3JkUHJlc3MgUHJveHkgLSBDdWVycG8gZGVsIGVycm9yOicsIGVycm9yVGV4dCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dvcmRQcmVzcyBQcm94eSAtIE5vIHNlIHB1ZG8gbGVlciBlbCBjdWVycG8gZGVsIGVycm9yJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbih7IFxuICAgICAgICBlcnJvcjogYEVycm9yIGFsIG9idGVuZXIgZGF0b3MgZGUgV29yZFByZXNzOiAke3Jlc3BvbnNlLnN0YXR1c31gLFxuICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gT2J0ZW5lciBsb3MgZGF0b3MgZGUgbGEgcmVzcHVlc3RhXG4gICAgbGV0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgZGF0YSA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuICAgIFxuICAgIC8vIEVuIHByb2R1Y2Npw7NuLCBvYnRlbmVyIHRvZGFzIGxhcyBww6FnaW5hcyBzaSBoYXkgbcOhcyBkZSB1bmEgeSBubyBzZSBlc3BlY2lmaWPDsyB1bmEgcMOhZ2luYSBlc3BlY8OtZmljYVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nICYmIHRvdGFsUGFnZXMgPiAxICYmICFxdWVyeVBhcmFtcy5wYWdlKSB7XG4gICAgICBjb25zb2xlLmxvZyhgV29yZFByZXNzIFByb3h5IC0gT2J0ZW5pZW5kbyB0b2RhcyBsYXMgcMOhZ2luYXMgKCR7dG90YWxQYWdlc30gcMOhZ2luYXMgZW4gdG90YWwpYCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1BhZ2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogdG90YWxQYWdlcyAtIDEgfSwgKF8sIGkpID0+IGkgKyAyKTtcbiAgICAgIGNvbnN0IHBhZ2VQcm9taXNlcyA9IHJlbWFpbmluZ1BhZ2VzLm1hcChhc3luYyAocGFnZSkgPT4ge1xuICAgICAgICBjb25zdCBwYWdlVXJsID0gYCR7dXJsfSR7dXJsLmluY2x1ZGVzKCc/JykgPyAnJicgOiAnPyd9cGFnZT0ke3BhZ2V9YDtcbiAgICAgICAgY29uc3QgcGFnZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkocGFnZVVybCwge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyBcbiAgICAgICAgICAgICAgPyAncHVibGljLCBtYXgtYWdlPTYwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwMCdcbiAgICAgICAgICAgICAgOiAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnLFxuICAgICAgICAgICAgJ1ByYWdtYSc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB1bmRlZmluZWQgOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgJ0V4cGlyZXMnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gdW5kZWZpbmVkIDogJzAnLFxuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IEdvemFNYWRyaWRCb3QvMS4wKScsXG4gICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcGFnZVJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgb2J0ZW5lciBww6FnaW5hICR7cGFnZX06ICR7cGFnZVJlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBhZ2VEYXRhID0gYXdhaXQgcGFnZVJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGFnZURhdGEpID8gcGFnZURhdGEgOiBbcGFnZURhdGFdO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxEYXRhID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHBhZ2VQcm9taXNlcyk7XG4gICAgICBhZGRpdGlvbmFsRGF0YS5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZnVsZmlsbGVkJykge1xuICAgICAgICAgIGRhdGEucHVzaCguLi5yZXN1bHQudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIG9idGVuZXIgcMOhZ2luYSBhZGljaW9uYWw6JywgcmVzdWx0LnJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgV29yZFByZXNzIFByb3h5IC0gVG90YWwgZGUgZWxlbWVudG9zIG9idGVuaWRvczogJHtkYXRhLmxlbmd0aH1gKTtcbiAgICBcbiAgICBpZiAodG90YWxJdGVtcykge1xuICAgICAgcmVzLnNldEhlYWRlcignWC1XUC1Ub3RhbCcsIHRvdGFsSXRlbXMpO1xuICAgIH1cbiAgICBpZiAodG90YWxQYWdlcykge1xuICAgICAgcmVzLnNldEhlYWRlcignWC1XUC1Ub3RhbFBhZ2VzJywgdG90YWxQYWdlcyk7XG4gICAgfVxuICAgIFxuICAgIC8vIERldm9sdmVyIGxvcyBkYXRvc1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBlbCBwcm94eSBkZSBXb3JkUHJlc3M6JywgZXJyb3IpO1xuICAgIFxuICAgIC8vIEVuIGNhc28gZGUgZXJyb3IgaXJyZWN1cGVyYWJsZSwgZGV2b2x2ZXIgdW4gYXJyYXkgdmFjw61vXG4gICAgY29uc29sZS5sb2coJ1dvcmRQcmVzcyBQcm94eSAtIEVycm9yIGlycmVjdXBlcmFibGUsIGRldm9sdmllbmRvIGFycmF5IHZhY8OtbycpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihbXSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk1BWF9SRVRSSUVTIiwiSU5JVElBTF9SRVRSWV9ERUxBWSIsIk1BWF9SRVRSWV9ERUxBWSIsIkVYUE9ORU5USUFMX0JBQ0tPRkYiLCJNQVhfUEVSX1BBR0UiLCJUSU1FT1VUIiwicHJvY2VzcyIsInNsZWVwIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmZXRjaFdpdGhSZXRyeSIsInVybCIsIm9wdGlvbnMiLCJyZXRyaWVzIiwiYXR0ZW1wdCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJhYm9ydCIsInJlc3BvbnNlIiwiZmV0Y2giLCJzaWduYWwiLCJoZWFkZXJzIiwidW5kZWZpbmVkIiwiY2xlYXJUaW1lb3V0Iiwic3RhdHVzIiwiZGVsYXkiLCJNYXRoIiwibWluIiwicG93IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwibmFtZSIsIkVycm9yIiwibWVzc2FnZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXRIZWFkZXIiLCJtZXRob2QiLCJlbmQiLCJwYXRoIiwiZW5kcG9pbnQiLCJxdWVyeVBhcmFtcyIsInF1ZXJ5IiwiV0NfQ09OU1VNRVJfS0VZIiwiZW52IiwiTkVYVF9QVUJMSUNfV09PX0NPTU1FUkNFX0tFWSIsIldDX0NPTlNVTUVSX1NFQ1JFVCIsIk5FWFRfUFVCTElDX1dPT19DT01NRVJDRV9TRUNSRVQiLCJiYXNlVXJsIiwicGVyX3BhZ2UiLCJORVhUX1BVQkxJQ19XUF9BUElfVVJMIiwicXVlcnlTdHJpbmciLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwia2V5IiwidmFsdWUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiTkVYVF9QVUJMSUNfV0NfQVBJX1VSTCIsImZvckVhY2giLCJzdGF0dXNUZXh0IiwiZnJvbUVudHJpZXMiLCJ0b3RhbFBhZ2VzIiwicGFyc2VJbnQiLCJnZXQiLCJ0b3RhbEl0ZW1zIiwib2siLCJqc29uIiwiZXJyb3JUZXh0IiwidGV4dCIsImUiLCJkYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwicGFnZSIsInJlbWFpbmluZ1BhZ2VzIiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwicGFnZVByb21pc2VzIiwicGFnZVVybCIsImluY2x1ZGVzIiwicGFnZVJlc3BvbnNlIiwicGFnZURhdGEiLCJhZGRpdGlvbmFsRGF0YSIsImFsbFNldHRsZWQiLCJyZXN1bHQiLCJwdXNoIiwicmVhc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/wordpress-proxy.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();