"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/wordpress-proxy";
exports.ids = ["pages/api/wordpress-proxy"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/wordpress-proxy.js */ \"(api)/./src/pages/api/wordpress-proxy.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/wordpress-proxy\",\n        pathname: \"/api/wordpress-proxy\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_wordpress_proxy_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRndvcmRwcmVzcy1wcm94eSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGd29yZHByZXNzLXByb3h5LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQytEO0FBQy9EO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw4REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsOERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvP2M3M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvd29yZHByZXNzLXByb3h5LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvd29yZHByZXNzLXByb3h5XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvd29yZHByZXNzLXByb3h5XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/wordpress-proxy.js":
/*!******************************************!*\
  !*** ./src/pages/api/wordpress-proxy.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/**\n * API Proxy para WordPress con reintentos y obtención de todos los elementos en producción\n */ const MAX_RETRIES = 10;\nconst INITIAL_RETRY_DELAY = 2000;\nconst MAX_RETRY_DELAY = 60000;\nconst EXPONENTIAL_BACKOFF = true;\nconst MAX_PER_PAGE = 100;\nconst TIMEOUT =  false ? 0 : 120000; // 3 minutos en producción, 2 minutos en desarrollo\nconst sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst fetchWithRetry = async (url, options, retries = MAX_RETRIES, attempt = 1)=>{\n    try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), TIMEOUT);\n        const response = await fetch(url, {\n            ...options,\n            signal: controller.signal,\n            headers: {\n                ...options.headers,\n                \"User-Agent\": \"Mozilla/5.0 (compatible; GozaMadridBot/1.0)\",\n                \"Accept\": \"application/json\",\n                \"Cache-Control\":  false ? 0 : \"no-cache, no-store, must-revalidate\",\n                \"Pragma\":  false ? 0 : \"no-cache\",\n                \"Expires\":  false ? 0 : \"0\"\n            }\n        });\n        clearTimeout(timeoutId);\n        // Si es un error 503, 502, 504 o 404, intentar de nuevo con backoff exponencial\n        if ((response.status === 503 || response.status === 502 || response.status === 504 || response.status === 404) && retries > 0) {\n            const delay = EXPONENTIAL_BACKOFF ? Math.min(INITIAL_RETRY_DELAY * Math.pow(2, attempt - 1), MAX_RETRY_DELAY) : INITIAL_RETRY_DELAY;\n            console.log(`[WordPress Proxy] Error ${response.status} - Reintentando (${retries} intentos restantes) después de ${delay}ms...`);\n            await sleep(delay);\n            return fetchWithRetry(url, options, retries - 1, attempt + 1);\n        }\n        return response;\n    } catch (error) {\n        if (error.name === \"AbortError\") {\n            console.error(\"[WordPress Proxy] Timeout - La solicitud tard\\xf3 demasiado\");\n            if (retries > 0) {\n                console.log(`[WordPress Proxy] Reintentando después del timeout...`);\n                return fetchWithRetry(url, options, retries - 1, attempt + 1);\n            }\n            throw new Error(\"Timeout - La solicitud tard\\xf3 demasiado\");\n        }\n        if (retries > 0) {\n            const delay = EXPONENTIAL_BACKOFF ? Math.min(INITIAL_RETRY_DELAY * Math.pow(2, attempt - 1), MAX_RETRY_DELAY) : INITIAL_RETRY_DELAY;\n            console.log(`[WordPress Proxy] Error en la petición: ${error.message} - Reintentando (${retries} intentos restantes) después de ${delay}ms...`);\n            await sleep(delay);\n            return fetchWithRetry(url, options, retries - 1, attempt + 1);\n        }\n        throw error;\n    }\n};\nasync function handler(req, res) {\n    // Configurar headers CORS y caché para producción\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    if (req.method === \"OPTIONS\") {\n        return res.status(200).end();\n    }\n    if (false) {} else {\n        res.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n    }\n    const { path, endpoint, ...queryParams } = req.query;\n    console.log(\"WordPress Proxy - Par\\xe1metros recibidos:\", {\n        path,\n        endpoint,\n        queryParams\n    });\n    // Claves de API de WooCommerce\n    const WC_CONSUMER_KEY = \"ck_75c5940bfae6a9dd63f1489da71e43b576999633\" || 0;\n    const WC_CONSUMER_SECRET = \"cs_f194d11b41ca92cdd356145705fede711cd233e5\" || 0;\n    // Determinar qué API usar (WooCommerce o WordPress)\n    let baseUrl = \"https://realestategozamadrid.com/wp-json/\";\n    let url = \"\";\n    // En producción, siempre intentamos obtener el máximo de elementos por página\n    if (false) {}\n    if (endpoint === \"wp\") {\n        // API de WordPress (posts, etc.)\n        baseUrl += \"wp/v2/\";\n        url = `${baseUrl}${path || \"posts\"}`;\n        // Añadir parámetros de consulta\n        const queryString = Object.entries(queryParams).map(([key, value])=>`${key}=${encodeURIComponent(value)}`).join(\"&\");\n        if (queryString) {\n            url += `?${queryString}`;\n        }\n    } else {\n        // API de WooCommerce (productos)\n        baseUrl += \"wc/v3/\";\n        url = `${baseUrl}${path || \"products\"}`;\n        // Añadir las claves de API\n        url += `?consumer_key=${WC_CONSUMER_KEY}&consumer_secret=${WC_CONSUMER_SECRET}`;\n        // Añadir otros parámetros de consulta\n        Object.entries(queryParams).forEach(([key, value])=>{\n            url += `&${key}=${encodeURIComponent(value)}`;\n        });\n    }\n    console.log(\"WordPress Proxy - URL construida:\", url);\n    try {\n        // Hacer la solicitud a la API de WordPress con reintentos\n        const response = await fetchWithRetry(url, {\n            headers: {\n                \"Cache-Control\":  false ? 0 : \"no-cache, no-store, must-revalidate\",\n                \"Pragma\":  false ? 0 : \"no-cache\",\n                \"Expires\":  false ? 0 : \"0\",\n                \"User-Agent\": \"Mozilla/5.0 (compatible; GozaMadridBot/1.0)\",\n                \"Accept\": \"application/json\"\n            }\n        });\n        console.log(\"WordPress Proxy - Respuesta recibida:\", {\n            status: response.status,\n            statusText: response.statusText,\n            headers: Object.fromEntries([\n                ...response.headers.entries()\n            ])\n        });\n        // Obtener los headers para el total de páginas\n        const totalPages = parseInt(response.headers.get(\"X-WP-TotalPages\") || \"1\");\n        const totalItems = parseInt(response.headers.get(\"X-WP-Total\") || \"0\");\n        // Si después de los reintentos aún tenemos un error\n        if (!response.ok) {\n            console.error(`[WordPress Proxy] Error en la respuesta después de ${MAX_RETRIES} intentos: ${response.status} ${response.statusText}`);\n            // Si es un error 503, 502 o 404, devolver una respuesta vacía\n            if (response.status === 503 || response.status === 502 || response.status === 404) {\n                console.log(\"[WordPress Proxy] Servicio no disponible despu\\xe9s de todos los reintentos, devolviendo array vac\\xedo\");\n                return res.status(200).json([]);\n            }\n            // Para otros errores, intentar leer el cuerpo del error\n            try {\n                const errorText = await response.text();\n                console.error(\"WordPress Proxy - Cuerpo del error:\", errorText);\n            } catch (e) {\n                console.error(\"WordPress Proxy - No se pudo leer el cuerpo del error\");\n            }\n            return res.status(response.status).json({\n                error: `Error al obtener datos de WordPress: ${response.status}`,\n                message: response.statusText\n            });\n        }\n        // Obtener los datos de la respuesta\n        let data = await response.json();\n        data = Array.isArray(data) ? data : [\n            data\n        ];\n        // En producción, obtener todas las páginas si hay más de una y no se especificó una página específica\n        if (false) {}\n        console.log(`WordPress Proxy - Total de elementos obtenidos: ${data.length}`);\n        if (totalItems) {\n            res.setHeader(\"X-WP-Total\", totalItems);\n        }\n        if (totalPages) {\n            res.setHeader(\"X-WP-TotalPages\", totalPages);\n        }\n        // Devolver los datos\n        return res.status(200).json(data);\n    } catch (error) {\n        console.error(\"Error en el proxy de WordPress:\", error);\n        // En caso de error irrecuperable, devolver un array vacío\n        console.log(\"WordPress Proxy - Error irrecuperable, devolviendo array vac\\xedo\");\n        return res.status(200).json([]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNoQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvcGFnZXMvYXBpL3dvcmRwcmVzcy1wcm94eS5qcz8zNmM4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQVBJIFByb3h5IHBhcmEgV29yZFByZXNzIGNvbiByZWludGVudG9zIHkgb2J0ZW5jacOzbiBkZSB0b2RvcyBsb3MgZWxlbWVudG9zIGVuIHByb2R1Y2Npw7NuXG4gKi9cblxuY29uc3QgTUFYX1JFVFJJRVMgPSAxMDtcbmNvbnN0IElOSVRJQUxfUkVUUllfREVMQVkgPSAyMDAwO1xuY29uc3QgTUFYX1JFVFJZX0RFTEFZID0gNjAwMDA7XG5jb25zdCBFWFBPTkVOVElBTF9CQUNLT0ZGID0gdHJ1ZTtcbmNvbnN0IE1BWF9QRVJfUEFHRSA9IDEwMDtcbmNvbnN0IFRJTUVPVVQgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gMTgwMDAwIDogMTIwMDAwOyAvLyAzIG1pbnV0b3MgZW4gcHJvZHVjY2nDs24sIDIgbWludXRvcyBlbiBkZXNhcnJvbGxvXG5cbmNvbnN0IHNsZWVwID0gKG1zKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgZmV0Y2hXaXRoUmV0cnkgPSBhc3luYyAodXJsLCBvcHRpb25zLCByZXRyaWVzID0gTUFYX1JFVFJJRVMsIGF0dGVtcHQgPSAxKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgVElNRU9VVCk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IEdvemFNYWRyaWRCb3QvMS4wKScsXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdDYWNoZS1Db250cm9sJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyBcbiAgICAgICAgICA/ICdwdWJsaWMsIG1heC1hZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9NjAwJ1xuICAgICAgICAgIDogJ25vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlJyxcbiAgICAgICAgJ1ByYWdtYSc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB1bmRlZmluZWQgOiAnbm8tY2FjaGUnLFxuICAgICAgICAnRXhwaXJlcyc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB1bmRlZmluZWQgOiAnMCdcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIFxuICAgIC8vIFNpIGVzIHVuIGVycm9yIDUwMywgNTAyLCA1MDQgbyA0MDQsIGludGVudGFyIGRlIG51ZXZvIGNvbiBiYWNrb2ZmIGV4cG9uZW5jaWFsXG4gICAgaWYgKChyZXNwb25zZS5zdGF0dXMgPT09IDUwMyB8fCByZXNwb25zZS5zdGF0dXMgPT09IDUwMiB8fCByZXNwb25zZS5zdGF0dXMgPT09IDUwNCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQwNCkgJiYgcmV0cmllcyA+IDApIHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gRVhQT05FTlRJQUxfQkFDS09GRiBcbiAgICAgICAgPyBNYXRoLm1pbihJTklUSUFMX1JFVFJZX0RFTEFZICogTWF0aC5wb3coMiwgYXR0ZW1wdCAtIDEpLCBNQVhfUkVUUllfREVMQVkpXG4gICAgICAgIDogSU5JVElBTF9SRVRSWV9ERUxBWTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFtXb3JkUHJlc3MgUHJveHldIEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfSAtIFJlaW50ZW50YW5kbyAoJHtyZXRyaWVzfSBpbnRlbnRvcyByZXN0YW50ZXMpIGRlc3B1w6lzIGRlICR7ZGVsYXl9bXMuLi5gKTtcbiAgICAgIGF3YWl0IHNsZWVwKGRlbGF5KTtcbiAgICAgIHJldHVybiBmZXRjaFdpdGhSZXRyeSh1cmwsIG9wdGlvbnMsIHJldHJpZXMgLSAxLCBhdHRlbXB0ICsgMSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbV29yZFByZXNzIFByb3h5XSBUaW1lb3V0IC0gTGEgc29saWNpdHVkIHRhcmTDsyBkZW1hc2lhZG8nKTtcbiAgICAgIGlmIChyZXRyaWVzID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgW1dvcmRQcmVzcyBQcm94eV0gUmVpbnRlbnRhbmRvIGRlc3B1w6lzIGRlbCB0aW1lb3V0Li4uYCk7XG4gICAgICAgIHJldHVybiBmZXRjaFdpdGhSZXRyeSh1cmwsIG9wdGlvbnMsIHJldHJpZXMgLSAxLCBhdHRlbXB0ICsgMSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbWVvdXQgLSBMYSBzb2xpY2l0dWQgdGFyZMOzIGRlbWFzaWFkbycpO1xuICAgIH1cblxuICAgIGlmIChyZXRyaWVzID4gMCkge1xuICAgICAgY29uc3QgZGVsYXkgPSBFWFBPTkVOVElBTF9CQUNLT0ZGIFxuICAgICAgICA/IE1hdGgubWluKElOSVRJQUxfUkVUUllfREVMQVkgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSksIE1BWF9SRVRSWV9ERUxBWSlcbiAgICAgICAgOiBJTklUSUFMX1JFVFJZX0RFTEFZO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgW1dvcmRQcmVzcyBQcm94eV0gRXJyb3IgZW4gbGEgcGV0aWNpw7NuOiAke2Vycm9yLm1lc3NhZ2V9IC0gUmVpbnRlbnRhbmRvICgke3JldHJpZXN9IGludGVudG9zIHJlc3RhbnRlcykgZGVzcHXDqXMgZGUgJHtkZWxheX1tcy4uLmApO1xuICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpO1xuICAgICAgcmV0dXJuIGZldGNoV2l0aFJldHJ5KHVybCwgb3B0aW9ucywgcmV0cmllcyAtIDEsIGF0dGVtcHQgKyAxKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8gQ29uZmlndXJhciBoZWFkZXJzIENPUlMgeSBjYWNow6kgcGFyYSBwcm9kdWNjacOzblxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgT1BUSU9OUycpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicpO1xuICBcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuZW5kKCk7XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHVibGljLCBtYXgtYWdlPTYwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwMCcpO1xuICB9IGVsc2Uge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgfVxuXG4gIGNvbnN0IHsgcGF0aCwgZW5kcG9pbnQsIC4uLnF1ZXJ5UGFyYW1zIH0gPSByZXEucXVlcnk7XG4gIFxuICBjb25zb2xlLmxvZygnV29yZFByZXNzIFByb3h5IC0gUGFyw6FtZXRyb3MgcmVjaWJpZG9zOicsIHsgcGF0aCwgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0pO1xuICBcbiAgLy8gQ2xhdmVzIGRlIEFQSSBkZSBXb29Db21tZXJjZVxuICBjb25zdCBXQ19DT05TVU1FUl9LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19XT09fQ09NTUVSQ0VfS0VZIHx8ICdja183NWM1OTQwYmZhZTZhOWRkNjNmMTQ4OWRhNzFlNDNiNTc2OTk5NjMzJztcbiAgY29uc3QgV0NfQ09OU1VNRVJfU0VDUkVUID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfV09PX0NPTU1FUkNFX1NFQ1JFVCB8fCAnY3NfZjE5NGQxMWI0MWNhOTJjZGQzNTYxNDU3MDVmZWRlNzExY2QyMzNlNSc7XG4gIFxuICAvLyBEZXRlcm1pbmFyIHF1w6kgQVBJIHVzYXIgKFdvb0NvbW1lcmNlIG8gV29yZFByZXNzKVxuICBsZXQgYmFzZVVybCA9ICdodHRwczovL3JlYWxlc3RhdGVnb3phbWFkcmlkLmNvbS93cC1qc29uLyc7XG4gIGxldCB1cmwgPSAnJztcbiAgXG4gIC8vIEVuIHByb2R1Y2Npw7NuLCBzaWVtcHJlIGludGVudGFtb3Mgb2J0ZW5lciBlbCBtw6F4aW1vIGRlIGVsZW1lbnRvcyBwb3IgcMOhZ2luYVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiAhcXVlcnlQYXJhbXMucGVyX3BhZ2UpIHtcbiAgICBxdWVyeVBhcmFtcy5wZXJfcGFnZSA9IE1BWF9QRVJfUEFHRTtcbiAgfVxuICBcbiAgaWYgKGVuZHBvaW50ID09PSAnd3AnKSB7XG4gICAgLy8gQVBJIGRlIFdvcmRQcmVzcyAocG9zdHMsIGV0Yy4pXG4gICAgYmFzZVVybCArPSAnd3AvdjIvJztcbiAgICB1cmwgPSBgJHtiYXNlVXJsfSR7cGF0aCB8fCAncG9zdHMnfWA7XG4gICAgXG4gICAgLy8gQcOxYWRpciBwYXLDoW1ldHJvcyBkZSBjb25zdWx0YVxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gT2JqZWN0LmVudHJpZXMocXVlcnlQYXJhbXMpXG4gICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWApXG4gICAgICAuam9pbignJicpO1xuICAgIFxuICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgdXJsICs9IGA/JHtxdWVyeVN0cmluZ31gO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBBUEkgZGUgV29vQ29tbWVyY2UgKHByb2R1Y3RvcylcbiAgICBiYXNlVXJsICs9ICd3Yy92My8nO1xuICAgIHVybCA9IGAke2Jhc2VVcmx9JHtwYXRoIHx8ICdwcm9kdWN0cyd9YDtcbiAgICBcbiAgICAvLyBBw7FhZGlyIGxhcyBjbGF2ZXMgZGUgQVBJXG4gICAgdXJsICs9IGA/Y29uc3VtZXJfa2V5PSR7V0NfQ09OU1VNRVJfS0VZfSZjb25zdW1lcl9zZWNyZXQ9JHtXQ19DT05TVU1FUl9TRUNSRVR9YDtcbiAgICBcbiAgICAvLyBBw7FhZGlyIG90cm9zIHBhcsOhbWV0cm9zIGRlIGNvbnN1bHRhXG4gICAgT2JqZWN0LmVudHJpZXMocXVlcnlQYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgdXJsICs9IGAmJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xuICAgIH0pO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZygnV29yZFByZXNzIFByb3h5IC0gVVJMIGNvbnN0cnVpZGE6JywgdXJsKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gSGFjZXIgbGEgc29saWNpdHVkIGEgbGEgQVBJIGRlIFdvcmRQcmVzcyBjb24gcmVpbnRlbnRvc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkodXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDYWNoZS1Db250cm9sJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyBcbiAgICAgICAgICA/ICdwdWJsaWMsIG1heC1hZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9NjAwJ1xuICAgICAgICAgIDogJ25vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlJyxcbiAgICAgICAgJ1ByYWdtYSc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB1bmRlZmluZWQgOiAnbm8tY2FjaGUnLFxuICAgICAgICAnRXhwaXJlcyc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB1bmRlZmluZWQgOiAnMCcsXG4gICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBHb3phTWFkcmlkQm90LzEuMCknLFxuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1dvcmRQcmVzcyBQcm94eSAtIFJlc3B1ZXN0YSByZWNpYmlkYTonLCB7XG4gICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMoWy4uLnJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpXSlcbiAgICB9KTtcbiAgICBcbiAgICAvLyBPYnRlbmVyIGxvcyBoZWFkZXJzIHBhcmEgZWwgdG90YWwgZGUgcMOhZ2luYXNcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVycy5nZXQoJ1gtV1AtVG90YWxQYWdlcycpIHx8ICcxJyk7XG4gICAgY29uc3QgdG90YWxJdGVtcyA9IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdYLVdQLVRvdGFsJykgfHwgJzAnKTtcbiAgICBcbiAgICAvLyBTaSBkZXNwdcOpcyBkZSBsb3MgcmVpbnRlbnRvcyBhw7puIHRlbmVtb3MgdW4gZXJyb3JcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbV29yZFByZXNzIFByb3h5XSBFcnJvciBlbiBsYSByZXNwdWVzdGEgZGVzcHXDqXMgZGUgJHtNQVhfUkVUUklFU30gaW50ZW50b3M6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICBcbiAgICAgIC8vIFNpIGVzIHVuIGVycm9yIDUwMywgNTAyIG8gNDA0LCBkZXZvbHZlciB1bmEgcmVzcHVlc3RhIHZhY8OtYVxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAzIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAyIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbV29yZFByZXNzIFByb3h5XSBTZXJ2aWNpbyBubyBkaXNwb25pYmxlIGRlc3B1w6lzIGRlIHRvZG9zIGxvcyByZWludGVudG9zLCBkZXZvbHZpZW5kbyBhcnJheSB2YWPDrW8nKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKFtdKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFyYSBvdHJvcyBlcnJvcmVzLCBpbnRlbnRhciBsZWVyIGVsIGN1ZXJwbyBkZWwgZXJyb3JcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignV29yZFByZXNzIFByb3h5IC0gQ3VlcnBvIGRlbCBlcnJvcjonLCBlcnJvclRleHQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdXb3JkUHJlc3MgUHJveHkgLSBObyBzZSBwdWRvIGxlZXIgZWwgY3VlcnBvIGRlbCBlcnJvcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24oeyBcbiAgICAgICAgZXJyb3I6IGBFcnJvciBhbCBvYnRlbmVyIGRhdG9zIGRlIFdvcmRQcmVzczogJHtyZXNwb25zZS5zdGF0dXN9YCxcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2Uuc3RhdHVzVGV4dFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIE9idGVuZXIgbG9zIGRhdG9zIGRlIGxhIHJlc3B1ZXN0YVxuICAgIGxldCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGRhdGEgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgICBcbiAgICAvLyBFbiBwcm9kdWNjacOzbiwgb2J0ZW5lciB0b2RhcyBsYXMgcMOhZ2luYXMgc2kgaGF5IG3DoXMgZGUgdW5hIHkgbm8gc2UgZXNwZWNpZmljw7MgdW5hIHDDoWdpbmEgZXNwZWPDrWZpY2FcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiB0b3RhbFBhZ2VzID4gMSAmJiAhcXVlcnlQYXJhbXMucGFnZSkge1xuICAgICAgY29uc29sZS5sb2coYFdvcmRQcmVzcyBQcm94eSAtIE9idGVuaWVuZG8gdG9kYXMgbGFzIHDDoWdpbmFzICgke3RvdGFsUGFnZXN9IHDDoWdpbmFzIGVuIHRvdGFsKWApO1xuICAgICAgXG4gICAgICBjb25zdCByZW1haW5pbmdQYWdlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRvdGFsUGFnZXMgLSAxIH0sIChfLCBpKSA9PiBpICsgMik7XG4gICAgICBjb25zdCBwYWdlUHJvbWlzZXMgPSByZW1haW5pbmdQYWdlcy5tYXAoYXN5bmMgKHBhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgcGFnZVVybCA9IGAke3VybH0ke3VybC5pbmNsdWRlcygnPycpID8gJyYnIDogJz8nfXBhZ2U9JHtwYWdlfWA7XG4gICAgICAgIGNvbnN0IHBhZ2VSZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KHBhZ2VVcmwsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgXG4gICAgICAgICAgICAgID8gJ3B1YmxpYywgbWF4LWFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MDAnXG4gICAgICAgICAgICAgIDogJ25vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlJyxcbiAgICAgICAgICAgICdQcmFnbWEnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gdW5kZWZpbmVkIDogJ25vLWNhY2hlJyxcbiAgICAgICAgICAgICdFeHBpcmVzJzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IHVuZGVmaW5lZCA6ICcwJyxcbiAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBHb3phTWFkcmlkQm90LzEuMCknLFxuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXBhZ2VSZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIG9idGVuZXIgcMOhZ2luYSAke3BhZ2V9OiAke3BhZ2VSZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWdlRGF0YSA9IGF3YWl0IHBhZ2VSZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHBhZ2VEYXRhKSA/IHBhZ2VEYXRhIDogW3BhZ2VEYXRhXTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChwYWdlUHJvbWlzZXMpO1xuICAgICAgYWRkaXRpb25hbERhdGEuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgICAgICBkYXRhLnB1c2goLi4ucmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBvYnRlbmVyIHDDoWdpbmEgYWRpY2lvbmFsOicsIHJlc3VsdC5yZWFzb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYFdvcmRQcmVzcyBQcm94eSAtIFRvdGFsIGRlIGVsZW1lbnRvcyBvYnRlbmlkb3M6ICR7ZGF0YS5sZW5ndGh9YCk7XG4gICAgXG4gICAgaWYgKHRvdGFsSXRlbXMpIHtcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ1gtV1AtVG90YWwnLCB0b3RhbEl0ZW1zKTtcbiAgICB9XG4gICAgaWYgKHRvdGFsUGFnZXMpIHtcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ1gtV1AtVG90YWxQYWdlcycsIHRvdGFsUGFnZXMpO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZXZvbHZlciBsb3MgZGF0b3NcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gZWwgcHJveHkgZGUgV29yZFByZXNzOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBFbiBjYXNvIGRlIGVycm9yIGlycmVjdXBlcmFibGUsIGRldm9sdmVyIHVuIGFycmF5IHZhY8Otb1xuICAgIGNvbnNvbGUubG9nKCdXb3JkUHJlc3MgUHJveHkgLSBFcnJvciBpcnJlY3VwZXJhYmxlLCBkZXZvbHZpZW5kbyBhcnJheSB2YWPDrW8nKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oW10pO1xuICB9XG59ICJdLCJuYW1lcyI6WyJNQVhfUkVUUklFUyIsIklOSVRJQUxfUkVUUllfREVMQVkiLCJNQVhfUkVUUllfREVMQVkiLCJFWFBPTkVOVElBTF9CQUNLT0ZGIiwiTUFYX1BFUl9QQUdFIiwiVElNRU9VVCIsInByb2Nlc3MiLCJzbGVlcCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZmV0Y2hXaXRoUmV0cnkiLCJ1cmwiLCJvcHRpb25zIiwicmV0cmllcyIsImF0dGVtcHQiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwiYWJvcnQiLCJyZXNwb25zZSIsImZldGNoIiwic2lnbmFsIiwiaGVhZGVycyIsInVuZGVmaW5lZCIsImNsZWFyVGltZW91dCIsInN0YXR1cyIsImRlbGF5IiwiTWF0aCIsIm1pbiIsInBvdyIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm5hbWUiLCJFcnJvciIsIm1lc3NhZ2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwiZW5kIiwicGF0aCIsImVuZHBvaW50IiwicXVlcnlQYXJhbXMiLCJxdWVyeSIsIldDX0NPTlNVTUVSX0tFWSIsImVudiIsIk5FWFRfUFVCTElDX1dPT19DT01NRVJDRV9LRVkiLCJXQ19DT05TVU1FUl9TRUNSRVQiLCJORVhUX1BVQkxJQ19XT09fQ09NTUVSQ0VfU0VDUkVUIiwiYmFzZVVybCIsInBlcl9wYWdlIiwicXVlcnlTdHJpbmciLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwia2V5IiwidmFsdWUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwiZm9yRWFjaCIsInN0YXR1c1RleHQiLCJmcm9tRW50cmllcyIsInRvdGFsUGFnZXMiLCJwYXJzZUludCIsImdldCIsInRvdGFsSXRlbXMiLCJvayIsImpzb24iLCJlcnJvclRleHQiLCJ0ZXh0IiwiZSIsImRhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJwYWdlIiwicmVtYWluaW5nUGFnZXMiLCJmcm9tIiwibGVuZ3RoIiwiXyIsImkiLCJwYWdlUHJvbWlzZXMiLCJwYWdlVXJsIiwiaW5jbHVkZXMiLCJwYWdlUmVzcG9uc2UiLCJwYWdlRGF0YSIsImFkZGl0aW9uYWxEYXRhIiwiYWxsU2V0dGxlZCIsInJlc3VsdCIsInB1c2giLCJyZWFzb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/wordpress-proxy.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fwordpress-proxy&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fwordpress-proxy.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();