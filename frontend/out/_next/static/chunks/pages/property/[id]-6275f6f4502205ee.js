(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{2036:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/property/[id]",function(){return t(951)}])},8463:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(4848);t(6540);var l=t(7392);function r(e){let{children:a}=e;return(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.1},transition:{duration:.5},children:a})}},1331:(e,a,t)=>{"use strict";t.d(a,{dZ:()=>n,g6:()=>r,nE:()=>l,qz:()=>i,xc:()=>o});let s="http://localhost:3000";async function l(){let e=await fetch("".concat(s,"/prefix"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=e.headers.get("content-type");if(a&&a.includes("application/json"))return await e.json();throw Error("Response is not JSON")}async function r(){let e=await fetch("".concat(s,"/blog"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=e.headers.get("content-type");if(a&&a.includes("application/json"))return await e.json();throw Error("Response is not JSON")}async function n(e){let a=await fetch("".concat(s,"/blog/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return await a.json()}async function o(){let e=await fetch("".concat(s,"/property"));if(!e.ok)throw Error((await e.json()).message||"Error al obtener los property posts");return e.json()}async function i(e){let a=await fetch("".concat(s,"/property/").concat(e));if(!a.ok)throw Error((await a.json()).message||"Error al obtener el property post");return a.json()}},951:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var s=t(4848),l=t(6540),r=t(121),n=t(3877),o=t(7037),i=t(1106),c=t.n(i),d=t(9965),m=t.n(d),x=t(8463),u=t(2550);t(7571);var p=t(6297),h=t(7392),g=t(4343),f=t(8581),b=t(5414),j=t(2636);function v(e){var a;let{property:t}=e,[i,d]=(0,l.useState)(0),[v,y]=(0,l.useState)(!1),[N,w]=(0,l.useState)(null),[k,E]=(0,l.useState)(null),C=(0,l.useRef)(null),[P,T]=(0,l.useState)(!1),[S,D]=(0,l.useState)(null),A=(0,l.useRef)(null),[I,_]=(0,l.useState)(""),[z,H]=(0,l.useState)(""),[O,L]=(0,l.useState)("");if((0,l.useEffect)(()=>{function e(e){C.current&&!C.current.contains(e.target)&&y(!1)}return v&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[v]),(0,l.useEffect)(()=>{function e(e){A.current&&!A.current.contains(e.target)&&T(!1)}return P&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[P]),!t.images||0===t.images.length)return(0,s.jsx)("div",{className:"relative w-full h-96 overflow-hidden rounded-lg shadow-md mb-6",children:(0,s.jsx)(m(),{src:"/placeholder.png",alt:"Placeholder",fill:!0,style:{objectFit:"cover"}})});let M=Array.from({length:10},(e,a)=>(0,g.a)((0,f.g)(new Date,0),a+9)),F=async()=>{if(S&&I&&z&&O)try{let e=await fetch("".concat("http://localhost:3000","/api/notifications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"offer",data:{offerAmount:S.value,originalPrice:t.price,propertyId:t.id,propertyAddress:t.address,contactInfo:{email:I,name:z,phone:O}}})}),a=await e.json();if(a.success)j.oR.success("Oferta enviada correctamente"),T(!1),_(""),H(""),L(""),D(null);else throw Error(a.message)}catch(e){j.oR.error("Error al enviar la oferta"),console.error("Error:",e)}};return(0,s.jsxs)("div",{className:"relative w-full min-h-fit pb-32",children:[(0,s.jsx)("div",{className:"fixed inset-0 z-0 opacity-100 h-full",style:{backgroundImage:"url('/gozamadridwp.jpg')",backgroundAttachment:"fixed"}}),(0,s.jsx)(x.A,{children:(0,s.jsxs)("article",{className:"prose max-w-none relative z-10",children:[(0,s.jsx)("div",{className:"container-fluid relative px-3",children:(0,s.jsxs)("div",{className:"layout-specing",children:[(0,s.jsx)("div",{className:"md:flex justify-center items-center",children:(0,s.jsx)("h5",{className:"text-3xl text-transparent bg-clip-text bg-gradient-to-b from-amarillo via-amarillo to-black  font-semibold",children:"Detalles de la propiedad"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"relative w-full md:w-3/4 h-96 overflow-hidden rounded-lg shadow-md",children:(0,s.jsx)(m(),{src:t.images[0].src,alt:t.images[0].alt||"Imagen principal",fill:!0,style:{objectFit:"cover"}})}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,s.jsx)("div",{className:"flex flex-row gap-2 overflow-x-auto mr-[5vw]",children:t.images.map((e,a)=>(0,s.jsx)("button",{onClick:()=>d(a),className:"w-24 h-24 border-2 rounded overflow-hidden ".concat(a===i?"border-green-600":"border-transparent"),children:(0,s.jsx)(m(),{src:e.src,alt:e.alt||"Miniatura ".concat(a+1),width:96,height:96,objectFit:"cover"})},a))}),(0,s.jsx)("div",{className:"relative w-[30vw] h-[40vh] ml-[5vw] overflow-hidden rounded-lg shadow-md",children:(0,s.jsx)(m(),{src:t.images[i].src,alt:t.images[i].alt||"Imagen seleccionada",fill:!0,style:{objectFit:"cover"}})})]})]}),(0,s.jsx)("div",{className:"mt-6 pb-20",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 transition-all duration-300 hover:shadow-xl",children:[(0,s.jsx)("h4",{className:"text-3xl font-semibold text-gray-800 mb-6",children:t.address}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6 py-8 border-t border-b border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(r.SPy,{className:"w-8 h-8 text-amarillo"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Superficie"}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[t.m2," m\xb2"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(n.yDJ,{className:"w-8 h-8 text-amarillo"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Habitaciones"}),(0,s.jsx)("p",{className:"text-lg font-semibold",children:t.rooms})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(o.DxY,{className:"w-8 h-8 text-amarillo"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Ba\xf1os"}),(0,s.jsx)("p",{className:"text-lg font-semibold",children:t.wc})]})]})]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h5",{className:"text-xl font-semibold mb-4",children:"Descripci\xf3n"}),(0,s.jsx)("p",{className:"text-gray-600 leading-relaxed",children:t.description})]}),(0,s.jsx)("div",{className:"mt-8 rounded-xl overflow-hidden shadow-lg",children:(0,s.jsx)("iframe",{width:"100%",height:"400",loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:"https://www.google.com/maps/embed/v1/place?key=AIzaSyAZAI0_oecmQkuzwZ4IM2H_NLynxD2Lkxo&q=".concat(encodeURIComponent(t.address)),title:"Mapa de ubicaci\xf3n",className:"rounded-xl"})})]})}),(0,s.jsxs)("div",{className:"lg:col-span-4 space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h5",{className:"text-2xl font-semibold text-gray-800",children:"Precio"}),(0,s.jsx)("span",{className:"bg-amarillo/20 text-black font-semibold px-4 py-2 rounded-full text-sm",children:"En venta"})]}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-gray-800 mb-6",children:[t.price.toLocaleString(),"€"]}),(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-xl mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Precio/m\xb2"}),(0,s.jsxs)("span",{className:"font-semibold",children:[t.priceM2||"N/A","€"]})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>y(!v),className:"group relative inline-flex items-center gap-2 overflow-hidden rounded-full bg-black/20 w-full px-4 sm:px-6 lg:px-8  py-2 sm:py-2.5 lg:py-3  transition-all duration-300 hover:bg-black/40 backdrop-blur-sm",children:[(0,s.jsx)("span",{className:"relative text-sm sm:text-base lg:text-lg font-semibold text-black whitespace-normal text-center w-full",children:"Agendar Visita"}),(0,s.jsx)("span",{className:"absolute bottom-0 left-0 h-1 w-full transform bg-gradient-to-r from-amarillo via-black to-amarillo transition-transform duration-300 group-hover:translate-x-full"})]}),(0,s.jsx)(p.N,{children:v&&(0,s.jsxs)(h.P.div,{ref:C,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute z-[500] mt-2 w-full bg-white rounded-xl shadow-xl p-4",style:{maxHeight:"80vh",overflowY:"auto",marginBottom:"2rem"},children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,s.jsx)(o.bfZ,{className:"mr-2 text-amarillo"}),"Selecciona una fecha"]}),(0,s.jsx)(u.Ay,{selected:N,onChange:e=>w(e),filterDate:e=>{let a=new Date;return a.setHours(0,0,0,0),e>=a&&0!==e.getDay()&&6!==e.getDay()},minDate:new Date,locale:b.A,dateFormat:"dd/MM/yyyy",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent",placeholderText:"Selecciona una fecha",inline:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",yearItemNumber:6})]}),N&&(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,s.jsx)(o.w_X,{className:"mr-2 text-amarillo"}),"Horario disponible"]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:M.map(e=>(0,s.jsxs)("button",{onClick:()=>E(e),className:"p-2 rounded-lg text-sm transition-all duration-300 \n                                                                                        ".concat((null==k?void 0:k.getTime())===e.getTime()?"bg-amarillo text-white":"bg-gray-100 hover:bg-gray-200"),children:[e.getHours(),":00"]},e.getTime()))})]}),N&&k&&(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,s.jsx)(o.maD,{className:"mr-2 text-amarillo"}),"Email de contacto"]}),(0,s.jsx)("input",{type:"email",value:I,onChange:e=>_(e.target.value),placeholder:"Introduce tu email",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent"})]}),N&&k&&I&&(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,s.jsx)(o.x$1,{className:"mr-2 text-amarillo"}),"Datos personales"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{type:"text",value:z,onChange:e=>H(e.target.value),placeholder:"Nombre completo",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent"}),(0,s.jsx)("input",{type:"tel",value:O,onChange:e=>L(e.target.value),placeholder:"Tel\xe9fono",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent"})]})]}),N&&k&&I&&z&&O&&(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-all duration-300",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{console.log({date:N,time:k,email:I,name:z,phone:O}),w(null),E(null),_(""),H(""),L(""),y(!1)},className:"px-4 py-2 rounded-lg bg-amarillo text-white hover:bg-amarillo/80 transition-all duration-300",children:"Confirmar Visita"})]})]})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>T(!P),className:"group relative inline-flex items-center gap-2 overflow-hidden rounded-full bg-black/20 w-full px-4 sm:px-6 lg:px-8  py-2 sm:py-2.5 lg:py-3  transition-all duration-300 hover:bg-black/40 backdrop-blur-sm",children:[(0,s.jsx)("span",{className:"relative text-sm sm:text-base lg:text-lg font-semibold text-black whitespace-normal text-center w-full",children:"Hacer Oferta"}),(0,s.jsx)("span",{className:"absolute bottom-0 left-0 h-1 w-full transform bg-gradient-to-r from-amarillo via-black to-amarillo transition-transform duration-300 group-hover:translate-x-full"})]}),(0,s.jsx)(p.N,{children:P&&(0,s.jsxs)(h.P.div,{ref:A,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute z-50 mt-2 w-full bg-white rounded-xl shadow-xl p-4",style:{maxHeight:"80vh",overflowY:"auto",marginBottom:"2rem"},children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(o.DDN,{className:"mr-2 text-amarillo"}),"Selecciona tu oferta"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Precio actual: ",t.price.toLocaleString(),"€"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[[{percentage:95,label:"5% menos",value:.95*(a=t.price)},{percentage:90,label:"10% menos",value:.9*a},{percentage:85,label:"15% menos",value:.85*a},{percentage:80,label:"20% menos",value:.8*a},{percentage:75,label:"25% menos",value:.75*a}].map((e,a)=>(0,s.jsxs)(h.P.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},onClick:()=>D(e),className:"w-full p-3 rounded-lg transition-all duration-300 flex justify-between items-center\n                                                                                    ".concat((null==S?void 0:S.percentage)===e.percentage?"bg-amarillo text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsxs)("span",{className:"font-semibold",children:[Math.round(e.value).toLocaleString(),"€"]})]},a)),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\xbfTienes otra oferta en mente?"}),(0,s.jsx)("input",{type:"number",placeholder:"Introduce tu oferta",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent mb-4",onChange:e=>D({value:parseInt(e.target.value),label:"Oferta personalizada"})})]})]})]}),S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 space-y-4 border-t pt-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,s.jsx)(o.x$1,{className:"mr-2 text-amarillo"}),"Datos de contacto"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{type:"email",value:I,onChange:e=>_(e.target.value),placeholder:"Email de contacto",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent"}),(0,s.jsx)("input",{type:"text",value:z,onChange:e=>H(e.target.value),placeholder:"Nombre completo",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent"}),(0,s.jsx)("input",{type:"tel",value:O,onChange:e=>L(e.target.value),placeholder:"Tel\xe9fono",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amarillo focus:border-transparent"})]})]}),I&&z&&O&&(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{onClick:()=>T(!1),className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-all duration-300",children:"Cancelar"}),(0,s.jsx)("button",{onClick:F,className:"px-4 py-2 rounded-lg bg-amarillo text-white hover:bg-amarillo/80 transition-all duration-300",children:"Enviar Oferta"})]})]})]})})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-black/40 to-amarillo/40 rounded-2xl shadow-lg p-8 text-center",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"\xbfTienes preguntas sobre esta propiedad?"}),(0,s.jsx)(c(),{href:"/contacto",children:(0,s.jsxs)("button",{className:"group relative inline-flex items-center gap-2 overflow-hidden rounded-full bg-white/20 px-4 sm:px-6 lg:px-8  py-2 sm:py-2.5 lg:py-3  transition-all duration-300 hover:bg-white/40 backdrop-blur-sm",children:[(0,s.jsx)("span",{className:"relative text-sm sm:text-base lg:text-lg font-semibold text-black whitespace-normal text-center",children:"Cont\xe1ctanos"}),(0,s.jsx)("span",{className:"absolute bottom-0 left-0 h-1 w-full transform bg-gradient-to-r from-amarillo via-black to-amarillo transition-transform duration-300 group-hover:translate-x-full"})]})})]})]})]})})]})}),P&&(0,s.jsx)("div",{className:"h-[500px]"})]})})]})}var y=t(1331);let N=e=>{let a,{property:t}=e;return t?(a="estiloA"===t.template?EstiloAPropertyContent:v,(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)(a,{property:t})})):(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)("h1",{className:"text-4xl font-bold text-center",children:"Propiedad no encontrada"})})};N.getInitialProps=async e=>{let{query:a}=e,{id:t}=a;console.log("Par\xe1metro id recibido:",t);try{let e=await (0,y.qz)(t);return console.log("Datos de la propiedad:",e),{property:e}}catch(e){return console.error("Error fetching property content:",e),{property:null}}};let w=N}},e=>{var a=a=>e(e.s=a);e.O(0,[687,715,348,630,392,476,67,636,593,792],()=>a(2036)),_N_E=e.O()}]);