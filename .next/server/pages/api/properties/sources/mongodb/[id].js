"use strict";(()=>{var e={};e.id=9370,e.ids=[9370],e.modules={8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},28905:(e,r,o)=>{o.r(r),o.d(r,{config:()=>l,default:()=>d,routeModule:()=>u});var t={};o.r(t),o.d(t,{default:()=>s});var a=o(33480),n=o(8667),i=o(86435);async function s(e,r){let{id:o}=e.query;if(!o)return r.status(400).json({error:"Se requiere un ID de propiedad"});try{console.log(`[MongoDB API] Obteniendo propiedad con ID: ${o}`);let e=`https://nextjs-gozamadrid-qrfk.onrender.com/api/properties/${o}`;console.log(`[MongoDB API] URL de solicitud: ${e}`);let t=new AbortController,a=setTimeout(()=>t.abort(),8e3);try{let n=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:t.signal});if(clearTimeout(a),!n.ok)throw Error(`Error al obtener propiedad: ${n.status} ${n.statusText}`);let i=await n.json();if(!i)return r.status(404).json({error:"Propiedad no encontrada",id:o,source:"mongodb"});return r.status(200).json({...i,source:"mongodb"})}catch(t){console.error(`[API] Error de fetch al obtener propiedad MongoDB ${o}:`,t);let e={_id:o,title:`Propiedad ${o}`,description:"Informaci\xf3n temporal. Estamos experimentando problemas al conectar con la base de datos. Por favor, int\xe9ntelo de nuevo m\xe1s tarde.",source:"mongodb",price:"Consultar",images:[],_fallback:!0,features:{bedrooms:0,bathrooms:0,area:0},bedrooms:0,bathrooms:0,size:0,location:"Madrid",type:"Propiedad",error:t.message};return r.status(207).json(e)}}catch(t){if(console.error(`[API] Error general al obtener propiedad MongoDB ${o}:`,t),"AbortError"===t.name){let e={_id:o,title:`Propiedad ${o} (Tiempo de espera agotado)`,description:"Se agot\xf3 el tiempo de espera al intentar cargar la informaci\xf3n. Por favor, int\xe9ntelo de nuevo m\xe1s tarde.",source:"mongodb",price:"Consultar",images:[],_fallback:!0,features:{bedrooms:0,bathrooms:0,area:0},bedrooms:0,bathrooms:0,size:0,location:"Madrid",type:"Propiedad",error:"Tiempo de espera agotado"};return r.status(207).json(e)}let e={_id:o,title:`Propiedad ${o} (Error de servidor)`,description:"Ocurri\xf3 un error al intentar cargar la informaci\xf3n. Por favor, int\xe9ntelo de nuevo m\xe1s tarde.",source:"mongodb",price:"Consultar",images:[],_fallback:!0,features:{bedrooms:0,bathrooms:0,area:0},bedrooms:0,bathrooms:0,size:0,location:"Madrid",type:"Propiedad",error:t.message||"Error interno del servidor"};return r.status(207).json(e)}}let d=(0,i.M)(t,"default"),l=(0,i.M)(t,"config"),u=new a.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/properties/sources/mongodb/[id]",pathname:"/api/properties/sources/mongodb/[id]",bundlePath:"",filename:""},userland:t})},33480:(e,r,o)=>{e.exports=o(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,o){return o in r?r[o]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,o)):"function"==typeof r&&"default"===o?r:void 0}}})}};var r=require("../../../../../webpack-api-runtime.js");r.C(e);var o=r(r.s=28905);module.exports=o})();