"use strict";(()=>{var e={};e.id=4676,e.ids=[4676],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,o)=>{e.exports=o(75600)},60636:(e,t,o)=>{o.r(t),o.d(t,{config:()=>p,default:()=>d,routeModule:()=>l});var r={};o.r(r),o.d(r,{default:()=>i});var c=o(33480),a=o(8667),s=o(86435),n=o(94749);async function i(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization, Cache-Control, Accept, X-Requested-With, Origin, X-Api-Key"),t.setHeader("Access-Control-Max-Age","86400"),"OPTIONS"===e.method)return t.status(200).end();let o=e.url.replace(/^\/api\/proxy\/backend\/?/,""),r=`${n.A.BACKEND_API_URL||"http://api.realestategozamadrid.com/api"}/${o}`;console.log(`[Proxy Backend] Redirigiendo a: ${r}`);try{let o,c={"Content-Type":"application/json",Accept:"application/json","User-Agent":"GozaMadrid/1.0",Origin:e.headers.origin||"https://www.realestategozamadrid.com"};e.headers.authorization&&(c.Authorization=e.headers.authorization),e.headers.cookie&&(c.Cookie=e.headers.cookie);let a={method:e.method,headers:c,redirect:"follow"};["POST","PUT","PATCH"].includes(e.method)&&(a.body=JSON.stringify(e.body)),console.log(`[Proxy Backend] Enviando solicitud a ${r} con m\xe9todo ${e.method}`);let s=await fetch(r,a);if(console.log(`[Proxy Backend] Respuesta recibida: ${s.status} ${s.statusText}`),s.redirected&&console.log(`[Proxy Backend] Redirecci\xf3n detectada a: ${s.url}`),!s.ok){let e=await s.text();return console.error(`[Proxy Backend] Error (${s.status}): ${e.substring(0,200)}`),t.status(s.status).json({error:`Error del backend: ${s.status} ${s.statusText}`,details:e})}let n=s.headers.get("content-type");return o=n&&n.includes("application/json")?await s.json():await s.text(),["content-type","cache-control","content-disposition"].forEach(e=>{let o=s.headers.get(e);o&&t.setHeader(e,o)}),t.status(s.status).json(o)}catch(e){return console.error("[Proxy Backend] Error de conexi\xf3n:",e),t.status(500).json({error:"Error de conexi\xf3n con el servidor backend",message:e.message})}}let d=(0,s.M)(r,"default"),p=(0,s.M)(r,"config"),l=new c.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/proxy/backend",pathname:"/api/proxy/backend",bundlePath:"",filename:""},userland:r})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},94749:(e,t,o)=>{o.d(t,{A:()=>i});let r="https://www.realestategozamadrid.com",c="https://wordpress.realestategozamadrid.com/wp-json/wp/v2",a="https://wordpress.realestategozamadrid.com/wp-json/wc/v3",s={headers:{Accept:"application/json","Content-Type":"application/json"}},n={SITE_URL:r,WP_API_URL:c,WC_API_URL:a,defaultFetchConfig:s,WOO_COMMERCE_KEY:process.env.NEXT_PUBLIC_WOO_COMMERCE_KEY||"ck_d4c3f5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3",WOO_COMMERCE_SECRET:process.env.NEXT_PUBLIC_WOO_COMMERCE_SECRET||"cs_c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3",ITEMS_PER_PAGE:12,API_PROXY:{MONGODB:"api/properties/sources/mongodb",PROPERTIES:"api/properties",WOOCOMMERCE:"api/woocommerce/products"},ENDPOINTS:{PROPERTIES:"api/properties",PROPERTY:"api/properties",CONTACT:"api/contact",CONFIG:"api/config/properties",WOOCOMMERCE:{PRODUCTS:"api/woocommerce/products",PRODUCT:e=>`api/woocommerce/products/${e}`}},getBaseUrl:()=>r,getEndpointUrl:e=>{let t=e.startsWith("/")?e.slice(1):e;return`${r}/${t}`},getMongoUrl:(e=null)=>{let t="api/properties/sources/mongodb";return e?`${t}/${e}`:t},getWooCommerceUrl:(e=null)=>{let t="api/woocommerce/products";return e?`${t}/${e}`:t},getWordPressBaseUrl:()=>`${r}/api/proxy/wordpress`,getWooCommerceAuth:()=>({key:n.WOO_COMMERCE_KEY,secret:n.WOO_COMMERCE_SECRET}),getFetchConfig:(e={})=>({...s,...e})};process.env.NEXT_PUBLIC_WOO_COMMERCE_KEY,process.env.NEXT_PUBLIC_WOO_COMMERCE_SECRET;let i=n}};var t=require("../../../webpack-api-runtime.js");t.C(e);var o=t(t.s=60636);module.exports=o})();