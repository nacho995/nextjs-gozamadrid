"use strict";(()=>{var e={};e.id=1553,e.ids=[1553],e.modules={8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},8804:(e,r,o)=>{o.r(r),o.d(r,{config:()=>p,default:()=>d,routeModule:()=>l});var t={};o.r(t),o.d(t,{default:()=>i});var s=o(33480),c=o(8667),n=o(86435),a=o(94749);async function i(e,r){if(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),r.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization, Cache-Control, Accept"),"OPTIONS"===e.method)return r.status(200).end();try{let e=`${a.A.WP_API_URL}/posts`;if(console.log(`[Diagn\xf3stico WordPress] Conectando a: ${e}`),!e.startsWith("https"))return console.error(`[Diagn\xf3stico WordPress] Error: URL insegura (${e}) en producci\xf3n`),r.status(400).json({error:"URL insegura en producci\xf3n",message:"Las solicitudes en producci\xf3n deben usar HTTPS",url:e});let o=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","User-Agent":"GozaMadrid/1.0"}});if(!o.ok){let e=await o.text();return console.error(`[Diagn\xf3stico WordPress] Error de respuesta (${o.status}): ${e.substring(0,500)}`),r.status(o.status).json({error:`Error en la API de WordPress: ${o.status} ${o.statusText}`,details:e})}let t=await o.json();return console.log(`[Diagn\xf3stico WordPress] \xc9xito: ${t.length} posts recuperados`),r.status(200).json(t)}catch(t){console.error("[Diagn\xf3stico WordPress] Error:",t);let e=t.message,o="error_general";return t.message.includes("CORS")?(o="error_cors",e="Error de CORS: El servidor remoto no permite peticiones desde este origen"):t.message.includes("certificate")?(o="error_ssl",e="Error de SSL: Certificado inv\xe1lido o problema de seguridad"):t.message.includes("fetch")?(o="error_fetch",e="Error en la petici\xf3n: No se pudo realizar la conexi\xf3n"):t.message.includes("Mixed Content")&&(o="error_mixed_content",e="Error de contenido mixto: Intentando cargar contenido HTTP desde una p\xe1gina HTTPS"),r.status(500).json({error:"Error al conectar con la API de WordPress",message:e,type:o,details:t.stack})}}let d=(0,n.M)(t,"default"),p=(0,n.M)(t,"config"),l=new s.PagesAPIRouteModule({definition:{kind:c.A.PAGES_API,page:"/api/proxy/diagnostic/wordpress",pathname:"/api/proxy/diagnostic/wordpress",bundlePath:"",filename:""},userland:t})},33480:(e,r,o)=>{e.exports=o(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,o){return o in r?r[o]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,o)):"function"==typeof r&&"default"===o?r:void 0}}})},94749:(e,r,o)=>{o.d(r,{A:()=>i});let t="https://www.realestategozamadrid.com",s="https://wordpress.realestategozamadrid.com/wp-json/wp/v2",c="https://wordpress.realestategozamadrid.com/wp-json/wc/v3",n={headers:{Accept:"application/json","Content-Type":"application/json"}},a={SITE_URL:t,WP_API_URL:s,WC_API_URL:c,defaultFetchConfig:n,WOO_COMMERCE_KEY:process.env.NEXT_PUBLIC_WOO_COMMERCE_KEY||"ck_d4c3f5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3",WOO_COMMERCE_SECRET:process.env.NEXT_PUBLIC_WOO_COMMERCE_SECRET||"cs_c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3c5c3",ITEMS_PER_PAGE:12,API_PROXY:{MONGODB:"api/properties/sources/mongodb",PROPERTIES:"api/properties",WOOCOMMERCE:"api/woocommerce/products"},ENDPOINTS:{PROPERTIES:"api/properties",PROPERTY:"api/properties",CONTACT:"api/contact",CONFIG:"api/config/properties",WOOCOMMERCE:{PRODUCTS:"api/woocommerce/products",PRODUCT:e=>`api/woocommerce/products/${e}`}},getBaseUrl:()=>t,getEndpointUrl:e=>{let r=e.startsWith("/")?e.slice(1):e;return`${t}/${r}`},getMongoUrl:(e=null)=>{let r="api/properties/sources/mongodb";return e?`${r}/${e}`:r},getWooCommerceUrl:(e=null)=>{let r="api/woocommerce/products";return e?`${r}/${e}`:r},getWordPressBaseUrl:()=>`${t}/api/proxy/wordpress`,getWooCommerceAuth:()=>({key:a.WOO_COMMERCE_KEY,secret:a.WOO_COMMERCE_SECRET}),getFetchConfig:(e={})=>({...n,...e})};process.env.NEXT_PUBLIC_WOO_COMMERCE_KEY,process.env.NEXT_PUBLIC_WOO_COMMERCE_SECRET;let i=a}};var r=require("../../../../webpack-api-runtime.js");r.C(e);var o=r(r.s=8804);module.exports=o})();