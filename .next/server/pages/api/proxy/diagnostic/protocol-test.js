"use strict";(()=>{var e={};e.id=4977,e.ids=[4977],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,r)=>{e.exports=r(75600)},55464:(e,t,r)=>{r.r(t),r.d(t,{config:()=>d,default:()=>l,routeModule:()=>c});var o={};r.r(o),r.d(o,{default:()=>i});var s=r(33480),n=r(8667),a=r(86435);async function i(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization, Cache-Control, Accept"),"OPTIONS"===e.method)return t.status(200).end();let{domain:r}=e.query;if(!r)return t.status(400).json({error:"Se requiere un dominio para la prueba",message:'Debe proporcionar un par\xe1metro "domain" en la consulta'});let o=r.replace(/^https?:\/\//,""),s=`http://${o}`,n=`https://${o}`,a={domain:o,timestamp:new Date().toISOString(),http:{works:!1,statusCode:null,responseTime:null,error:null},https:{works:!1,statusCode:null,responseTime:null,error:null},recommendation:null};try{console.log(`[Protocol Test] Probando HTTP para: ${s}`);let e=Date.now(),t=await fetch(s,{method:"GET",headers:{"User-Agent":"GozaMadrid/1.0",Accept:"text/html, application/json"},redirect:"follow"});a.http.statusCode=t.status,a.http.responseTime=Date.now()-e,a.http.works=t.status>=200&&t.status<500,t.redirected&&(a.http.redirectedTo=t.url,a.http.redirectedToHttps=t.url.startsWith("https://"))}catch(e){a.http.error=e.message,console.error(`[Protocol Test] Error HTTP: ${e.message}`)}try{console.log(`[Protocol Test] Probando HTTPS para: ${n}`);let e=Date.now(),t=await fetch(n,{method:"GET",headers:{"User-Agent":"GozaMadrid/1.0",Accept:"text/html, application/json"},redirect:"follow"});a.https.statusCode=t.status,a.https.responseTime=Date.now()-e,a.https.works=t.status>=200&&t.status<500,t.redirected&&(a.https.redirectedTo=t.url,a.https.redirectedToHttp=t.url.startsWith("http://")&&!t.url.startsWith("https://"))}catch(e){a.https.error=e.message,console.error(`[Protocol Test] Error HTTPS: ${e.message}`)}return a.https.works&&a.http.works?a.recommendation="Ambos protocolos funcionan. Se recomienda HTTPS por seguridad.":a.https.works?a.recommendation="Solo HTTPS funciona. Esta es la configuraci\xf3n ideal.":a.http.works?(a.recommendation="Solo HTTP funciona. Considere configurar HTTPS para mayor seguridad.",a.https.error&&a.https.error.includes("certificate")&&(a.recommendation+=" Hay un problema con el certificado SSL.")):a.recommendation="Ning\xfan protocolo funciona. Verifique la disponibilidad del servidor.",t.status(200).json(a)}let l=(0,a.M)(o,"default"),d=(0,a.M)(o,"config"),c=new s.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/proxy/diagnostic/protocol-test",pathname:"/api/proxy/diagnostic/protocol-test",bundlePath:"",filename:""},userland:o})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})}};var t=require("../../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=55464);module.exports=r})();