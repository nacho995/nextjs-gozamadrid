"use strict";(()=>{var e={};e.id=3480,e.ids=[3480],e.modules={1428:e=>{e.exports=import("axios")},8667:(e,s)=>{Object.defineProperty(s,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},20733:(e,s,t)=>{t.a(e,async(e,n)=>{try{t.r(s),t.d(s,{default:()=>r});var a=t(1428),o=e([a]);async function r(e,s){if("GET"!==e.method)return s.status(405).json({error:"M\xe9todo no permitido"});let t={timestamp:new Date().toISOString(),environment:"production",credentials:{WC_CONSUMER_KEY:{exists:!!process.env.WC_CONSUMER_KEY,length:process.env.WC_CONSUMER_KEY?.length||0,prefix:process.env.WC_CONSUMER_KEY?.substring(0,8)||"NOT_SET"},WC_CONSUMER_SECRET:{exists:!!process.env.WC_CONSUMER_SECRET,length:process.env.WC_CONSUMER_SECRET?.length||0,prefix:process.env.WC_CONSUMER_SECRET?.substring(0,8)||"NOT_SET"},WC_API_URL:{exists:!!process.env.WC_API_URL,value:process.env.WC_API_URL||"NOT_SET"}},endpoints:[],tests:[]},n=process.env.WC_API_URL||"https://wordpress.realestategozamadrid.com/wp-json/wc/v3";try{console.log("\uD83D\uDD0D Test 1: Verificando conectividad b\xe1sica...");let e=await a.default.get(n,{timeout:5e3,headers:{"User-Agent":"Goza Madrid Diagnostic/1.0"}});t.tests.push({name:"Conectividad b\xe1sica",endpoint:n,success:!0,status:e.status,message:"Endpoint accesible"})}catch(e){t.tests.push({name:"Conectividad b\xe1sica",endpoint:n,success:!1,error:e.message,code:e.code,status:e.response?.status,responseData:e.response?.data})}if(process.env.WC_CONSUMER_KEY&&process.env.WC_CONSUMER_SECRET)try{console.log("\uD83D\uDD10 Test 2: Verificando autenticaci\xf3n...");let e=await a.default.get(`${n}/products`,{params:{consumer_key:process.env.WC_CONSUMER_KEY,consumer_secret:process.env.WC_CONSUMER_SECRET,per_page:1},timeout:1e4,headers:{"User-Agent":"Goza Madrid Diagnostic/1.0",Accept:"application/json"}});t.tests.push({name:"Autenticaci\xf3n WooCommerce",endpoint:`${n}/products`,success:!0,status:e.status,productsFound:Array.isArray(e.data)?e.data.length:0,message:"Autenticaci\xf3n exitosa"})}catch(e){t.tests.push({name:"Autenticaci\xf3n WooCommerce",endpoint:`${n}/products`,success:!1,error:e.message,status:e.response?.status,statusText:e.response?.statusText,responseData:e.response?.data,headers:e.response?.headers})}else t.tests.push({name:"Autenticaci\xf3n WooCommerce",success:!1,error:"Credenciales no configuradas",missingCredentials:{key:!process.env.WC_CONSUMER_KEY,secret:!process.env.WC_CONSUMER_SECRET}});if(process.env.WC_API_URL?.startsWith("https://")){let e=process.env.WC_API_URL.replace("https://","http://");try{console.log("\uD83D\uDD04 Test 3: Verificando endpoint HTTP sin SSL...");let s=await a.default.get(e,{timeout:5e3,headers:{"User-Agent":"Goza Madrid Diagnostic/1.0"}});t.tests.push({name:"Endpoint HTTP sin SSL",endpoint:e,success:!0,status:s.status,message:"Endpoint HTTP accesible - posible problema con SSL"})}catch(s){t.tests.push({name:"Endpoint HTTP sin SSL",endpoint:e,success:!1,error:s.message,status:s.response?.status})}}let o=t.tests.filter(e=>e.success).length,r=t.tests.length;return t.summary={totalTests:r,successfulTests:o,failedTests:r-o,recommendation:0===o?"El endpoint de WooCommerce no est\xe1 accesible. Verificar la URL, el estado del servidor y las credenciales.":o<r?"Algunos tests fallaron. Revisar credenciales, configuraci\xf3n SSL y permisos de la API.":"Todo funcionando correctamente."},s.status(0===o?503:o<r?206:200).json(t)}a=(o.then?(await o)():o)[0],n()}catch(e){n(e)}})},33480:(e,s,t)=>{e.exports=t(75600)},58826:(e,s,t)=>{t.a(e,async(e,n)=>{try{t.r(s),t.d(s,{config:()=>p,default:()=>d,routeModule:()=>u});var a=t(33480),o=t(8667),r=t(86435),i=t(20733),c=e([i]);i=(c.then?(await c)():c)[0];let d=(0,r.M)(i,"default"),p=(0,r.M)(i,"config"),u=new a.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/diagnostic/woocommerce-check",pathname:"/api/diagnostic/woocommerce-check",bundlePath:"",filename:""},userland:i});n()}catch(e){n(e)}})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,s)=>{Object.defineProperty(s,"M",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})}};var s=require("../../../webpack-api-runtime.js");s.C(e);var t=s(s.s=58826);module.exports=t})();