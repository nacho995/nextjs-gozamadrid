"use strict";(()=>{var e={};e.id=6807,e.ids=[6807],e.modules={1428:e=>{e.exports=import("axios")},8650:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{config:()=>d,default:()=>u,routeModule:()=>p});var a=t(33480),n=t(8667),o=t(86435),c=t(23738),i=e([c]);c=(i.then?(await i)():i)[0];let u=(0,o.M)(c,"default"),d=(0,o.M)(c,"config"),p=new a.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/diagnostic/woocommerce",pathname:"/api/diagnostic/woocommerce",bundlePath:"",filename:""},userland:c});s()}catch(e){s(e)}})},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},23738:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{default:()=>o});var a=t(1428),n=e([a]);async function o(e,r){if("GET"!==e.method)return r.status(405).json({error:"M\xe9todo no permitido"});let t=process.env.WC_API_URL||process.env.NEXT_PUBLIC_WC_API_URL,s=process.env.WC_CONSUMER_KEY,n=process.env.WC_CONSUMER_SECRET,o={timestamp:new Date().toISOString(),environment:"production",vercel:{region:process.env.VERCEL_REGION,url:process.env.VERCEL_URL},woocommerce:{api_url:t?"CONFIGURADA":"NO CONFIGURADA",api_url_value:t,consumer_key:s?`CONFIGURADA (${s.length} chars)`:"NO CONFIGURADA",consumer_secret:n?`CONFIGURADA (${n.length} chars)`:"NO CONFIGURADA",consumer_key_preview:s?`${s.substring(0,10)}...`:"N/A",consumer_secret_preview:n?`${n.substring(0,10)}...`:"N/A"},all_env_vars:Object.keys(process.env).filter(e=>e.includes("WC")||e.includes("CONSUMER")||e.includes("WORDPRESS")||e.includes("API")).reduce((e,r)=>(e[r]=process.env[r]?"CONFIGURADA":"NO CONFIGURADA",e),{})};if(t&&s&&n)try{console.log("[Diagnostic] Intentando petici\xf3n de prueba a WooCommerce...");let e=`${t}/products`,r=await a.default.get(e,{params:{consumer_key:s,consumer_secret:n,per_page:1},timeout:1e4,headers:{"User-Agent":"Goza Madrid Diagnostic/1.0",Accept:"application/json"}});o.test_request={success:!0,status:r.status,data_type:typeof r.data,is_array:Array.isArray(r.data),data_length:r.data?.length||0,headers:r.headers,sample_data:r.data?.slice(0,1)||null}}catch(e){o.test_request={success:!1,error:e.message,status:e.response?.status,error_data:e.response?.data,error_headers:e.response?.headers,error_code:e.code}}else o.test_request={success:!1,error:"Credenciales no configuradas"};return r.status(200).json(o)}a=(n.then?(await n)():n)[0],s()}catch(e){s(e)}})},33480:(e,r,t)=>{e.exports=t(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=8650);module.exports=t})();