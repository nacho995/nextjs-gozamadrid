"use strict";(()=>{var e={};e.id=266,e.ids=[266],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,s)=>{e.exports=s(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},86830:(e,t,s)=>{s.r(t),s.d(t,{config:()=>u,default:()=>i,routeModule:()=>p});var o={};s.r(o),s.d(o,{default:()=>d});var r=s(33480),a=s(8667),n=s(86435);async function d(e,t){if("GET"!==e.method)return t.status(405).json({error:"M\xe9todo no permitido"});let s=process.env.NEXT_PUBLIC_WP_API_URL||"https://wordpress.realestategozamadrid.com/wp-json/wp/v2",o={timestamp:new Date().toISOString(),wordpress_url:s,tests:{}};try{console.log(`[WordPress Diagnostic] Probando conectividad a: ${s}`);let e=await fetch(s,{method:"GET",headers:{Accept:"application/json","User-Agent":"GozaMadrid-Diagnostic/1.0"},signal:AbortSignal.timeout(1e4)});if(o.tests.connectivity={status:e.ok?"success":"error",http_status:e.status,response_time:Date.now(),url_tested:s},e.ok){let t=await e.json();o.tests.connectivity.api_info={name:t.name,description:t.description,url:t.url,home:t.home,gmt_offset:t.gmt_offset,timezone_string:t.timezone_string}}}catch(e){o.tests.connectivity={status:"error",error:e.message,url_tested:s}}try{let e=`${s}/posts?per_page=1`;console.log(`[WordPress Diagnostic] Probando endpoint de posts: ${e}`);let t=Date.now(),r=await fetch(e,{method:"GET",headers:{Accept:"application/json","User-Agent":"GozaMadrid-Diagnostic/1.0"},signal:AbortSignal.timeout(1e4)}),a=Date.now();if(o.tests.posts_endpoint={status:r.ok?"success":"error",http_status:r.status,response_time_ms:a-t,url_tested:e},r.ok){let e=await r.json();o.tests.posts_endpoint.posts_found=Array.isArray(e)?e.length:0,o.tests.posts_endpoint.sample_post=e[0]?{id:e[0].id,title:e[0].title?.rendered||"Sin t\xedtulo",date:e[0].date,slug:e[0].slug,has_featured_media:!!e[0].featured_media}:null}}catch(e){o.tests.posts_endpoint={status:"error",error:e.message,url_tested:`${s}/posts?per_page=1`}}try{let e=`${s}/posts?per_page=1&_embed=true`;console.log(`[WordPress Diagnostic] Probando endpoint con _embed: ${e}`);let t=Date.now(),r=await fetch(e,{method:"GET",headers:{Accept:"application/json","User-Agent":"GozaMadrid-Diagnostic/1.0"},signal:AbortSignal.timeout(1e4)}),a=Date.now();if(o.tests.embed_endpoint={status:r.ok?"success":"error",http_status:r.status,response_time_ms:a-t,url_tested:e},r.ok){let e=await r.json();o.tests.embed_endpoint.posts_found=Array.isArray(e)?e.length:0,o.tests.embed_endpoint.sample_embedded=e[0]?{has_embedded:!!e[0]._embedded,has_featured_media:!!(e[0]._embedded&&e[0]._embedded["wp:featuredmedia"]),featured_media_url:e[0]._embedded&&e[0]._embedded["wp:featuredmedia"]&&e[0]._embedded["wp:featuredmedia"][0]?e[0]._embedded["wp:featuredmedia"][0].source_url:null}:null}}catch(e){o.tests.embed_endpoint={status:"error",error:e.message,url_tested:`${s}/posts?per_page=1&_embed=true`}}let r=Object.values(o.tests),a=r.filter(e=>"success"===e.status).length,n=r.length;return o.summary={overall_status:a===n?"healthy":a>0?"partial":"failed",successful_tests:a,total_tests:n,health_percentage:Math.round(a/n*100)},t.setHeader("Content-Type","application/json"),t.setHeader("Cache-Control","no-cache, no-store, must-revalidate"),t.status(200).json(o)}let i=(0,n.M)(o,"default"),u=(0,n.M)(o,"config"),p=new r.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/diagnostic/wordpress",pathname:"/api/diagnostic/wordpress",bundlePath:"",filename:""},userland:o})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=86830);module.exports=s})();