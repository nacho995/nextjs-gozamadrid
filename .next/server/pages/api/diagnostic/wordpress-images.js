"use strict";(()=>{var e={};e.id=7717,e.ids=[7717],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},32189:(e,t,r)=>{r.r(t),r.d(t,{config:()=>n,default:()=>u,routeModule:()=>_});var a={};r.r(a),r.d(a,{default:()=>o});var s=r(33480),d=r(8667),i=r(86435);async function o(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type, Accept"),"OPTIONS"===e.method)return t.status(200).end();if("GET"!==e.method)return t.status(405).json({error:"M\xe9todo no permitido"});try{console.log("[WordPress Images Diagnostic] Iniciando diagn\xf3stico...");let e=await fetch("https://www.realestategozamadrid.com/wp-json/wp/v2/posts?per_page=5&_embed=true",{method:"GET",headers:{Accept:"application/json","User-Agent":"GozaMadrid-Diagnostic/1.0"},signal:AbortSignal.timeout(1e4)});if(!e.ok)throw Error(`WordPress API fall\xf3: ${e.status} ${e.statusText}`);let r=await e.json();console.log(`[WordPress Images Diagnostic] Obtenidos ${r.length} posts`);let a=r.map(e=>{let t={id:e.id,title:e.title?.rendered||"Sin t\xedtulo",featured_media:e.featured_media,has_embedded:!!e._embedded,embedded_keys:e._embedded?Object.keys(e._embedded):[],featured_media_data:null,featured_media_url:e.featured_media_url||null,uagb_featured_image_src:e.uagb_featured_image_src||null,image_sources_found:[]};if(e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]){let r=e._embedded["wp:featuredmedia"][0];t.featured_media_data={id:r.id,source_url:r.source_url,alt_text:r.alt_text,media_type:r.media_type,sizes:r.media_details?.sizes?Object.keys(r.media_details.sizes):[]},r.source_url&&t.image_sources_found.push({source:"_embedded.wp:featuredmedia",url:r.source_url})}if(e.featured_media_url&&t.image_sources_found.push({source:"featured_media_url",url:e.featured_media_url}),e.uagb_featured_image_src){let r=e.uagb_featured_image_src;Object.keys(r).forEach(e=>{r[e]&&r[e][0]&&t.image_sources_found.push({source:`uagb_featured_image_src.${e}`,url:r[e][0]})})}return t}),s={total_posts:r.length,posts_with_embedded:a.filter(e=>e.has_embedded).length,posts_with_featured_media:a.filter(e=>e.featured_media_data).length,posts_with_featured_media_url:a.filter(e=>e.featured_media_url).length,posts_with_uagb:a.filter(e=>e.uagb_featured_image_src).length,posts_with_any_image:a.filter(e=>e.image_sources_found.length>0).length};return t.status(200).json({success:!0,summary:s,posts:a,raw_sample:r[0]})}catch(e){return console.error("[WordPress Images Diagnostic] Error:",e.message),t.status(500).json({success:!1,error:e.message,details:"Error al diagnosticar im\xe1genes de WordPress"})}}let u=(0,i.M)(a,"default"),n=(0,i.M)(a,"config"),_=new s.PagesAPIRouteModule({definition:{kind:d.A.PAGES_API,page:"/api/diagnostic/wordpress-images",pathname:"/api/diagnostic/wordpress-images",bundlePath:"",filename:""},userland:a})},33480:(e,t,r)=>{e.exports=r(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=32189);module.exports=r})();