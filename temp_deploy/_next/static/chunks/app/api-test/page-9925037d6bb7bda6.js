/* Content-Type: application/javascript */
/* Content-Type: application/javascript */
/* Content-Type: application/javascript */
/* Content-Type: application/javascript */
/* Content-Type: application/javascript */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{5547:function(e,r,t){Promise.resolve().then(t.bind(t,6514))},6514:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ApiExample}});var o=t(7437),n=t(2265);let fetchWithTimeout=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new AbortController,{signal:o}=t,n=setTimeout(()=>{t.abort()},6e4);try{console.log("Realizando petici\xf3n a: ".concat(e));let t=await fetch(e,{...r,signal:o});if(clearTimeout(n),!t.ok)throw Error("Error HTTP: ".concat(t.status));return t}catch(e){if(clearTimeout(n),"AbortError"===e.name)throw Error("La petici\xf3n ha excedido el tiempo m\xe1ximo");throw e}},getProperties=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r="".concat("/api/proxy?service=woocommerce","&resource=products");Object.entries(e).forEach(e=>{let[t,o]=e;r+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(o))});try{console.log("Solicitando propiedades desde: ".concat(r));let e=await fetchWithTimeout(r,{headers:{"Content-Type":"application/json","User-Agent":"Mozilla/5.0 (compatible; GozaMadridBot/1.0)"}});return await e.json()}catch(e){return console.error("Error fetching properties:",e),[]}},submitContactForm=async e=>{try{let r=await fetchWithTimeout("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error("Error: ".concat(r.status));return await r.json()}catch(e){throw console.error("Error al enviar el formulario de contacto:",e),e}};function ApiExample(){let[e,r]=(0,n.useState)([]),[t,a]=(0,n.useState)(!0),[s,i]=(0,n.useState)(null),[l,c]=(0,n.useState)({name:"",email:"",message:""}),[d,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{let fetchProperties=async()=>{try{a(!0);let e=await getProperties();r(e),i(null)}catch(e){console.error("Error fetching properties:",e),i("No se pudieron cargar las propiedades. Intente nuevamente m\xe1s tarde.")}finally{a(!1)}};fetchProperties()},[]);let handleInputChange=e=>{let{name:r,value:t}=e.target;c(e=>({...e,[r]:t}))},handleSubmit=async e=>{e.preventDefault();try{m("sending"),await submitContactForm(l),m("success"),c({name:"",email:"",message:""})}catch(e){console.error("Error submitting form:",e),m("error")}};return(0,o.jsxs)("div",{className:"container mx-auto p-4",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Ejemplo de API con HTTPS a trav\xe9s de Cloudflare"}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Propiedades"}),t&&(0,o.jsx)("p",{children:"Cargando propiedades..."}),s&&(0,o.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),!t&&!s&&(0,o.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,o.jsxs)("div",{className:"border rounded p-4 shadow-sm",children:[(0,o.jsx)("h3",{className:"font-bold",children:e.title}),(0,o.jsx)("p",{className:"text-gray-600",children:e.location}),(0,o.jsxs)("p",{className:"text-green-600 font-semibold",children:[e.price,"â‚¬"]})]},e._id)):(0,o.jsx)("p",{children:"No hay propiedades disponibles."})})]}),(0,o.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Formulario de Contacto"}),"success"===d&&(0,o.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"\xa1Mensaje enviado correctamente! Nos pondremos en contacto contigo pronto."}),"error"===d&&(0,o.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:"Ha ocurrido un error al enviar el mensaje. Por favor, intenta nuevamente."}),(0,o.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),(0,o.jsx)("input",{type:"text",id:"name",name:"name",value:l.name,onChange:handleInputChange,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:l.email,onChange:handleInputChange,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),(0,o.jsx)("textarea",{id:"message",name:"message",value:l.message,onChange:handleInputChange,required:!0,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsx)("button",{type:"submit",disabled:"sending"===d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:"sending"===d?"Enviando...":"Enviar mensaje"})]})]})]})}},622:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=t(2265),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,r,t){var o,l={},c=null,d=null;for(o in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)a.call(r,o)&&!i.hasOwnProperty(o)&&(l[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===l[o]&&(l[o]=r[o]);return{$$typeof:n,type:e,key:c,ref:d,props:l,_owner:s.current}}r.jsx=q,r.jsxs=q},7437:function(e,r,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=5547)}),_N_E=e.O()}]);